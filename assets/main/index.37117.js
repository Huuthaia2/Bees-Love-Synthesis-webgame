window.__require=function t(e,n,o){function i(a,c){if(!n[a]){if(!e[a]){var s=a.split("/");if(s=s[s.length-1],!e[s]){var l="function"==typeof __require&&__require;if(!c&&l)return l(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+a+"'")}a=s}var u=n[a]={exports:{}};e[a][0].call(u.exports,function(t){return i(e[a][1][t]||t)},u,u.exports,t,e,n,o)}return n[a].exports}for(var r="function"==typeof __require&&__require,a=0;a<o.length;a++)i(o[a]);return i}({ABTestConfig:[function(t,e,n){"use strict";cc._RF.push(e,"d6718RIRxZMzoqPhXYV2npG","ABTestConfig"),Object.defineProperty(n,"__esModule",{value:!0}),n.ABTestType=void 0,function(t){t.DayCoin="expt_1629449056568",t.NewEnergy="expt_1629707408735",t.SingleGrid="single_grid",t.Box1st="box_1st",t.GridCoin="grid_coin"}(n.ABTestType||(n.ABTestType={})),cc._RF.pop()},{}],ABTestManager:[function(t,e,n){"use strict";cc._RF.push(e,"2df64jmbc9NeqvREFqI5BPL","ABTestManager"),Object.defineProperty(n,"__esModule",{value:!0}),n.ab=void 0;var o=t("./PlatformManager"),i=t("../utils/logger"),r=t("../game/data/ABTestConfig"),a=function(){function t(){this.ABTestData=new Map}return Object.defineProperty(t,"instance",{get:function(){return t._instance||(t._instance=new t),t._instance},enumerable:!1,configurable:!0}),t.prototype.onInit=function(){var t=[];for(var e in r.ABTestType)t.push(r.ABTestType[e]);var n=o.pm.getExptInfoSync(t);if(n){for(var e in r.ABTestType){var a=r.ABTestType[e];i.Logger.debug("[DataManager initABTestData] \u904d\u5386ABTestType ",a);var c=!1;"1"==n[a]&&(c=!0),this.ABTestData.set(a,c)}i.Logger.debug("[DataManager initABTestData] data:",this.ABTestData)}else i.Logger.error("wx getExptInfoSync error")},t.prototype.IsABTestOpen=function(t){return!!this.ABTestData.has(t)&&this.ABTestData.get(t)},t._instance=null,t}();n.default=a,n.ab=a.instance,cc._RF.pop()},{"../game/data/ABTestConfig":"ABTestConfig","../utils/logger":"logger","./PlatformManager":"PlatformManager"}],AdConfig:[function(t,e,n){"use strict";cc._RF.push(e,"a91446IK5ZGBrKQwb+CFTtk","AdConfig"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../utils/Utils"),i=t("../../common/PlatformMiniGame"),r=t("../../common/consts/GlobalDefines"),a=function(){function t(t,e){this.isFromMp=!1,this.gamekey=void 0,this.AdInfo={Refresh:{name:"\u5237\u65b0\u9053\u5177",adid:"refresh"},Bee:{name:"\u5c0f\u871c\u8702\u9053\u5177",adid:"bee"},Magic:{name:"\u9b54\u6cd5\u68d2",adid:"magic"},Flower:{name:"\u65b0\u82b1",adid:"flower"},Revive:{name:"\u590d\u6d3b",adid:"revive"},DoubleAward:{name:"\u53cc\u500d\u5956\u52b1",adid:"double_award"}},this.BannerInfo={Normal:{name:"\u901a\u7528",bid:"adunit-4a0918dac589e3c0"}},this.XAdInfo={RankPanel:{name:"\u6392\u884c\u699c",xid:"rank_panel"},FlowerPanel:{name:"\u82b1\u6735\u754c\u9762",xid:"flower_table"},GameEnd:{name:"\u5173\u5361\u7ed3\u675f",xid:"game_end"},NewFlower:{name:"\u65b0\u82b1\u6735",xid:"new_flower"},EnterGame:{name:"\u8fdb\u5165\u6e38\u620f",xid:"enter_game"}},this.isFromMp=t,this.gamekey=e}return t.prototype.load=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return r.GlobalDefines.CHANNEL==i.WXSDK_TYPE.HORTOR_V2?[3,2]:[4,o.Utils.loadConfig("adid/"+this.gamekey+(this.isFromMp?"_mp":""))];case 1:(t=e.sent())&&(this.AdInfo=t.json.AdInfo,this.BannerInfo=t.json.BannerInfo,this.XAdInfo=t.json.XAdInfo),e.label=2;case 2:return[2]}})})},t.prototype.GetAdName=function(t){for(var e in this.AdInfo){var n=this.AdInfo[e];if(t==t)return n.name}return"\u672a\u77e5AD"},t.prototype.GetPuzzleBannerId=function(){var t=[];return t.push(this.BannerInfo.Normal.bid),t},t.prototype.GetXName=function(t){for(var e in this.XAdInfo){var n=this.XAdInfo[e];if(t==t)return n.name}return"\u672a\u77e5X"},t}();n.default=a,cc._RF.pop()},{"../../common/PlatformMiniGame":"PlatformMiniGame","../../common/consts/GlobalDefines":"GlobalDefines","../../utils/Utils":"Utils"}],AlphaForever:[function(t,e,n){"use strict";cc._RF.push(e,"65599QzxsdC0qrchu/pP5yF","AlphaForever");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.duration=1,e}var n;return i(e,t),n=e,e.show=function(t,e){void 0===e&&(e=60),this.remove(t),t.addComponent(n).init(e)},e.remove=function(t){t.removeComponent(n)},e.tryReplay=function(t){var e=t.getComponent(n);return!!e&&(e.play(),!0)},e.prototype.init=function(t){this.maxOpacity=t},e.prototype.start=function(){this.play()},e.prototype.play=function(){this.node.color=cc.color(255,255,255),this.alphaBackup=this.node.opacity;var t=cc.repeatForever(cc.sequence(cc.fadeTo(this.duration,this.maxOpacity),cc.fadeTo(this.duration,10)));this.node.runAction(t)},e.prototype.onDisable=function(){this.node.stopAllActions(),this.node.opacity=this.alphaBackup},r([s(cc.Float)],e.prototype,"duration",void 0),n=r([c],e)}(cc.Component);n.default=l,cc._RF.pop()},{}],AniUtil:[function(t,e,n){"use strict";cc._RF.push(e,"3140ek0KUNJe7KPavjWEh3j","AniUtil"),Object.defineProperty(n,"__esModule",{value:!0}),n.AniUtil=void 0;var o=t("./Utils"),i=t("../game/GameUtils"),r=t("../game/common/UIManager"),a=t("../common/effect/SpriteToHome"),c=function(){function t(){}return t.JumpTo2=function(t,e,n,a,c,s,l){void 0===n&&(n=300),void 0===a&&(a=1),void 0===c&&(c=1),void 0===s&&(s=!1);var u=t.convertToWorldSpaceAR(cc.v2(0,0)),p=cc.v2(u.x,e.y),h=new cc.Node("skin_x");h.position=p,r.ui.addEffectAR(h);var f=new cc.Node("skin_y");f.position=cc.v2(0,u.y-e.y),f.parent=h;var d=cc.instantiate(t);d.active=!0,d.scale=a,d.position=cc.v2(0,0),d.parent=f;var g=3,m=function(){--g<=0&&(l&&l(),s&&i.GameUtils.addEffBoom(e),o.Utils.removeNode(h))},y=h.x+(e.x-p.x),v=f.y<0?n:f.y+n;cc.tween(h).to(.5,{x:y}).call(function(){m()}).start(),cc.tween(f).to(.25,{y:v},{easing:cc.easing.sineOut}).to(.25,{y:0},{easing:cc.easing.sineIn}).call(function(){m()}).start(),cc.tween(d).to(.5,{scale:c}).call(function(){m()}).start()},t.JumpTo=function(t,e,n,o,i){void 0===n&&(n=1),void 0===i&&(i=!1);var a=t.convertToWorldSpaceAR(cc.v2(0,0)),c=cc.v2(a.x,e.y),s=cc.instantiate(t);s.position=cc.v2(0,a.y-e.y),s.scale=n;var l=new cc.Node("skin");l.addChild(s),l.position=c,r.ui.addEffectAR(l);var u=2,p=function(){--u<=0&&(o&&o(),l.removeFromParent())},h=l.x+(e.x-c.x),f=s.y<0?300:s.y+300;cc.tween(l).to(.6,{x:h}).call(function(){p()}).start(),i?cc.tween(s).to(.3,{y:f},{easing:cc.easing.sineOut}).to(.3,{y:-50,scale:1},{easing:cc.easing.sineIn}).to(.2,{y:10,scale:1},{easing:cc.easing.sineOut}).to(.15,{y:0,scale:1},{easing:cc.easing.sineOut}).call(function(){p()}).start():cc.tween(s).to(.3,{y:f},{easing:cc.easing.sineOut}).to(.3,{y:0,scale:1},{easing:cc.easing.sineIn}).call(function(){p()}).start()},t.createEffectSpriteHome=function(t,e,n,i,r,c){void 0===r&&(r=5),void 0===c&&(c=1);for(var s=r,l=t.convertToWorldSpaceAR(cc.v2(0,0)),u=e.convertToWorldSpaceAR(new cc.Vec2(0,0)),p=0;p<s;p++){var h=o.Utils.randomInt(0,300);setTimeout(function(){var t=o.Utils.randomInt(0,n.length),e=n[t];a.default.create(e,cc.v2(l.x,l.y),u,!1,i,c)},h)}},t.aniWillShow=function(t){t.opacity=0,t.scale=.7},t.aniShow=function(t,e){t.stopAllActions(),cc.tween(t).to(.3,{opacity:255,scale:1},{easing:cc.easing.sineOut}).call(function(){e&&e()}).start()},t.aniHide=function(t,e){t.stopAllActions(),cc.tween(t).to(.3,{opacity:0,scale:.7},{easing:cc.easing.sineOut}).call(function(){e&&e()}).start()},t.aniShaking=function(t){t.stopAllActions(),t.angle=0,cc.tween(t).repeatForever(cc.tween(t).to(.1,{angle:-8},{easing:cc.easing.sineOut}).to(.1,{angle:5},{easing:cc.easing.sineOut}).to(.1,{angle:-3},{easing:cc.easing.sineOut}).to(.1,{angle:1.5},{easing:cc.easing.sineOut}).to(.1,{angle:0},{easing:cc.easing.sineOut}).delay(.5)).start()},t.aniHeart=function(t,e,n){void 0===e&&(e=.2),t.stopAllActions(),t.angle=0,cc.tween(t).repeatForever(cc.tween(t).to(n?e:e/2,{scale:1.2},{easing:cc.easing.sineOut}).to(e,{scale:1},{easing:cc.easing.sineOut}).delay(n?0:.5)).start()},t.aniHeartHappy=function(t){t.stopAllActions();var e=t.y,n=t.y+30;cc.tween(t).repeatForever(cc.tween(t).to(.1,{scaleX:1.1,scaleY:.8},{easing:cc.easing.sineOut}).to(.1,{scaleX:1,scaleY:1,y:n},{easing:cc.easing.sineOut}).to(.1,{scaleX:1,scaleY:1,y:e},{easing:cc.easing.sineIn}).to(.1,{scaleX:1.1,scaleY:.8},{easing:cc.easing.sineOut}).to(.1,{scaleX:1,scaleY:1},{easing:cc.easing.sineIn}).delay(.2)).start()},t.aniDou=function(t,e){cc.tween(t).to(.1,{scaleY:1.4,scaleX:.7},{easing:cc.easing.sineOut}).to(.05,{scaleY:.9,scaleX:1.1},{easing:cc.easing.sineOut}).to(.08,{scaleY:1.1,scaleX:.9},{easing:cc.easing.sineOut}).to(.08,{scaleY:1,scaleX:1},{easing:cc.easing.sineOut}).call(function(){e&&e()}).start()},t.aniShakeHead=function(t,e){cc.tween(t).to(.05,{x:-6},{easing:cc.easing.sineOut}).to(.08,{x:6},{easing:cc.easing.sineOut}).to(.07,{x:-5},{easing:cc.easing.sineOut}).to(.06,{x:4},{easing:cc.easing.sineOut}).to(.05,{x:-3},{easing:cc.easing.sineOut}).to(.04,{x:2},{easing:cc.easing.sineOut}).to(.03,{x:-1},{easing:cc.easing.sineOut}).to(.02,{x:0},{easing:cc.easing.sineOut}).call(function(){e&&e()}).start()},t}();n.AniUtil=c,cc._RF.pop()},{"../common/effect/SpriteToHome":"SpriteToHome","../game/GameUtils":"GameUtils","../game/common/UIManager":"UIManager","./Utils":"Utils"}],AudioManager:[function(t,e,n){"use strict";cc._RF.push(e,"daff8hOnVFJ+7Dk1BjXyeZn","AudioManager"),Object.defineProperty(n,"__esModule",{value:!0}),n.sd=void 0;var o=t("./PlatformManager"),i=t("../utils/logger"),r=function(){function t(){this.soundLib={},this.bgmVolume=null,this.sfxVolume=null,this.bgmAudioID=null,this.curBGMUrl=null,this._bgmEnabled=!0,this._sfxEnabled=!0}return Object.defineProperty(t.prototype,"sfxEnabled",{get:function(){return this._sfxEnabled},set:function(t){this._sfxEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bgmEnabled",{get:function(){return this._bgmEnabled},set:function(t){this._bgmEnabled=t},enumerable:!1,configurable:!0}),t.prototype.init=function(){cc.log("audio init"),this.curBGMUrl=null,this.bgmVolume=.8,this.sfxVolume=1,this.bgmAudioID=-1,this._bgmEnabled=!0,this._sfxEnabled=!0;var t=o.pm.Get("bgmVolume");t&&(this.bgmVolume=parseFloat(t));var e=o.pm.Get("sfxVolume");e&&(this.sfxVolume=parseFloat(e));var n=o.pm.Get("bgmEnabled");n&&"false"==n&&(this._bgmEnabled=!1);var i=o.pm.Get("sfxEnabled");i&&"false"==i&&(this._sfxEnabled=!1)},t.prototype.playBGM=function(t,e){this.curBGMUrl&&this.curBGMUrl==t&&this.bgmAudioID&&!e||(this.curBGMUrl=t,this._bgmEnabled&&(this.stopBGM(),cc.resources.load(t,function(e,n){this.curBGMUrl==t?(cc.audioEngine.stopAll(),this.bgmAudioID=cc.audioEngine.play(n,!0,this.bgmVolume)):console.log("\u64ad\u653e\u80cc\u666f\u97f3\u4e50\u5931\u8d25:",e)}.bind(this))))},t.prototype.stopBGM=function(){this.bgmAudioID>=0&&(cc.audioEngine.stop(this.bgmAudioID),this.bgmAudioID=null)},t.prototype.preloadAudioClip=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return this._sfxEnabled?(cc.resources.preload("sounds/"+t,cc.AudioClip),[2]):[2]})})},t.prototype.playSFX=function(t,e,n,o,r,a){var c=this;if(void 0===e&&(e=this.sfxVolume),void 0===n&&(n=".mp3"),void 0===o&&(o=!1),void 0===r&&(r=!1),this._sfxEnabled)if(this.soundLib[""+t])cc.audioEngine.play(this.soundLib[""+t],o,e),a&&a();else if(r){if(!t.startsWith("https://"))return void(a&&a());cc.assetManager.loadRemote(t,{ext:n},function(t,n){t?i.Logger.debug(t):cc.audioEngine.play(n,o,e),a&&a()})}else cc.resources.load(t,function(n,r){n?i.Logger.debug(n):(cc.audioEngine.play(r,o,e),c.soundLib[""+t]=r),a&&a()});else a&&a()},t.prototype.stopSFX=function(t){i.Logger.debug("audioId",t),null!=t&&cc.audioEngine.stop(t)},t.prototype.getSFXEnabled=function(){return this.sfxEnabled},t.prototype.setSFXEnabled=function(t){this.sfxEnabled!=t&&(o.pm.Set("sfxEnabled",String(t)),this.sfxEnabled=t)},t.prototype.getBGMEnabled=function(){return this.bgmEnabled},t.prototype.setBGMEnabled=function(t){this.bgmEnabled!=t&&(o.pm.Set("bgmEnabled",String(t)),this.bgmEnabled=t,1==this.bgmEnabled&&null!=this.curBGMUrl?this.playBGM(this.curBGMUrl,!0):this.stopBGM())},t.prototype.pauseBGM=function(){this.bgmAudioID>=0&&cc.audioEngine.pause(this.bgmAudioID)},t.prototype.resumeBGM=function(){this.bgmAudioID>=0&&cc.audioEngine.resume(this.bgmAudioID)},t.prototype.uncache=function(t){var e=cc.url.raw(t);cc.audioEngine.uncache(e),this.soundLib[""+t]=void 0},t.prototype.uncacheAll=function(){cc.audioEngine.uncacheAll(),this.soundLib={}},t.prototype.pauseAll=function(){i.Logger.debug("Pause All Sound"),cc.audioEngine.pauseAll()},t.prototype.resumeAll=function(){i.Logger.debug("Resum All Sound"),cc.audioEngine.resumeAll()},t.prototype.stopAll=function(){cc.audioEngine.stopAll()},t.prototype.clean=function(){this.stopAll(),this.uncacheAll(),this.curBGMUrl=null,this.bgmAudioID=-1},t.Instance=new t,t}();n.default=r,n.sd=r.Instance,cc._RF.pop()},{"../utils/logger":"logger","./PlatformManager":"PlatformManager"}],AwardPanel:[function(t,e,n){"use strict";cc._RF.push(e,"1da50jlcfhIKYK6f3IMmWPR","AwardPanel");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./TablePanel"),c=t("../../GameUtils"),s=t("../../common/UIManager"),l=t("../../../utils/Utils"),u=t("../../../utils/logger"),p=t("../../../utils/AniUtil"),h=t("../../../common/PlatformManager"),f=t("../../../common/GlobalEvents"),d=t("../../../common/G"),g=t("../../../common/DataManager"),m=cc._decorator,y=m.ccclass,v=m.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gp_content=null,e.blackBg=null,e.downAward=null,e.upAward=null,e.flyAward=null,e}var n;return i(e,t),n=e,e.show=function(){return __awaiter(this,void 0,void 0,function(){var t,e,o;return __generator(this,function(i){switch(i.label){case 0:return-1==(t=g.dm.player.getWillUnlockKey()).x||-1==t.y?(u.Logger.error("no flower unlock"),[2]):[4,l.Utils.loadPefab(this.prefab_name)];case 1:return(e=i.sent())?(c.GameUtils.playSFX("\u83b7\u5f97\u65b0\u82b1"),(o=cc.instantiate(e)).getComponent(n).init(t.x,t.y),c.GameUtils.popMessageBox(o),[2]):(u.Logger.error("load award_panel  fail"),[2])}})})},e.prototype.onLoad=function(){p.AniUtil.aniShow(this.gp_content),c.GameUtils.ShowX(g.dm.adids.XAdInfo.NewFlower.xid)},e.prototype.init=function(t,e){var n=this;p.AniUtil.aniWillShow(this.gp_content);var o="images/flower/big/"+(t+1)+"_"+(e+1);l.Utils.updateNodeSpriteFrame(o,this.downAward),l.Utils.updateNodeSpriteFrame(o,this.upAward),l.Utils.updateNodeSpriteFrame(o,this.flyAward),this.seriesIndex=t,this.flowIndex=e,this.flyAward.active=!1,setTimeout(function(){n.flyAward.active=!0},300)},e.prototype.onEnable=function(){d.GlobalEvent.on(f.EventAwardPos.NAME,this.moveAward,this)},e.prototype.onDisable=function(){d.GlobalEvent.off(f.EventAwardPos.NAME,this.moveAward,this)},e.prototype.moveAward=function(t){var e=t.awardPos,n=this.flyAward.parent.convertToNodeSpaceAR(e),o=this.flyAward.parent.convertToWorldSpaceAR(n);this.flyAward.active=!1,p.AniUtil.JumpTo2(this.flyAward,o,200,1,.4,!1,function(){d.GlobalEvent.dispatchEvent(new f.EventAwardJumpEnd)}),this.close()},e.prototype.onCloseClicked=function(){c.GameUtils.playSoundBtnClicked(),this.close()},e.prototype.onConfrimClicked=function(){var t=this;c.GameUtils.playSoundBtnClicked(),s.ui.showLoading(),h.pm.loadAndShowVideoAd(function(e){1==e?(s.ui.hideLoading(),t.gp_content.active=!1,t.blackBg.active=!1,a.default.show(t.seriesIndex,t.flowIndex,!1)):(u.Logger.error("video player error, new flower"),s.ui.hideLoading())},g.dm.adids.AdInfo.Flower.adid)},e.prototype.close=function(){this.node.removeFromParent(),this.node.destroy()},e.prefab_name="prefab/game/panel/award_panel",r([v(cc.Node)],e.prototype,"gp_content",void 0),r([v(cc.Node)],e.prototype,"blackBg",void 0),r([v(cc.Node)],e.prototype,"downAward",void 0),r([v(cc.Node)],e.prototype,"upAward",void 0),r([v(cc.Node)],e.prototype,"flyAward",void 0),n=r([y],e)}(cc.Component);n.default=_,cc._RF.pop()},{"../../../common/DataManager":"DataManager","../../../common/G":"G","../../../common/GlobalEvents":"GlobalEvents","../../../common/PlatformManager":"PlatformManager","../../../utils/AniUtil":"AniUtil","../../../utils/Utils":"Utils","../../../utils/logger":"logger","../../GameUtils":"GameUtils","../../common/UIManager":"UIManager","./TablePanel":"TablePanel"}],BasePanel:[function(t,e,n){"use strict";cc._RF.push(e,"0549a9TrmRD2J5xdVVlhWWj","BasePanel");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./GlobalEvents"),c=t("./G"),s=t("./consts/GlobalDefines"),l=t("../utils/Utils"),u=t("../game/GameUtils"),p=cc._decorator,h=p.ccclass,f=p.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btn_back=null,e}return i(e,t),e.prototype.onLoad=function(){c.GlobalEvent.dispatchEvent(new a.EventOnPanelPop),this.btn_back&&(this.btn_back.scale=0)},e.prototype.start=function(){this.initBackBtn()},e.prototype.initBackBtn=function(){if(this.btn_back){var t=s.GlobalDefines.MenuButtonLogic.top,e=s.GlobalDefines.MenuButtonLogic.height;this.btn_back.y=s.GlobalDefines.ScreenHeight/2-t-e/2,this.btn_back.x=-330,cc.tween(this.btn_back).to(.3,{scale:1},{easing:cc.easing.backOut}).start()}},e.prototype.onDisable=function(){c.GlobalEvent.dispatchEvent(new a.EventOnPanelClosed)},e.prototype.close=function(){l.Utils.removeNode(this.node)},e.prototype.onBtnBackClicked=function(){l.Utils.btnLock()||(u.GameUtils.playSoundBtnClicked(),this.close())},r([f(cc.Node)],e.prototype,"btn_back",void 0),r([h],e)}(cc.Component);n.default=d,cc._RF.pop()},{"../game/GameUtils":"GameUtils","../utils/Utils":"Utils","./G":"G","./GlobalEvents":"GlobalEvents","./consts/GlobalDefines":"GlobalDefines"}],BattleCompBase:[function(t,e,n){"use strict";cc._RF.push(e,"d54feU/PgRPqpttz8Om/B64","BattleCompBase");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./BattleEvents"),c=t("../GameUtils"),s=t("../../common/GlobalEvents"),l=t("../../common/G"),u=cc._decorator,p=u.ccclass,h=(u.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onEnable=function(){l.GlobalEvent.on(a.EventOnBattleStart.NAME,this.onEventOnBattleStart,this),l.GlobalEvent.on(s.EventOnPanelPop.NAME,this.onEventOnPanelPop,this),l.GlobalEvent.on(s.EventOnPanelClosed.NAME,this.onEventOnPanelClosed,this),l.GlobalEvent.on(a.EventOnShowResult.NAME,this.onEventOnShowResult,this)},e.prototype.onDisable=function(){l.GlobalEvent.off(a.EventOnBattleStart.NAME,this.onEventOnBattleStart,this),l.GlobalEvent.off(s.EventOnPanelPop.NAME,this.onEventOnPanelPop,this),l.GlobalEvent.off(s.EventOnPanelClosed.NAME,this.onEventOnPanelClosed,this),l.GlobalEvent.off(a.EventOnShowResult.NAME,this.onEventOnShowResult,this)},e.prototype.onEventOnShowResult=function(){},e.prototype.onEventOnBattleStart=function(t){this.levelData=t.levelData,this.isReset=t.isReset,this.refreshView()},e.prototype.refreshView=function(){},e.prototype.onEventOnPanelPop=function(){cc.tween(this.node).to(.3,{opacity:0},{easing:cc.easing.sineIn}).start()},e.prototype.onEventOnPanelClosed=function(){c.GameUtils.popLayer.childrenCount>0||cc.tween(this.node).to(.3,{opacity:255},{easing:cc.easing.sineOut}).start()},r([p],e)}(cc.Component));n.default=h,cc._RF.pop()},{"../../common/G":"G","../../common/GlobalEvents":"GlobalEvents","../GameUtils":"GameUtils","./BattleEvents":"BattleEvents"}],BattleConfig:[function(t,e,n){"use strict";var o;cc._RF.push(e,"440d5eRuJ1GPo+DCx0btzgO","BattleConfig"),Object.defineProperty(n,"__esModule",{value:!0}),n.BattleConfig=n.TopresSubType=n.StyleItemType=n.GoldRewardType=void 0,function(t){t[t.Bottle=0]="Bottle",t[t.Item1=1]="Item1",t[t.Item2=2]="Item2",t[t.Coin=3]="Coin"}(o=n.GoldRewardType||(n.GoldRewardType={})),function(t){t[t.Bg=0]="Bg",t[t.Block=1]="Block",t[t.Cup=2]="Cup"}(n.StyleItemType||(n.StyleItemType={})),function(t){t[t.Coin=0]="Coin",t[t.Energy=1]="Energy",t[t.Score=2]="Score"}(n.TopresSubType||(n.TopresSubType={}));var i=function(){function t(){}return Object.defineProperty(t,"Duration_Reset",{get:function(){return t.Angle_Speed_Reset+t.Duration_Zoom_Reset+t.Duration_Goback_Reset},enumerable:!1,configurable:!0}),t.First_Year=2022,t.First_Month=1,t.Max_Num_Stage=1e3,t.Max_Num_Challenge=1e3,t.Energy_Num_Full=5,t.Energy_Grow_Cycle=600,t.Tile_Size=cc.size(190,110),t.Stack_Len=7,t.Map_Size_Standard=cc.size(4,6),t.X_Stage=10,t.X_Cyc=2,t.X_Cyc_Mod=0,t.Banner_Top=-1,t.Stage_Pre_Result=5,t.Duration_Tile_Move=.4,t.Duration_Tile_Clear=.2,t.Case_Clear_Moveto=!0,t.Num_GoldStatus_Max=3,t.Tool_Price={Random:60,Tip:100,Reset:50},t.Coin_From_Ad=30,t.Heart_From_Ad=1,t.Num_Tiles_Random=3,t.Angle_Speed_Reset=600,t.Duration_Zoom_Reset=500,t.Duration_Goback_Reset=200,t.Coin_Bottle_Full=25,t.Coin_Result=50,t.Coin_Free_Base=40,t.Tile_Color_Challenge=cc.color(40,132,226),t.Tile_Color_Stage=cc.color(149,58,18),t.Tile_Color_Selected=cc.color(194,96,16),t.YDBannerReward={1:{id:1,title:"\u89c2\u770b\u89c6\u9891\u83b7\u5f97\u5956\u52b1",reward:[{type:o.Coin,count:t.Coin_Free_Base}],adkey:"YDBanner"},2:{id:2,title:"\u89c2\u770b\u89c6\u9891\u83b7\u5f97\u5956\u52b1",reward:[{type:o.Item1,count:2},{type:o.Item2,count:2}],adkey:"YDBanner"}},t}();n.BattleConfig=i,cc._RF.pop()},{}],BattleEvents:[function(t,e,n){"use strict";cc._RF.push(e,"3e102wJF/JNUa+aZMUDj/lc","BattleEvents");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.EventOnBattleContinue=n.EventOnShowResult=n.EventOnBattleOut=n.EventOnBattleEnter=n.EventOnNextPart=n.EventOnNextStage=n.EventOnBattleRestart=n.EventOnBattleStart=void 0;var r=function(t){function e(n,o){var i=t.call(this,e.NAME,!0)||this;return i.levelData=n,i.isReset=o,i}return i(e,t),e.NAME="EventOnBattleStart",e}(cc.Event.EventCustom);n.EventOnBattleStart=r;var a=function(t){function e(){return t.call(this,e.NAME,!0)||this}return i(e,t),e.NAME="EventOnBattleRestart",e}(cc.Event.EventCustom);n.EventOnBattleRestart=a;var c=function(t){function e(){return t.call(this,e.NAME,!0)||this}return i(e,t),e.NAME="EventOnNextStage",e}(cc.Event.EventCustom);n.EventOnNextStage=c;var s=function(t){function e(){return t.call(this,e.NAME,!0)||this}return i(e,t),e.NAME="EventOnNextPart",e}(cc.Event.EventCustom);n.EventOnNextPart=s;var l=function(t){function e(){return t.call(this,e.NAME,!0)||this}return i(e,t),e.NAME="EventOnBattleEnter",e}(cc.Event.EventCustom);n.EventOnBattleEnter=l;var u=function(t){function e(){return t.call(this,e.NAME,!0)||this}return i(e,t),e.NAME="EventOnBattleOut",e}(cc.Event.EventCustom);n.EventOnBattleOut=u;var p=function(t){function e(n,o){var i=t.call(this,e.NAME,!0)||this;return i.isWin=n,i.isNoTime=o,i}return i(e,t),e.NAME="EventOnShowResult",e}(cc.Event.EventCustom);n.EventOnShowResult=p;var h=function(t){function e(){return t.call(this,e.NAME,!0)||this}return i(e,t),e.NAME="EventOnBattleContinue",e}(cc.Event.EventCustom);n.EventOnBattleContinue=h,cc._RF.pop()},{}],BattleLogic:[function(t,e,n){"use strict";cc._RF.push(e,"2ae1f18YgtMfZTUT2VpLA3g","BattleLogic");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./data/LevelData"),c=t("./BattleEvents"),s=t("../../common/G"),l=t("../../common/DataManager"),u=cc._decorator,p=u.ccclass,h=(u.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){},e.prototype.onEnable=function(){s.GlobalEvent.on(c.EventOnShowResult.NAME,this.onEventOnShowResult,this),s.GlobalEvent.on(c.EventOnNextPart.NAME,this.onEventOnNextPart,this),s.GlobalEvent.on(c.EventOnNextStage.NAME,this.onEventOnNextStage,this),s.GlobalEvent.on(c.EventOnBattleRestart.NAME,this.onEventOnBattleRestart,this)},e.prototype.onDisable=function(){s.GlobalEvent.off(c.EventOnShowResult.NAME,this.onEventOnShowResult,this),s.GlobalEvent.off(c.EventOnNextPart.NAME,this.onEventOnNextPart,this),s.GlobalEvent.off(c.EventOnNextStage.NAME,this.onEventOnNextStage,this),s.GlobalEvent.off(c.EventOnBattleRestart.NAME,this.onEventOnBattleRestart,this)},e.prototype.start=function(){},e.prototype.refreshLevel=function(t){return void 0===t&&(t=-1),__awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return l.dm.player.level=(t>=0?t:l.dm.player.level)+1,this.levelData=new a.default(l.dm.player.level),[4,this.levelData.load()];case 1:return e.sent(),s.GlobalEvent.dispatchEvent(new c.EventOnBattleStart(this.levelData)),[2]}})})},e.prototype.onEventOnBattleRestart=function(){this.refreshLevel(l.dm.player.level)},e.prototype.onEventOnNextPart=function(){this.levelData.initNextPart(),s.GlobalEvent.dispatchEvent(new c.EventOnBattleStart(this.levelData))},e.prototype.onEventOnShowResult=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return[2]})})},e.prototype.onEventOnNextStage=function(){this.refreshLevel()},r([p],e)}(cc.Component));n.default=h,cc._RF.pop()},{"../../common/DataManager":"DataManager","../../common/G":"G","./BattleEvents":"BattleEvents","./data/LevelData":"LevelData"}],Bottle:[function(t,e,n){"use strict";cc._RF.push(e,"ce9df6fgVxIuLrxjtMhP9IQ","Bottle");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../common/consts/GlobalDefines"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.ani=null,e.downIndx=0,e.aniPre="\u704c\u8702\u871c_1_",e}return i(e,t),e.prototype.onLoad=function(){this.ani.play("empty")},e.prototype.start=function(){},e.prototype.honeyDown=function(t){var e=this;if(this.downIndx+=1,this.downIndx>a.GlobalDefines.HoneyDownMax)t(!0);else{var n=this.aniPre+this.downIndx;this.ani.once(cc.Animation.EventType.FINISHED,function(){e.downIndx>=a.GlobalDefines.HoneyDownMax?t&&t(!0):t&&t(!1)}),this.ani.play(n)}},e.prototype.reset=function(){this.downIndx=0,this.ani.play("empty")},r([l(cc.Label)],e.prototype,"label",void 0),r([l(cc.Animation)],e.prototype,"ani",void 0),r([s],e)}(cc.Component);n.default=u,cc._RF.pop()},{"../../common/consts/GlobalDefines":"GlobalDefines"}],BundleLocalResList:[function(t,e,n){"use strict";cc._RF.push(e,"dc016w+oRZBHJAxeI9jJZWC","BundleLocalResList");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.prefabs=[],e.atlases=[],e.frames=[],e.json=[],e.sounds=[],e}return i(e,t),r([s([cc.Prefab])],e.prototype,"prefabs",void 0),r([s([cc.SpriteAtlas])],e.prototype,"atlases",void 0),r([s([cc.SpriteFrame])],e.prototype,"frames",void 0),r([s([cc.JsonAsset])],e.prototype,"json",void 0),r([s([cc.AudioClip])],e.prototype,"sounds",void 0),r([c],e)}(cc.Component);n.default=l,cc._RF.pop()},{}],BundleResourceList:[function(t,e,n){"use strict";cc._RF.push(e,"e9fc15/L4dPdbTJhF3rGOyE","BundleResourceList");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../utils/logger"),c=t("../../common/DataManager"),s=t("../../common/consts/GlobalDefines"),l=cc._decorator,u=l.ccclass,p=l.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.prefab_eff_boom=null,e.prefab_eff_boom1=null,e.json_drop=null,e.json_award=null,e.honeyScore=[200,400,600,800],e}return i(e,t),e.prototype.getPrefabBoom=function(t){return 1==t?this.prefab_eff_boom1:this.prefab_eff_boom},e.prototype.getNewItemType=function(t,e){var n=this.getDropKey(t,e),o=this.json_drop.json[n+""],i=Math.random();return i<=o.honey?s.ItemType.Honey:i<o.lv_1?s.ItemType.One:(i-=o.lv_1)<o.lv_2?s.ItemType.Two:(i-=o.lv_2)<o.lv_3?s.ItemType.Three:(i-=o.lv_3)<o.lv_4?s.ItemType.Four:s.ItemType.Five},e.prototype.getDropKey=function(t,e){var n=t;if(1!=c.dm.player.bottle){if(c.dm.player.bottle>this.honeyScore.length)return a.Logger.error("error bottle or"),1;var o=e*this.honeyScore[0];n-=e*this.honeyScore[c.dm.player.bottle-1],n+=o}var i=1;for(var r in this.json_drop.json){var s=this.json_drop.json[r];n>=s.score&&s.id>i&&(i=s.id)}return i},e.prototype.getNextLimit=function(t){var e=s.GlobalDefines.BigNumber,n=0;for(var o in this.json_award.json){var i=this.json_award.json[o];i.count>t&&(i.count>n&&(n=i.count),i.count<e&&(e=i.count))}if(e==s.GlobalDefines.BigNumber)for(var r=0;r<1e3;r++)if(t>=(n+=200)){e=n;break}return e},r([p(cc.Prefab)],e.prototype,"prefab_eff_boom",void 0),r([p(cc.Prefab)],e.prototype,"prefab_eff_boom1",void 0),r([p(cc.JsonAsset)],e.prototype,"json_drop",void 0),r([p(cc.JsonAsset)],e.prototype,"json_award",void 0),r([u],e)}(cc.Component);n.default=h,cc._RF.pop()},{"../../common/DataManager":"DataManager","../../common/consts/GlobalDefines":"GlobalDefines","../../utils/logger":"logger"}],BundleResource:[function(t,e,n){"use strict";cc._RF.push(e,"bbdf8xetbNJ4ZXD/odW4nuV","BundleResource");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sceneAsset=null,e}return i(e,t),r([s(cc.SceneAsset)],e.prototype,"sceneAsset",void 0),r([c],e)}(cc.Component);n.default=l,cc._RF.pop()},{}],CellFactory:[function(t,e,n){"use strict";cc._RF.push(e,"c3806n0gu5FAK7t695y5xpi","CellFactory");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../utils/Utils"),c=cc._decorator,s=c.ccclass,l=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.offset=0,e.creating=!1,e}var n;return i(e,t),n=e,e.createVCell=function(t,e,n,o,i){return this._createCell(!0,t,e,n,o,i)},e.createHCell=function(t,e,n,o,i){return this._createCell(!1,t,e,n,o,i)},e._createCell=function(t,e,o,i,r,a){var c=new cc.Node("fct"+(e.id||""));return c.width=i,c.height=r,t?(c.x=0,c.y=-(o+.5)*r):(c.x=(o+.5)*i,c.y=0),c.addComponent(n).init(e,t,a),c},e.prototype.init=function(t,e,n){this.data=t,this.isV=e,this.cellT=n},e.prototype.start=function(){},e.prototype.lateUpdate=function(){this.refreshView()},e.prototype.refreshView=function(){var t=this;if(!this.creating)if(this.isV){var e=(c=this.node.parent).parent,n=c.y+this.node.y,o=n-this.node.height/2,i=n+this.node.height/2,r=e.height/2;this.node.childrenCount>0?(o>r||i<-r)&&cc.tween(this.node.children[this.node.childrenCount-1]).to(.4,{opacity:0},{easing:cc.easing.sineInOut}).call(function(){a.Utils.removeAllChildren(t.node)}).start():o<=r&&i>=-r&&(this.creating=!0,this.cellT.create(this.data).then(function(e){e.opacity=0,e.scale=.8,e.name=t.data.index+"",t.node.addChild(e),cc.tween(e).to(.3,{opacity:255,scale:1},{easing:cc.easing.sineOut}).start(),t.creating=!1}))}else{e=(c=this.node.parent).parent;var c,s=c.x+this.node.x,l=s-this.node.width/2,u=s+this.node.width/2;r=e.width/2,this.node.childrenCount>0?(l>r+this.offset||u<-r-this.offset)&&a.Utils.removeAllChildren(this.node):l<=r+this.offset&&u>=-r-this.offset&&(this.creating=!0,this.cellT.create(this.data).then(function(e){t.node.addChild(e),t.creating=!1}))}},n=r([s],e)}(cc.Component));n.default=l,cc._RF.pop()},{"../../utils/Utils":"Utils"}],CoinView:[function(t,e,n){"use strict";cc._RF.push(e,"6a090lw7uxNcJP7xsZ2c49w","CoinView");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./TopResSubViewBase"),c=t("../../../common/GlobalEvents"),s=t("../../../common/G"),l=cc._decorator,u=l.ccclass,p=l.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lb_coin=null,e}return i(e,t),e.prototype.onLoad=function(){},e.prototype.onEnable=function(){s.GlobalEvent.on(c.EventOnCoinChange.NAME,this.onEventOnCoinChange,this)},e.prototype.onDisable=function(){s.GlobalEvent.off(c.EventOnCoinChange.NAME,this.onEventOnCoinChange,this)},e.prototype.onEventOnCoinChange=function(){},r([p(cc.Label)],e.prototype,"lb_coin",void 0),r([u],e)}(a.default);n.default=h,cc._RF.pop()},{"../../../common/G":"G","../../../common/GlobalEvents":"GlobalEvents","./TopResSubViewBase":"TopResSubViewBase"}],ColorForever:[function(t,e,n){"use strict";cc._RF.push(e,"4c27f8ixTVKhqEqpMI4ivCd","ColorForever");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.duration=1,e}var n;return i(e,t),n=e,e.show=function(t,e){this.remove(t),t.addComponent(n).init(e)},e.remove=function(t){t.removeComponent(n)},e.tryReplay=function(t){var e=t.getComponent(n);return!!e&&(e.play(),!0)},e.prototype.init=function(t){this.toColor=t},e.prototype.start=function(){this.play()},e.prototype.play=function(){this.node.color=cc.color(255,255,255),this.colorBackup=this.node.color;var t=cc.repeatForever(cc.sequence(cc.tintTo(this.duration,this.toColor.r,this.toColor.g,this.toColor.b),cc.tintTo(this.duration,255,255,255)));this.node.runAction(t)},e.prototype.onDisable=function(){this.node.stopAllActions(),this.node.color=this.colorBackup||cc.Color.WHITE},r([s(cc.Float)],e.prototype,"duration",void 0),n=r([c],e)}(cc.Component);n.default=l,cc._RF.pop()},{}],DataManager:[function(t,e,n){"use strict";cc._RF.push(e,"a8e18+a719NsZCimf+D/axB","DataManager"),Object.defineProperty(n,"__esModule",{value:!0}),n.dm=void 0;var o=t("./PlatformManager"),i=t("../utils/Utils"),r=t("../game/data/PlayerInfo"),a=t("../game/data/GameSetting"),c=t("../game/data/AdConfig"),s=t("../game/consts/GameConfig"),l=t("../game/consts/BattleConfig"),u=function(){function t(){this.openId=void 0,this.hortorId=void 0,this.channel=void 0,this.gamesetting=new a.GameSetting,this.adq="1",this.player=new r.default,this.loginForRank=!1}return Object.defineProperty(t,"ins",{get:function(){return this._ins||(this._ins=new t),this._ins},enumerable:!1,configurable:!0}),t.prototype.onInit=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return t=o.pm.getLaunchOptionsSync(),this.adq=i.Utils.getValue(t,"query.adq"),this.ad=i.Utils.getValue(t,"query.ad"),console.log("onInit end isFromMp ==",t,this.IsFromMp()),this.player.init(),this.adids=new c.default(this.IsFromMp(),s.GameConfig.GameKey),[4,this.adids.load()];case 1:return e.sent(),[2]}})})},t.prototype.onLogin=function(){},t.prototype.IsFromMp=function(){return"0"==this.adq},t.prototype.getTgaData=function(){return{}},t.prototype.isAdOnface=function(){return!1},t.prototype.isResultX=function(){return this.player.level<l.BattleConfig.X_Stage||n.dm.player.level%l.BattleConfig.X_Cyc==l.BattleConfig.X_Cyc_Mod},t.prototype.GetRank=function(t,e){void 0===e&&(e=6800);var n=(-1/(2*e)*t*t+t)/(-1/(2*e)*e*e+e)*100;return(n=Math.min(n,99.99)).toFixed(2)},t}();n.default=u,n.dm=u.ins,cc._RF.pop()},{"../game/consts/BattleConfig":"BattleConfig","../game/consts/GameConfig":"GameConfig","../game/data/AdConfig":"AdConfig","../game/data/GameSetting":"GameSetting","../game/data/PlayerInfo":"PlayerInfo","../utils/Utils":"Utils","./PlatformManager":"PlatformManager"}],EffectOnce:[function(t,e,n){"use strict";cc._RF.push(e,"ae02cERhEtF0oTvvbkejEA5","EffectOnce");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../utils/Utils"),c=cc._decorator,s=c.ccclass,l=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var n;return i(e,t),n=e,e.create=function(t,e,o){var i=(new cc.Node).addComponent(n);return i.init(t,e,o),i},e.createWithNode=function(t,e,o){var i=t.addComponent(n);return i.initWithNode(e,o),i},e.prototype.init=function(t,e,n){var o=this;this.cbOnLoaded=e,this.next=n;var i=t;a.Utils.loadSimpleBone("effect",t,function(e,n){var r=o.node.addComponent(dragonBones.ArmatureDisplay);r.dragonAsset=e,r.dragonAtlasAsset=n,r.armatureName=i,r.addEventListener(dragonBones.EventObject.COMPLETE,o.animationEventHandler,o),r.playAnimation(t,1),o.cbOnLoaded&&o.cbOnLoaded()})},e.prototype.initWithNode=function(t,e){this.next=e;var n=this.node.getComponent(dragonBones.ArmatureDisplay);n.armatureName=t,n.addEventListener(dragonBones.EventObject.COMPLETE,this.animationEventHandler,this),n.playAnimation(t,1)},e.prototype.animationEventHandler=function(t){t.type==dragonBones.EventObject.COMPLETE&&(this.next&&this.next(),a.Utils.removeNode(this.node))},e.prototype.onLoad=function(){},e.prototype.start=function(){},n=r([s],e)}(cc.Component));n.default=l,cc._RF.pop()},{"../../utils/Utils":"Utils"}],FBManager:[function(t,e,n){"use strict";cc._RF.push(e,"88803JK3YBAhooCh317iuhF","FBManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){this._initFinish=!1,this._initPromise=null}return Object.defineProperty(t,"Instance",{get:function(){return t._ins||(t._ins=new t),t._ins},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"InitPromise",{get:function(){return this._initPromise},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"InitFinish",{get:function(){return this._initFinish},enumerable:!1,configurable:!0}),t.prototype.showInterstitial=function(t){window.MiniGameAds&&(window.MiniGameAds.isInterstitialReady()?window.MiniGameAds.showInterstitial().then(function(){console.log("\u64ad\u653e\u63d2\u5c4f\u5e7f\u544a\u6210\u529f"),t&&t()}).catch(function(t){console.log("\u64ad\u653e\u63d2\u5c4f\u5e7f\u544a\u5931\u8d25",t.message)}):console.log("\u6682\u4e0d\u652f\u6301\u64ad\u653e\u63d2\u5c4f\u5e7f\u544a"))},t.prototype.showRewardedVideo=function(t,e){if(!window.MiniGameAds)return console.log("\u975eFB\u5e73\u53f0"),void(t&&t());window.MiniGameAds.isRewardvideoReady()?window.MiniGameAds.showRewardedVideo().then(function(){console.log("\u64ad\u653e\u6fc0\u52b1\u89c6\u9891\u6210\u529f"),t&&t()}).catch(function(t){console.log("\u64ad\u653e\u6fc0\u52b1\u89c6\u9891\u5931\u8d25\u6216\u53d6\u6d88\u64ad\u653e",t.message),e&&e()}):(console.log("\u6682\u4e0d\u652f\u6301\u64ad\u653e\u6fc0\u52b1\u89c6\u9891"),e&&e())},t.prototype.showBanner=function(){console.log("showbanner!!"),window.MiniGameAds&&(window.MiniGameAds.isBannerReady()?window.MiniGameAds.showBanner().then(function(){console.log("\u663e\u793abanner\u6210\u529f")}).catch(function(t){console.log("\u663e\u793abanner\u5931\u8d25",t.message)}):console.log("\u6682\u4e0d\u652f\u6301\u663e\u793abanner"))},t.prototype.hideBanner=function(){console.log("hidebanner!!"),window.MiniGameAds&&window.MiniGameAds.hideBanner().then(function(){}).catch(function(t){console.log("\u9690\u85cfbanner\u5931\u8d25",t.message)})},t._ins=null,t}();n.default=o,cc._RF.pop()},{}],GameConfig:[function(t,e,n){"use strict";var o;cc._RF.push(e,"89703Q8F7ZMSaJXQ5BOpDqC","GameConfig"),Object.defineProperty(n,"__esModule",{value:!0}),n.GameConfig=n.Game_Model=void 0,window.gcfg,function(t){t[t.DEVELOP=1]="DEVELOP",t[t.RELEASE=2]="RELEASE"}(o=n.Game_Model||(n.Game_Model={}));var i=function(){function t(){}return Object.defineProperty(t,"cfg",{get:function(){return this._cfg||(this._cfg=t.GameList[t.GameKey]),this._cfg},enumerable:!1,configurable:!0}),t.isDebug=function(){return this.DEBUG_URL_DEV||this.DEBUG_COIN||this.DEBUG_STAGE||this.DEBUG_AUTOKEY||this.DEBUG_ENERGY||this.DEBUG_GUIDE||this.GAME_MODEL!=o.RELEASE},t.Init=function(){},t.GAME_MODEL=o.RELEASE,t.OSS_URL_BASE="https://fkqst-res.hortorgames.com/hcfm/wx/",t.GameList={hcfm:{gameid:"yd_hcfm_mini",name:"\u5408\u6210\u8702\u871c",appid:"wx4772c2f0c1b33f9e",ver_res:"1.0.0",ver_release:"1.0.0",ydbanner:!1,channel:3,voice:!0}},t.GameKey="hcfm",t._cfg=void 0,t.VOICE_ENABLE=!0,t.DEBUG_URL_DEV=t.GAME_MODEL==o.DEVELOP&&!1,t.DEBUG_COIN=t.GAME_MODEL==o.DEVELOP&&!0,t.DEBUG_STAGE=t.GAME_MODEL==o.DEVELOP&&!0,t.DEBUG_AUTOKEY=t.GAME_MODEL==o.DEVELOP&&!1,t.DEBUG_ENERGY=t.GAME_MODEL==o.DEVELOP&&!1,t.DEBUG_ENTRY=t.GAME_MODEL==o.DEVELOP&&!1,t.DEBUG_GUIDE=t.GAME_MODEL==o.DEVELOP&&!1,t.DEBUG_LOG=t.GAME_MODEL==o.DEVELOP&&!1,t.Test_Token="10001",t.GameId=t.cfg.gameid,t.VER_RES=t.cfg.ver_res,t.VER_RELEASE=t.cfg.ver_release,t.IS_YDBANNER=t.cfg.ydbanner,t.APPID=t.cfg.appid,t}();n.GameConfig=i,cc._RF.pop()},{}],GameManager:[function(t,e,n){"use strict";cc._RF.push(e,"22694yO3XxOY6sPSQS+SV9A","GameManager");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./SceneManager"),c=t("./PlatformManager"),s=t("./NetworkManager"),l=t("./GlobalEvents"),u=t("./G"),p=t("./DataManager"),h=t("./consts/GlobalDefines"),f=t("./comp/yd_wall/YDWallManager"),d=t("./comp/SceneLoadingUI"),g=t("./AudioManager"),m=t("./ABTestManager"),y=t("../utils/Utils"),v=t("../utils/logger"),_=t("../game/GameUtils"),b=t("../game/consts/GameConfig"),w=t("../game/common/UIManager"),S=t("../game/common/ShareUtil"),E=t("../game/common/RedDotManager"),O=t("../game/common/GuideManager"),P=t("../game/common/BundleResourceList"),C=t("../comp/msgbox/MessageBox"),T=t("../comp/HurryLoading"),G=t("../hagoSdk/HagoSdk"),k=cc._decorator,I=k.ccclass,M=k.property,A=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.uiNode=null,e.hurryLoading=null,e.uiCamera=null,e.smNode=null,e.resList=null,e.timeOffset_sec=0,e.timeOffset_msec=0,e.timeout_crossday=void 0,e.isInited=!1,e.entryData=void 0,e}var n;return i(e,t),n=e,Object.defineProperty(e,"instance",{get:function(){return this._instance},enumerable:!1,configurable:!0}),e.prototype.onShow=function(t){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(){return this.entryData=t,g.sd.resumeAll(),this.isInited?((e=new l.EventOnShow).res=t,u.GlobalEvent.dispatchEvent(e),f.wall.loadTask(),_.GameUtils.ShowX(p.dm.adids.XAdInfo.EnterGame.xid),[2]):[2]})})},e.prototype.onHide=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(){return g.sd.pauseAll(),t=new l.EventOnHide,u.GlobalEvent.dispatchEvent(t),[2]})})},e.prototype.onLoad=function(){window.addEventListener("unhandledrejection",function(t){return t.preventDefault(),console.log("promise \u9519\u8bef reason:",t.reason),console.log("Promise \u5bf9\u8c61 promise:",t.promise),!0}),w.ui.onLoad(this.uiNode,this.hurryLoading),a.sm.onLoad(this.smNode)},e.prototype.start=function(){var t=this;G.default.instance.init(function(){t.gameStart()})},e.prototype.onShareMessageToFriend=function(){},e.prototype.gameStart=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(){return b.GameConfig.Init(),this.playtime=y.Utils.getCurTime(),n._instance=this,this.entryData=c.pm.getLaunchOptionsSync()||{},t=S.ShareUtil.getShareParamInAll(),c.pm.onLoad({onShow:this.onShow.bind(this),onHide:this.onHide.bind(this),onShareMessageToFriend:this.onShareMessageToFriend.bind(this),shareData:{title:t.title,query:"key=val",imageUrl:t.imgUrl}}),c.pm.initReport(),v.Logger.debug("[GameManager onLoad] entryData:",this.entryData),this.createUpdateManager(),c.pm.setKeepScreenOn(!0),setTimeout(function(){w.ui.checkNode(),a.sm.node.getComponentInChildren("LoadingScene").startLoading()},0),[2]})})},e.prototype.createUpdateManager=function(){console.log("[GameManager createUpdateManager]\u5c1d\u8bd5\u68c0\u67e5\u7248\u672c\u66f4\u65b0");var t=c.pm.getUpdateManager();t?(t.onUpdateReady(function(){c.pm.showModal("\u66f4\u65b0\u63d0\u793a","\u65b0\u7248\u672c\u5df2\u7ecf\u51c6\u5907\u597d\uff0c\u8bf7\u66f4\u65b0","\u66f4\u65b0",function(){t.applyUpdate()})}),t.onCheckForUpdate(function(t){console.log("[\u8bf7\u6c42\u5b8c\u65b0\u7248\u672c\u4fe1\u606f\u7684\u56de\u8c03]",t.hasUpdate)}),t.onUpdateFailed(function(){console.log("[\u65b0\u7248\u672c\u4e0b\u8f7d\u5931\u8d25]")})):console.log("[GameManager createUpdateManager]\u5fae\u4fe1\u7248\u672c\u6ca1\u6709\u5f3a\u66f4\u673a\u5236")},e.prototype.initGame=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return setTimeout(function(){c.pm.trackEventPost(c.TRACK_EVENT_NAME.GAME_INIT)},1e4),d.default.setProgress(0),[4,p.dm.onInit()];case 1:return t.sent(),d.default.setProgress(.6),E.red.onInit(),y.Utils.waiting(0),d.default.setProgress(.7),O.gm.onInit(),y.Utils.waiting(0),d.default.setProgress(.75),m.ab.onInit(),y.Utils.waiting(0),d.default.setProgress(.8),w.ui.onInit(),y.Utils.waiting(0),d.default.setProgress(.85),g.sd.init(),y.Utils.waiting(0),d.default.setProgress(.9),y.Utils.waiting(0),this.registerCrossEvent(),[2]}})})},e.prototype.GetScreenWHRate=function(){var t=cc.view.getFrameSize();return t.width/t.height},e.prototype.getServerTime=function(){return Math.floor((new Date).getTime()/1e3)+this.timeOffset_sec},e.prototype.getServerTimeMsec=function(){return(new Date).getTime()+this.timeOffset_msec},e.prototype.timeCheck=function(t){var e=(new Date).getTime();return this.timeOffset_sec=t-Math.floor(e/1e3),this.timeOffset_msec=1e3*t-e,Math.abs(this.timeOffset_sec)<h.GlobalDefines.Second_Day},e.prototype.registerCrossEvent=function(){var t=this,e=this.getServerTimeMsec(),n=y.Utils.getDayBeginTime(e)/1e3+h.GlobalDefines.Second_Day-e/1e3+y.Utils.randomInt(0,60);clearTimeout(this.timeout_crossday),this.timeout_crossday=setTimeout(function(){t.onCrossDay()},1e3*n)},e.prototype.HotLogin=function(t){return __awaiter(this,void 0,Promise,function(){var e=this;return __generator(this,function(){return[2,new Promise(function(n,o){return __awaiter(e,void 0,void 0,function(){var e;return __generator(this,function(i){switch(i.label){case 0:e=s.default.TIMES_RETRY,i.label=1;case 1:return e>0?[4,c.pm.HotLogin(t).then(function(t){t?(e=0,C.default.showRetryCancel({popLayer:_.GameUtils.popLayer,title:"\u7f51\u7edc\u5f02\u5e38",context:t,cb_ok:function(){o()},cb_cancel:function(){}})):(e=0,n())}).catch(function(){--e<=0&&o()})]:[3,3];case 2:return i.sent(),[3,1];case 3:return[2]}})})})]})})},e.prototype.onCrossDay=function(){a.sm.switchScene("LoadingScene")},e.prototype.gameLoadingErr=function(t){void 0===t&&(t=!0),C.default.showRetryCancel({popLayer:_.GameUtils.popLayer,title:"\u7f51\u7edc\u5f02\u5e38",context:"\u6e38\u620f\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25",cb_ok:function(){a.sm.switchScene("LoadingScene"),console.log("[GameManager gameLoadingErro] \u52a0\u8f7d\u5931\u8d25 \u91cd\u65b0\u767b\u5f55")},cb_cancel:function(){}})},e._instance=null,r([M(cc.Node)],e.prototype,"uiNode",void 0),r([M(T.default)],e.prototype,"hurryLoading",void 0),r([M(cc.Camera)],e.prototype,"uiCamera",void 0),r([M(cc.Node)],e.prototype,"smNode",void 0),r([M(P.default)],e.prototype,"resList",void 0),n=r([I],e)}(cc.Component);n.default=A,cc._RF.pop()},{"../comp/HurryLoading":"HurryLoading","../comp/msgbox/MessageBox":"MessageBox","../game/GameUtils":"GameUtils","../game/common/BundleResourceList":"BundleResourceList","../game/common/GuideManager":"GuideManager","../game/common/RedDotManager":"RedDotManager","../game/common/ShareUtil":"ShareUtil","../game/common/UIManager":"UIManager","../game/consts/GameConfig":"GameConfig","../hagoSdk/HagoSdk":"HagoSdk","../utils/Utils":"Utils","../utils/logger":"logger","./ABTestManager":"ABTestManager","./AudioManager":"AudioManager","./DataManager":"DataManager","./G":"G","./GlobalEvents":"GlobalEvents","./NetworkManager":"NetworkManager","./PlatformManager":"PlatformManager","./SceneManager":"SceneManager","./comp/SceneLoadingUI":"SceneLoadingUI","./comp/yd_wall/YDWallManager":"YDWallManager","./consts/GlobalDefines":"GlobalDefines"}],GameSetting:[function(t,e,n){"use strict";cc._RF.push(e,"6d580Cxa0RKX6ahEXB14SdF","GameSetting"),Object.defineProperty(n,"__esModule",{value:!0}),n.GameSetting=void 0;var o=t("../GameUtils"),i=t("../consts/GameConfig"),r=t("../../utils/logger"),a=t("../../common/consts/GlobalDefines"),c=function(){function t(){this.isLoading=!1}return t.prototype.loadGameSetting=function(){return __awaiter(this,void 0,void 0,function(){var t=this;return __generator(this,function(){return[2,new Promise(function(e){return __awaiter(t,void 0,void 0,function(){var t,n=this;return __generator(this,function(c){switch(c.label){case 0:return t="config/"+(i.GameConfig.GAME_MODEL==i.Game_Model.DEVELOP?"gamesetting_dev":"gamesetting"),[4,o.GameUtils.loadConfigFromAli(t).then(function(t){n.gameSetting=t,r.Logger.debug("[DataManager onInit] gamesetting\u52a0\u8f7d\u5b8c\u6bd5"),e(a.LoadStatus.Success)}).catch(function(){r.Logger.debug("[DataManager onInit] gamesetting\u521d\u59cb\u5316\u5931\u8d25"),setTimeout(function(){e(a.LoadStatus.Doing)},1e3)})];case 1:return c.sent(),[2]}})})})]})})},Object.defineProperty(t.prototype,"local",{get:function(){if(this.gameSetting)return this.gameSetting[i.GameConfig.GameKey]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isServerModelRelease",{get:function(){return!!this.gameSetting&&!!this.gameSetting.server_mode&&"release"==this.gameSetting.server_mode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"reviewing",{get:function(){return!!this.local&&!!this.local.reviewing&&this.local.reviewing_ver==i.GameConfig.VER_RES},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"banner",{get:function(){return this.local?this.local.banner:[{spine:1,reward:1},{spine:2,reward:2}]},enumerable:!1,configurable:!0}),t}();n.GameSetting=c,cc._RF.pop()},{"../../common/consts/GlobalDefines":"GlobalDefines","../../utils/logger":"logger","../GameUtils":"GameUtils","../consts/GameConfig":"GameConfig"}],GameUtils:[function(t,e,n){"use strict";cc._RF.push(e,"582c7rnO3tO5rlWRU/uX8FB","GameUtils"),Object.defineProperty(n,"__esModule",{value:!0}),n.GameUtils=void 0;var o=t("./consts/GameConfig"),i=t("./consts/BattleConfig"),r=t("./common/UIManager"),a=t("./common/topres/TopResView"),c=t("../utils/Utils"),s=t("../utils/logger"),l=t("../common/SceneManager"),u=t("../common/PlatformManager"),p=t("../common/NetworkManager"),h=t("../common/GameManager"),f=t("../common/DataManager"),d=t("../common/consts/GlobalDefines"),g=t("../common/comp/yd_x/YDXPanel"),m=t("../common/comp/yd_wall/YDWallPanel"),y=t("../common/comp/yd_wall/YDWallManager"),v=t("../common/comp/yd_wall/YDWallBanner"),_=t("../common/comp/rank/RankPanel"),b=t("../common/AudioManager"),w=function(){function t(){}return Object.defineProperty(t,"popLayer",{get:function(){return r.ui.getLayer(r.UILayer.Panel)},enumerable:!1,configurable:!0}),Object.defineProperty(t,"messageLayer",{get:function(){return r.ui.getLayer(r.UILayer.MessageBox)},enumerable:!1,configurable:!0}),Object.defineProperty(t,"effectLayer",{get:function(){return r.ui.getLayer(r.UILayer.Effect)},enumerable:!1,configurable:!0}),Object.defineProperty(t,"loadingLayer",{get:function(){return r.ui.getLayer(r.UILayer.LoadingBar)},enumerable:!1,configurable:!0}),Object.defineProperty(t,"bannerLayer",{get:function(){return r.ui.getLayer(r.UILayer.Banner)},enumerable:!1,configurable:!0}),Object.defineProperty(t,"xLayer",{get:function(){return r.ui.getLayer(r.UILayer.X)},enumerable:!1,configurable:!0}),t.popView=function(t,e){void 0===e&&(e=!1),r.ui.popView(t,e)},t.addEffectAR=function(t){r.ui.addEffectAR(t)},t.popMessageBox=function(t){r.ui.popMessageBox(t)},t._loadTopres=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(n){switch(n.label){case 0:return t=r.ui.getLayer(r.UILayer.Topres),(e=t.children[0])?[3,2]:[4,a.default.create()];case 1:e=n.sent(),t.addChild(e),n.label=2;case 2:return[2,e]}})})},Object.defineProperty(t,"topres",{get:function(){return r.ui.getLayer(r.UILayer.Topres).children[0].getComponent(a.default)},enumerable:!1,configurable:!0}),t.showTopresGame=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,this._loadTopres()];case 1:return t.sent(),this.topres.aniShowGame(),[2]}})})},t.showTopresResult=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,this._loadTopres()];case 1:return t.sent(),this.topres.aniShowResult(),[2]}})})},t.hideTopres=function(){var t=r.ui.getLayer(r.UILayer.Topres).children[0];t&&t.getComponent(a.default).aniHide()},t.playSoundBtnClicked=function(){this.playSFX("button_click")},t.playSFX=function(t,e){void 0===e&&(e=".mp3"),b.sd.playSFX("sounds/"+t,1,e)},t.vibrateLight=function(){f.dm.player.settingShake&&u.pm.vibrateShort({type:"light"})},t.vibrateMedium=function(){f.dm.player.settingShake&&u.pm.vibrateShort({type:"medium"})},t.showToast=function(t){u.pm.showToast(t)},t.showToast_noCoin=function(){this.showToast("\u91d1\u5e01\u4e0d\u8db3")},Object.defineProperty(t,"isBattle",{get:function(){return l.sm.curScene.getType()==l.SceneType.StageBattle},enumerable:!1,configurable:!0}),t.addEffBoom=function(e,n){void 0===n&&(n=0);var o=cc.instantiate(h.default.instance.resList.getPrefabBoom(n));o.position=e,t.addEffectAR(o),setTimeout(function(){c.Utils.removeNode(o)},3e3)},t.GameLogin=function(t,e){console.log("beginhortorLogin begin"),t&&r.ui.showLoading();var n=f.dm.loginRes;n.encryptCombUser,n.timestamp,n.sign,f.dm.player.maxScore=u.pm.GetUserScore(),e&&e(!1)},t.GetWorldRank=function(t){var e={token:f.dm.player.token};p.net.Post("getWorldRank",e,function(e,n){e&&0==n.errcode?t&&t({rank:n.data,myRank:n.my_rank}):t&&t(void 0)})},t.loadConfigFromAli=function(t){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(){return e=""+o.GameConfig.OSS_URL_BASE+t+".json"+Math.random(),[2,c.Utils.loadConfigFromAli(e)]})})},t.ClearCustomBanner=function(){var t=this.bannerLayer;c.Utils.removeAllChildren(t)},t.createBannerStyle=function(t,e){var n=(Math.abs(t)+d.GlobalDefines.ScreenHeight/2)/d.GlobalDefines.ScreenHeight,o=d.GlobalDefines.WindowHeight*n,i=d.GlobalDefines.ScreenHeight>d.GlobalDefines.Design_Height?1:.92,r=d.GlobalDefines.WindowWidth*(e?i:1);return{top:o,left:(d.GlobalDefines.WindowWidth-r)/2,width:r}},t.RefreshBanner=function(e){var n=t.createBannerStyle(e.y,!0),o=f.dm.adids.GetPuzzleBannerId(f.dm.player.level);u.pm.ShowBannerBySizePolling(o,n,function(n){n?t.ClearCustomBanner():u.pm.getTasks(function(n){if(n&&n.taskList&&0!=n.taskList.length){y.wall.wallTasks=n;var o=n.taskList,i=o.find(function(t){return 2==t.status&&0==t.awareAccpetStatus});i||(i=o[c.Utils.randomInt(0,o.length)]),i?(console.log("[GameUtils RefreshBanner] wxbanner\u5c55\u793a\u5931\u8d25\uff0c\u79ef\u5206\u5899banner"),v.default.show({taskItem:i,anchor_banner:e,bannerLayer:t.bannerLayer,screenWidth:d.GlobalDefines.ScreenWidth,screenHeight:d.GlobalDefines.ScreenHeight,onAward:function(){}})):(console.log("[GameUtils RefreshBanner] wxbanner\u5c55\u793a\u5931\u8d25\uff0c\u79ef\u5206\u5899\u5339\u914d\u5931\u8d25\uff0c\u5c55\u793a\u81ea\u5236banner"),t.ClearCustomBanner())}else console.log("[GameUtils RefreshBanner] wxbanner\u5c55\u793a\u5931\u8d25\uff0c\u79ef\u5206\u5899\u52a0\u8f7d\u5931\u8d25\uff0c\u5c55\u793a\u81ea\u5236banner"),t.ClearCustomBanner()})})},t.showBanner=function(e){o.GameConfig.IS_YDBANNER?t.ClearCustomBanner():t.RefreshBanner(e)},t.onYDBannerRewardClose=function(t,e,n){c.Utils.btnLock()||(r.ui.showLoading(),u.pm.loadAndShowVideoAd(function(t){if(r.ui.hideLoading(),1==t)switch(e.type){case i.GoldRewardType.Coin:}},n))},t.createRewardIco=function(t,e,n){var o=new cc.Node,i=new cc.Node;i.parent=o;var r=i.addComponent(cc.Sprite);return r.sizeMode=cc.Sprite.SizeMode.TRIMMED,i.scale=n,r.spriteFrame=e,o.position=t,o},t.ShowX=function(e,n){if(!(t.xLayer.childrenCount>0)){var o=e||f.dm.adids.XAdInfo.EnterGame.xid;u.pm.ShowX(o,function(e){e||u.pm.getTasks(function(e){if(e&&e.taskList&&0!=e.taskList.length){y.wall.wallTasks=e;var n=e.taskList,o=n.find(function(t){return 2==t.status&&0==t.awareAccpetStatus});o||(o=n[c.Utils.randomInt(0,n.length)]),o?m.default.show({taskItem:o,xLayer:t.xLayer,onAward:function(){}}):t.showYDXPanel()}else t.showYDXPanel()}),n&&n(e)})}},t.showYDXPanel=function(){var e=this;t.xLayer.childrenCount>0||g.default.show({xLayer:this.xLayer,desc:"\u89c2\u770b\u89c6\u9891\uff0c\u83b7\u5f97\u91d1\u5e01",onOk:function(){t.playSoundBtnClicked(),r.ui.showLoading(),u.pm.loadAndShowVideoAd(function(){r.ui.hideLoading(),c.Utils.removeAllChildren(e.xLayer)},f.dm.adids.AdInfo.Bee.adid)}})},t.ShowRank=function(){var e=function(){var e={rankData:void 0,myInfo:{score:f.dm.player.maxScore,avatar:f.dm.player.avatar,name:f.dm.player.name,bottle:f.dm.player.maxBottle}};t.GetWorldRank(function(n){e.rankData=n;var o={popLayer:t.popLayer,worldData:e,onClosed:function(){}};_.default.show(o)})};console.log("dm player name ==",f.dm.player.name),""==f.dm.player.name?(console.log("\u51c6\u5907\u5f3a\u6388\u6743\u767b\u5f55"),u.pm.Login().then(function(n){s.Logger.debug("[WorldView Login] res:",n),f.dm.loginRes=n,t.GameLogin(!1,e)}).catch(function(){e()})):e()},t.showTopresMain=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,this._loadTopres()];case 1:return t.sent(),this.topres.aniShowMain(),[2]}})})},t}();n.GameUtils=w,cc._RF.pop()},{"../common/AudioManager":"AudioManager","../common/DataManager":"DataManager","../common/GameManager":"GameManager","../common/NetworkManager":"NetworkManager","../common/PlatformManager":"PlatformManager","../common/SceneManager":"SceneManager","../common/comp/rank/RankPanel":"RankPanel","../common/comp/yd_wall/YDWallBanner":"YDWallBanner","../common/comp/yd_wall/YDWallManager":"YDWallManager","../common/comp/yd_wall/YDWallPanel":"YDWallPanel","../common/comp/yd_x/YDXPanel":"YDXPanel","../common/consts/GlobalDefines":"GlobalDefines","../utils/Utils":"Utils","../utils/logger":"logger","./common/UIManager":"UIManager","./common/topres/TopResView":"TopResView","./consts/BattleConfig":"BattleConfig","./consts/GameConfig":"GameConfig"}],GlobalDefines:[function(t,e,n){"use strict";cc._RF.push(e,"8f4da58m/NH7oMIIXWmIcCX","GlobalDefines"),Object.defineProperty(n,"__esModule",{value:!0}),n.TipType=n.GameType=n.ItemType=n.LoadStatus=n.GlobalDefines=void 0;var o=t("../../game/consts/GameConfig"),i=function(){function t(){}return Object.defineProperty(t,"ScreenWidth",{get:function(){return this.Design_Width},enumerable:!1,configurable:!0}),Object.defineProperty(t,"ScreenHeight",{get:function(){var t=this.Design_Width/this.WindowWidth;return this.WindowHeight*t},enumerable:!1,configurable:!0}),Object.defineProperty(t,"wsRate",{get:function(){return this.WindowWidth/this.ScreenWidth},enumerable:!1,configurable:!0}),t.CHANNEL=o.GameConfig.cfg.channel,t.Second_Day=86400,t.isIos=!0,t.PixelRatio=2,t.WindowHeight=667,t.WindowWidth=375,t.MenuButtonLogic={width:174,height:64,top:32,right:730,bottom:80,left:556},t.SDKVersion="",t.platform="",t.Design_Width=750,t.Design_Height=1334,t.ItemDisY=124,t.ItemDisX=106,t.OneStepTm=.07,t.HoneyOneStepTm=.08,t.MaxCol=4,t.MaxRow=5,t.HoneyDownMax=5,t.MaxSmallBottle=30,t.SmallBottleWidth=48,t.SmallBottleHeight=57,t.MaxBeeTipCount=2,t.BeeTipInterval=60,t.BigNumber=999999999,t.oneTm=1/30,t}();n.GlobalDefines=i,function(t){t[t.Doing=-1]="Doing",t[t.Success=0]="Success",t[t.GameOut=1]="GameOut"}(n.LoadStatus||(n.LoadStatus={})),function(t){t[t.Free=0]="Free",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Three=3]="Three",t[t.Four=4]="Four",t[t.Five=5]="Five",t[t.Max=6]="Max",t[t.Honey=7]="Honey",t[t.BeeTip=8]="BeeTip"}(n.ItemType||(n.ItemType={})),function(t){t[t.Wait=0]="Wait",t[t.Collect=1]="Collect",t[t.Bee=2]="Bee",t[t.HoneyDown=3]="HoneyDown",t[t.HoneyInBottle=4]="HoneyInBottle",t[t.BottleFull=5]="BottleFull",t[t.Fill=6]="Fill",t[t.End=7]="End",t[t.ObstacleBomb=8]="ObstacleBomb",t[t.FourBee=9]="FourBee"}(n.GameType||(n.GameType={})),function(t){t[t.None=0]="None",t[t.Bee=1]="Bee",t[t.Magic=2]="Magic",t[t.Refresh=3]="Refresh"}(n.TipType||(n.TipType={})),cc._RF.pop()},{"../../game/consts/GameConfig":"GameConfig"}],GlobalEvents:[function(t,e,n){"use strict";cc._RF.push(e,"2254bgWZUNKf564ufiZUxDm","GlobalEvents");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.EventShowBanner=n.EventFourBee=n.EventTipChange=n.EventBeeTipBegin=n.EventBottleLevelUp=n.EventAwardJumpEnd=n.EventAwardPos=n.EventGetAward=n.EventScoreChange=n.EventRestart=n.EventRevive=n.EventTipEnd=n.ItemClicked=n.EventOnGameBtnGetItem=n.EventCloseYDX=n.EventOnPanelClosed=n.EventOnPanelPop=n.EventRedDotChanged=n.EventOnTaskCompleted=n.EventOnCoinChange=n.EventOnDataChange=n.EventOnSwitchScene=n.EventOnHide=n.EventOnShow=void 0;var r=function(t){function e(){var n=t.call(this,e.NAME,!0)||this;return n.res=void 0,n}return i(e,t),e.NAME="EventOnShow",e}(cc.Event.EventCustom);n.EventOnShow=r;var a=function(t){function e(){return t.call(this,e.NAME,!0)||this}return i(e,t),e.NAME="EventOnHide",e}(cc.Event.EventCustom);n.EventOnHide=a;var c=function(t){function e(){return t.call(this,e.NAME,!0)||this}return i(e,t),e.NAME="EventOnSwitchScene",e}(cc.Event.EventCustom);n.EventOnSwitchScene=c;var s=function(t){function e(n){var o=t.call(this,e.NAME,!0)||this;return o.obj=n,o}return i(e,t),e.NAME="EventOnDataChange",e}(cc.Event.EventCustom);n.EventOnDataChange=s;var l=function(t){function e(){return t.call(this,e.NAME,!0)||this}return i(e,t),e.NAME="EventOnCoinChange",e}(cc.Event.EventCustom);n.EventOnCoinChange=l;var u=function(t){function e(n){var o=t.call(this,e.NAME,!0)||this;return o.taskId=n,o}return i(e,t),e.NAME="EventOnTaskCompleted",e}(cc.Event.EventCustom);n.EventOnTaskCompleted=u;var p=function(t){function e(n){var o=t.call(this,e.NAME,!0)||this;return o.dotType=0,o.dotType=n,o}return i(e,t),e.NAME="EventRedDotChanged",e}(cc.Event.EventCustom);n.EventRedDotChanged=p;var h=function(t){function e(){return t.call(this,e.NAME,!0)||this}return i(e,t),e.NAME="EventOnPanelPop",e}(cc.Event.EventCustom);n.EventOnPanelPop=h;var f=function(t){function e(){return t.call(this,e.NAME,!0)||this}return i(e,t),e.NAME="EventOnPanelClosed",e}(cc.Event.EventCustom);n.EventOnPanelClosed=f;var d=function(t){function e(){return t.call(this,e.NAME,!0)||this}return i(e,t),e.NAME="EventCloseYDX",e}(cc.Event.EventCustom);n.EventCloseYDX=d;var g=function(t){function e(n,o){var i=t.call(this,e.NAME,!0)||this;return i.rewardType=n,i.ico=o,i}return i(e,t),e.NAME="EventOnGameBtnGetItem",e}(cc.Event.EventCustom);n.EventOnGameBtnGetItem=g;var m=function(t){function e(n){var o=t.call(this,e.NAME,!0)||this;return o.item=n,o}return i(e,t),e.NAME="ItemClicked",e}(cc.Event.EventCustom);n.ItemClicked=m;var y=function(t){function e(){return t.call(this,e.NAME,!0)||this}return i(e,t),e.NAME="EventTipEnd",e}(cc.Event.EventCustom);n.EventTipEnd=y;var v=function(t){function e(){return t.call(this,e.NAME,!0)||this}return i(e,t),e.NAME="EventRevive",e}(cc.Event.EventCustom);n.EventRevive=v;var _=function(t){function e(n){var o=t.call(this,e.NAME,!0)||this;return o.bottleCount=0,o.bottleCount=n,o}return i(e,t),e.NAME="EventRestart",e}(cc.Event.EventCustom);n.EventRestart=_;var b=function(t){function e(n){var o=t.call(this,e.NAME,!0)||this;return o.score=0,o.score=n,o}return i(e,t),e.NAME="EventScoreChange",e}(cc.Event.EventCustom);n.EventScoreChange=b;var w=function(t){function e(e){var n=t.call(this,b.NAME,!0)||this;return n.awardPos=null,n.awardPos=e,n}return i(e,t),e.NAME="EventGetAward",e}(cc.Event.EventCustom);n.EventGetAward=w;var S=function(t){function e(n){var o=t.call(this,e.NAME,!0)||this;return o.awardPos=null,o.awardPos=n,o}return i(e,t),e.NAME="EventAwardPos",e}(cc.Event.EventCustom);n.EventAwardPos=S;var E=function(t){function e(){return t.call(this,e.NAME,!0)||this}return i(e,t),e.NAME="EventAwardJumpEnd",e}(cc.Event.EventCustom);n.EventAwardJumpEnd=E;var O=function(t){function e(n){var o=t.call(this,e.NAME,!0)||this;return o.flowerSeriesIndex=-1,o.flowerSeriesIndex=n,o}return i(e,t),e.NAME="EventBottleLevelUp",e}(cc.Event.EventCustom);n.EventBottleLevelUp=O;var P=function(t){function e(){return t.call(this,e.NAME,!0)||this}return i(e,t),e.NAME="EventBeeTipBegin",e}(cc.Event.EventCustom);n.EventBeeTipBegin=P;var C=function(t){function e(){return t.call(this,e.NAME,!0)||this}return i(e,t),e.NAME="EventTipChange",e}(cc.Event.EventCustom);n.EventTipChange=C;var T=function(t){function e(){return t.call(this,e.NAME,!0)||this}return i(e,t),e.NAME="EventFourBee",e}(cc.Event.EventCustom);n.EventFourBee=T;var G=function(t){function e(){return t.call(this,e.NAME,!0)||this}return i(e,t),e.NAME="EventShowBanner",e}(cc.Event.EventCustom);n.EventShowBanner=G,cc._RF.pop()},{}],GlobalTouch:[function(t,e,n){"use strict";cc._RF.push(e,"6981eIO4zxDdbjwWxFE5suM","GlobalTouch");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.EventGlobalTouch=void 0;var a=t("./G"),c=function(t){function e(n){var o=t.call(this,e.NAME,!0)||this;return o.eventTouch=n,o}return i(e,t),e.NAME="EventGlobalTouch",e}(cc.Event.EventCustom);n.EventGlobalTouch=c;var s=cc._decorator,l=s.ccclass,u=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this,!1)},e.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this,!1)},e.prototype.onTouchStart=function(t){a.GlobalEvent.dispatchEvent(new c(t))},r([l],e)}(cc.Component));n.default=u,cc._RF.pop()},{"./G":"G"}],GuideManager:[function(t,e,n){"use strict";cc._RF.push(e,"d3afa0GpR5O0b8ruz9itBtl","GuideManager"),Object.defineProperty(n,"__esModule",{value:!0}),n.gm=n.GTType=n.GuideManager=void 0;var o,i=t("../consts/GameConfig"),r=t("../../utils/logger"),a=t("../../common/GlobalEvents"),c=t("../../common/G"),s=t("../../common/DataManager"),l=function(){function t(){this.curTask=null,this.lastHanInfo=void 0,this.isInited=!1,this.taskList=[]}return Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t)},enumerable:!1,configurable:!0}),t.prototype.onInit=function(){i.GameConfig.DEBUG_GUIDE||this.isInited||(this.isInited=!0)},t.prototype.isGuiding=function(){return!!this.curTask},t.prototype.taskComplete=function(t,e){void 0===e&&(e=1),this.curTask=null,~~s.dm.player.taskPass[t]!=e&&(s.dm.player.setTaskPass(t,e),c.GlobalEvent.dispatchEvent(new a.EventOnTaskCompleted(t)))},t.prototype.checkTask=function(t,e){return void 0===e&&(e=1),~~s.dm.player.taskPass[t]>=e},t.prototype._checkAndShow=function(t){return void 0===t&&(t=o.ALL),__awaiter(this,void 0,void 0,function(){var e,n,o,i;return __generator(this,function(a){switch(a.label){case 0:if(this.curTask)return r.Logger.debug("[GruideManager _checkAndShow] \u5f53\u524d\u4efb\u52a1\u8fdb\u884c\u4e2d",this.curTask),[2];e=0,a.label=1;case 1:if(!(e<this.taskList.length))return[3,7];if(n=this.taskList[e],o=n.getType(),0==(t&o))return[3,6];if(!n.checkTask())return[3,6];this.curTask=n,a.label=2;case 2:return a.trys.push([2,4,,5]),[4,n.show()];case 3:return a.sent(),[3,5];case 4:return i=a.sent(),r.Logger.debug("[GuideManger _checkAndShow] ",n.getId(),"\u4efb\u52a1\u52a0\u8f7d\u5f02\u5e38:",i),[3,5];case 5:return[3,7];case 6:return e++,[3,1];case 7:return[2]}})})},t.prototype.recordLastHandInfo=function(t){this.lastHanInfo={rotaion:t.rotation,position:t.position}},t.prototype.checkAndShowTouch=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,this._checkAndShow(o.TOUCH)];case 1:return t.sent(),[2]}})})},t.prototype.checkAndShowAll=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,this._checkAndShow()];case 1:return t.sent(),[2]}})})},t.prototype.checkCustom=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this._checkAndShow(t)];case 1:return e.sent(),[2]}})})},t._instance=null,t}();n.GuideManager=l,function(t){t[t.NONE=1]="NONE",t[t.TOUCH=2]="TOUCH",t[t.ALL=3]="ALL"}(o=n.GTType||(n.GTType={})),n.gm=l.instance,cc._RF.pop()},{"../../common/DataManager":"DataManager","../../common/G":"G","../../common/GlobalEvents":"GlobalEvents","../../utils/logger":"logger","../consts/GameConfig":"GameConfig"}],GuideUtils:[function(t,e,n){"use strict";cc._RF.push(e,"96079q537lGmIbaqSr8N66f","GuideUtils"),Object.defineProperty(n,"__esModule",{value:!0}),n.GuideUtils=void 0;var o=t("./UIManager"),i=t("./GuideManager"),r=t("../../utils/Utils"),a=t("../../utils/logger"),c=function(){function t(){}return t.changeStep=function(t,e){for(var n=0;n<t.children.length;n++)t.children[n].active=e==n;return t.children[e]},t.DragdragHand=function(t,e,n){return __awaiter(this,void 0,void 0,function(){var o;return __generator(this,function(){return t.stopAllActions(),t.children[0].stopAllActions(),t.active=!0,t.position=e,o=cc.repeatForever(cc.sequence(cc.moveBy(.3,-10,10).easing(cc.easeCubicActionIn()),cc.moveTo(.6,n.x,n.y).easing(cc.easeCubicActionOut()),cc.moveBy(.6,0,0),cc.moveTo(0,e.x,e.y))),cc.tween(),t.runAction(o),[2]})})},t.TaptapHand=function(t,e){return __awaiter(this,void 0,void 0,function(){var n;return __generator(this,function(){return n=t.children[0],t.stopAllActions(),n.stopAllActions(),t.active=!0,cc.tween(t).call(function(){a.Logger.debug("[GuideUtils TaptapHand] jiantou.pos = "+t.position),e&&e();var o=cc.repeatForever(cc.sequence(cc.moveBy(.3,-10,10).easing(cc.easeCubicActionIn()),cc.moveBy(.3,10,-10).easing(cc.easeCubicActionIn())));n.runAction(o)}).start(),[2]})})},t.HandMove=function(t){if(t&&t.jiantou){if(t.offset=t.offset||cc.v2(0,0),t.rotation=t.rotation||0,t.targetNode){var e=t.targetNode.convertToWorldSpaceAR(t.offset),n=t.jiantou.parent.convertToNodeSpaceAR(e);t.position=n}t.jiantou.stopAllActions(),t.jiantou.active=!0;var o=cc.v2(t.position.x+t.offset.x,t.position.y+t.offset.y);cc.tween(t.jiantou).to(.7,{position:o,opacity:255,rotation:t.rotation,scale:1},{easing:"sineOut"}).call(function(){t.next&&t.next()}).start()}},t.changeParent=function(t,e,n,o,i){var r={node:e,oldPostion:e.position,oldParent:e.parent,index:e.getSiblingIndex(),oldScale:e.scale,backCall:i};t.push(r);var a=e.convertToWorldSpaceAR(cc.v2(0,0)),c=n.convertToNodeSpaceAR(a);return e.parent=n,e.position=c,o&&o(r),e},t.actorGoBack=function(t){for(var e=t.length-1;e>=0;e--){var n=t[e],o=n.oldParent;n.backCall&&n.backCall(n),n.node.position=n.oldPostion,o.insertChild(n.node,n.index)}},t.show=function(t,e,n){return __awaiter(this,void 0,Promise,function(){var i,a;return __generator(this,function(c){switch(c.label){case 0:return o.ui.showLoading("\u52a0\u8f7d\u4e2d..."),[4,r.Utils.loadPefab(n,!0).catch(function(t){throw o.ui.hideLoading(),t})];case 1:return i=c.sent(),(a=cc.instantiate(i)).getComponent(e).init(t),a.position=cc.v2(0,0),o.ui.addGuide(a),o.ui.hideLoading(),[2,a]}})})},t.breakGuide=function(e,n){t.actorGoBack(e),e=[],r.Utils.removeAllChildren(n),i.gm.curTask=void 0},t}();n.GuideUtils=c,cc._RF.pop()},{"../../utils/Utils":"Utils","../../utils/logger":"logger","./GuideManager":"GuideManager","./UIManager":"UIManager"}],G:[function(t,e,n){"use strict";cc._RF.push(e,"865fewAxRlJQaqanskNSrEL","G");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.GlobalEvent=n.Global=void 0;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.Instance=new e,e}(cc.EventTarget);n.Global=r,n.GlobalEvent=r.Instance,cc._RF.pop()},{}],HagoSdk:[function(t,e,n){"use strict";cc._RF.push(e,"1f5d46YoxNGc7tmq5gxCFVl","HagoSdk");var o,i,r,a=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),c=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.LanguageNumber=n.HTTP_TYPE=void 0,function(t){t.GET="GET",t.POST="POST"}(i=n.HTTP_TYPE||(n.HTTP_TYPE={})),function(t){t[t.Chinese=1]="Chinese",t[t.English=2]="English",t[t.Indonesian=3]="Indonesian",t[t.Vietnamese=4]="Vietnamese",t[t.Brazilian=5]="Brazilian",t[t.Thailand=6]="Thailand"}(r=n.LanguageNumber||(n.LanguageNumber={}));var s=cc._decorator,l=s.ccclass,u=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.advId=10738,e.bannerId=10739,e.ucord="EWkz7E",e.localPayInfo="tankexiangqianchong_pay",e.rewardedVideoAd=null,e.clickData=null,e.isStartClickOver=!1,e.isLoadAssetOver=!1,e.loadFunc=null,e.playCount=1,e.successFunc=null,e.failFunc=null,e.isVideoShow=!1,e.isFirstClick=!1,e.startFunc=null,e.cursor=0,e.tData=null,e.loadSuccessFunc=null,e.eventTarget_csryw=new cc.EventTarget,e.thislist=[],e}var n;return a(e,t),n=e,Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new n),window.HagoSdk=this._instance,this._instance},enumerable:!1,configurable:!0}),e.prototype.init=function(t){this.getCountry(),this.loadExelInfo(t)},e.prototype.initLoadGame=function(t,e){switch(void 0===e&&(e=null),!this.loadFunc&&(this.loadFunc=e),t){case 1:this.isLoadAssetOver=!0;break;case 2:this.isStartClickOver=!0}this.isStartClickOver&&this.isLoadAssetOver&&(console.log("\u6d41\u7a0b\u8d70\u5b8c\uff0c\u8fdb\u5165\u6e38\u620f"),this.loadFunc&&this.loadFunc(),this.sendHagoInfo())},e.prototype.sendHagoInfo=function(){},e.prototype.getCountry=function(t){return void 0===t&&(t=0),this.initLoadGame(2)},e.prototype.getClickData=function(t){void 0===t&&(t=0);var e="https://service-n1mz24ki-1302074099.sg.apigw.tencentcs.com/release/HagoConfig?game_token="+this.ucord;this.send(e).then(function(e){if("fail"==e||404==e.code){if(++t>3)return this.initLoadGame(2);setTimeout(function(){this.getClickData(t)}.bind(this),500)}else if(200==e.code){console.log("\u83b7\u53d6\u540e\u53f0\u914d\u7f6e\u6210\u529f\uff1a",e.data);var n=new Date(e.server_time).getHours();if(n>=8&&n<=20)return this.initLoadGame(2);this.clickData=JSON.parse(e.data)[1].LzSDK,this.clickData&&this.clickData.loadingVideo?this.showVideo(function(){this.initLoadGame(2)}.bind(this),function(){this.initLoadGame(2)}.bind(this)):this.initLoadGame(2)}else this.initLoadGame(2)}.bind(this))},e.prototype.showADUI=function(t,e,n){void 0===n&&(n=!0),this.loadPrefab(t,e,n)},e.prototype.loadPrefab=function(t,e,n){void 0===n&&(n=!0),cc.resources.load("hago/hagoClick/"+t,function(o,i){if(o)cc.log("Prefab error:"+o);else if(i instanceof cc.Prefab){var r=cc.instantiate(i);r.name=t,cc.director.getScene().addChild(r,cc.macro.MAX_ZINDEX),r.getComponent(t).show(e,n),r.x=cc.winSize.width/2,r.y=cc.winSize.height/2}else cc.log("Prefab error")})},e.prototype.showVideo=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null),this.successFunc=t,this.failFunc=e,this.rewardedVideoAd||(this.rewardedVideoAd=window.hg.createRewardedVideoAd({adUnitId:this.advId}),this.rewardedVideoAd.onClose=function(t){1==t.isEnded?(console.log("\u7528\u6237\u89c2\u770b\u4e86\u5b8c\u6574\u5e7f\u544a"),this.successFunc&&this.successFunc()):(console.log("\u7528\u6237\u5173\u95ed\u4e86\u5e7f\u544a\u7a97\u53e3"),this.failFunc&&this.failFunc())}.bind(this),this.rewardedVideoAd.onError=function(t){this.failFunc&&this.failFunc(),console.log("\u4e2d\u9014\u5173\u95ed\u5e7f\u544a\u6216\u8005\u62c9\u53bb\u5e7f\u544a\u5931\u8d25\u3002",t)}.bind(this)),this.isVideoShow||(this.isVideoShow=!0,setTimeout(function(){this.isVideoShow=!1}.bind(this),2e3),this.rewardedVideoAd.show(),console.log("\u5c55\u793a\u5e7f\u544a"))},e.prototype.showBanner=function(){console.log("showBanner"),window.hg&&window.hg.showBannerAd&&window.hg.showBannerAd({adUnitId:this.bannerId,callback:function(t){console.log("res",JSON.stringify(t))}})},e.prototype.hideBanner=function(){console.log("hideBanner"),window.hg&&window.hg.hideBannerAd&&window.hg.hideBannerAd({adUnitId:this.bannerId,callback:function(t){console.log("res",JSON.stringify(t))}})},e.prototype.showGameOverVideo=function(){this.playCount++,this.clickData&&this.clickData.showVideoLevelNumber&&this.playCount%this.clickData.showVideoLevelNumber&&this.showVideo()},e.prototype.showStartGameVideo=function(t){this.startFunc=t,!this.isFirstClick&&this.clickData&&this.clickData.startVideo?(this.showVideo(this.startFunc,this.startFunc),this.isFirstClick=!0):this.startFunc&&this.startFunc()},e.prototype.loadExelInfo=function(t){var e=this;this.loadSuccessFunc=t,cc.loader.loadRes("hago/localconfig/Language",cc.TextAsset,null,function(t,n){t?console.log("load bundle is faild.",t):e.onLoaclLoded(n)})},e.prototype.onLoaclLoded=function(t){this.data=t.text;var e=function(){var t=(this.getNextRow(),this.getNextRow(),this.getNextRow());if(!t)return null;for(var e=this.getNextRow(),n=[];e;){for(var o={},i=0;i<t.length&&i<e.length;i++)o[t[i]]=e[i];n.push(o),e=this.getNextRow()}return n}.bind(this)(t);this.completeHandler(e)},e.prototype.completeHandler=function(t){if(this.rawData=t,this.data={},t)for(var e=0,n=t;e<n.length;e++){var o=n[e];this.data[o.id]=o}this.initLanguage(),this.loadSuccessFunc(),console.log("\u591a\u56fd\u8bed\u8a00\u5305\u52a0\u8f7d\u5b8c\u6210")},e.prototype.getItem=function(t){return this.data[t]},e.prototype.getNextRow=function(){var t=this.getNextColumn();if(!t)return null;for(var e=[];t&&(e.push(t.column),!t.isEnd);)t=this.getNextColumn();return e},e.prototype.getNextColumn=function(){var t=[],e=[],n=this.getNextChar();if(null==n)return null;for(var o=!1;n;){if("&"==n){if(t.length<=0||2==t.length)break;e.push(n)}else if('"'==n)2==t.length?e.push(t.pop()):t.push(n);else if("\n"==n){if(t.length<=0||2==t.length){o=!0;break}e.push(n)}else if("^"==n)e.push("\n");else{if(null==n){o=!0;break}"\r"==n||e.push(n)}n=this.getNextChar()}return"\r"==this.peekNextChar()&&this.getNextChar(),{column:e.join(""),isEnd:o}},e.prototype.getNextChar=function(){return!this.data||this.cursor>=this.data.length?null:this.data.charAt(this.cursor++)},e.prototype.peekNextChar=function(){return!this.data||this.cursor>=this.data.length?null:this.data.charAt(this.cursor)},e.prototype.emitEvent=function(t,e,n,o,i,r){this.eventTarget_csryw.emit(t+"",e,n,o,i,r)},e.prototype.onEvent=function(t,e,n){this.eventTarget_csryw.on(t+"",e,n)},e.prototype.offEvent=function(t,e,n){this.eventTarget_csryw.off(t+"",e,n)},e.prototype.initLanguage=function(){this.type=r.English;var t=window.FBInstant?window.FBInstant.getLocale():"";switch(console.log("The current language\uff1a",t),t){case"id_ID":this.type=r.Indonesian,console.log("\u8bed\u8a00\u4e3a\u5370\u5c3c\u8bed");break;case"vi_VN":this.type=r.Vietnamese,console.log("\u8bed\u8a00\u4e3a\u8d8a\u5357\u8bed");break;case"pt_BR":case"pt_PT":this.type=r.Brazilian,console.log("\u8bed\u8a00\u4e3a\u5df4\u8461\u8bed");break;case"id":this.type=r.Indonesian,console.log("\u8bed\u8a00\u4e3a\u5370\u5c3c\u8bed");break;case"vi":this.type=r.Vietnamese,console.log("\u8bed\u8a00\u4e3a\u8d8a\u5357\u8bed");break;case"pt":case"pt-BR":this.type=r.Brazilian,console.log("\u8bed\u8a00\u4e3a\u5df4\u8461\u8bed")}},e.prototype.txt=function(t,e,n){switch(void 0===e&&(e=null),void 0===n&&(n="%s"),this.type){case r.Chinese:t+="_C";break;case r.English:t+="_E";break;case r.Indonesian:t+="_I";break;case r.Vietnamese:t+="_V";break;case r.Brazilian:t+="_B";break;case r.Thailand:t+="_T"}var o=this.getItem(t);return o?e?o.value?o.value.replace(n,e):t:o.value?o.value:t:t},e.prototype.getPicture=function(){var t="English";switch(this.type){case r.Chinese:t="Chinese";break;case r.English:t="English";break;case r.Indonesian:t="Indonesian";break;case r.Vietnamese:t="Vietnamese";break;case r.Brazilian:t="Brazilian"}return t},e.prototype.loadBundle=function(t,e){void 0===e&&(e=null);var n=cc.assetManager.getBundle(t);n?e&&e(n):cc.assetManager.loadBundle(t,null,function(n,o){n?console.log("load bundle is faild.",t):e&&e(o)})},e.prototype.loadResByBundle=function(t,e,n){void 0===n&&(n="resources"),this.loadBundle(n,function(n){n.load(t,null,function(n,o){n?console.log("load  "+t+"  error"):e(o)})})},e.prototype.loadImage=function(t,e,n){void 0===n&&(n="resources"),this.loadBundle(n,function(o){o.load(e,cc.SpriteFrame,function(e,o){e?console.log("load image is error.",n):t&&""!=t.name&&(t.getComponent(cc.Sprite).spriteFrame=o)})})},e.prototype.startGameCheckPay=function(){},e.prototype.checkPayInfo=function(){},e.prototype.paySuccess=function(t){-1!=t||this.onBuyVipSuccess()},e.prototype.onBuyVipSuccess=function(){},e.prototype.send=function(t,e,n,o){return void 0===e&&(e=null),void 0===n&&(n=i.GET),void 0===o&&(o=3e3),new Promise(function(r){var a=new XMLHttpRequest;a.onreadystatechange=function(){4==a.readyState&&(a.status>=200&&a.status<400?(console.log("success"),r(JSON.parse(a.responseText))):(console.log("fail"),r("fail")),a&&a.abort&&a.abort())},a.onerror=function(t){console.log("request error",t),r("fail")},a.ontimeout=function(){console.log("timeout"),r("fail"),a&&a.abort&&a.abort()},!e||"object"!=typeof e||e.length||Array.isArray(e)||(e=JSON.stringify(e)),n==i.GET&&e&&(t+="?"+e,e=null),a.open(n,t,!0),a.timeout=o,n==i.POST&&a.setRequestHeader("Content-Type","application/json; charset=utf-8"),a.send(e),console.log("[hs_game]Request URL:"+t)})},e.prototype.getJsonLanguage=function(t,e){for(var n=0;n<4;n++){var o=JSON.parse(JSON.stringify(e));for(var i in o)for(var r=o[i],a=1;a<3e3;a++){var c=this.getItem(a+"_C");if(c)for(var s in r)if(r[s]==c.value)switch(n){case 0:if(!this.getItem(a+"_E"))break;r[s]=this.getItem(a+"_E").value;break;case 1:if(!this.getItem(a+"_I"))break;r[s]=this.getItem(a+"_I").value;break;case 2:if(!this.getItem(a+"_V"))break;r[s]=this.getItem(a+"_V").value;break;case 3:if(!this.getItem(a+"_B"))break;r[s]=this.getItem(a+"_B").value}}switch(n){case 0:console.log("English\uff1a",JSON.stringify(o));break;case 1:console.log("Indonesian\uff1a",JSON.stringify(o));break;case 2:console.log("Vietnamese\uff1a",JSON.stringify(o));break;case 3:console.log("Brazilian\uff1a",JSON.stringify(o))}}},e.prototype.conslosePlayerName=function(t){var e=["Abigil","Leo","Hale","Angelia","Abner","Max","John","Amber","Becky","Jeff","Beck","Carmen","Basil","Cindy","Stev","Darcy","Jack","Diana","Eva","Byron","Frieda","Gina","Troy","Hellen","Jason","Hebe","Irene","Jamie","Jane","Joey","Judy","Tony","Kelly","Lisa","Barton","Linda","Sue","Tina","Ken","Wendy","Clark","Eden","Glenn","Tim","York","Baron","dony","chasidy","kaila","pearn","bauers","bisnauth","brydson","veysey","karou","joseph","sumner","bergland","hazen","striplin","bruhn","scoon","cornella","street","maisch","fedrizzi","meena","odey","waldemar","heagy","calix","elain","bramlage","sass","keville","fones","schule","beverley","kimisha","payette","partrick","shotwell","troxel","burkholder","hediger","heffern","tinlin","hedke","yohance","vanderburg","ditzel","weightman","alderdice","ailward","hestand","wiltsey","grob","hullfish","bemis","mirra","kyelei","tahmid","gallacher","banghart","bodde","levana","hershberg","chenille","ingram","jabe","markku","chesher","cruickshank","jetheth","ami","hueston","bercaw","qusay","goodhart","qusay","bercaw","hueston","fuerstenau","vautrin","evelake","zwick","lisandra","alton","palmes","toles","godby","bede","berthold","callaham","quentina","raelin","millicent","gethsemane","allemang","macdermott","ussery","berendt","iluka","loretta","marco","curan","fulco","finegold","cissy","hallbauer","zion","ruffin","mccaw","branch","surgenor","hartenberger","pickerill","hoarty","fulwiler","maor","inman","ruhama","omar","caylor","ficklin","Rafaela","heppel","kuhns","garnsey","miglio","coslet","tourin","leigh","mctigue","keady","agatha","brownrigg","coelho","teehan","decell","fish","halligan","buit","davina","neveyah","Ciel","Mimi","Geri","Muse","Demi","Luna","Lumina","Sandy","Ash","Angel","Izefia","Louise","Danae","Chloe","Felicia","An","Snow","Ice","Celina","Amaya","Miya","airica","Erika","Ericka","Frederica","Derica","Kimi","Queenie","Dione","Regina","Juno","Gina","Amaris","Sicily","Cecile","Angelina","Sera","Serafina","Sakura","Karida","Elina","Aletta","Blanche","Fiona","Elodie","Dolores","Delores","Claudia","Deirdre","Desdemona","Amaryllis","Cytheria","Gina","Amethyst","Kira","Karida","Kimberly","Kimi","Kyrene","Cyrene","Cassiel","Cosima","Cassiopeia","Clover","Laraine","Dione","Michelle","Michaela","Lilith","Ishtar","Easter","Michelle","Gabrielle","Ariel","Cassiel","Arella","Muriel","Lorelei","Delilah","Melantha","Sade","sally","Blanche","Fiona","Elodie","Dolores","Delores","Claudia","Deirdre","Desdemona","Amaryllis","Cytheria","Gina","Amethyst","Kira","Karida","Kimberly","Kimi","Kyrene","Cyrene","Cassiel","Cosima","Cassiopeia","Clover","Laraine","Dione","meena","odey","waldemar","heagy","calix","elain","bramlage","sass","keville","fones","schule","beverley","kimisha","payette","partrick","shotwell","troxel","burkholder","hediger","heffern","tinlin","hedke","yohance","vanderburg","ditzel","weightman","alderdice","ailward","hestand","wiltsey","grob","hullfish","bemis","mirra","kyelei","tahmid","gallacher","banghart","bodde","levana","hershberg","chenille","ingram","jabe","markku","chesher","cruickshank","jetheth","ami","hueston","bercaw","qusay","goodhart","qusay","bercaw","hueston","fuerstenau","vautrin","evelake","zwick","lisandra","alton","palmes","toles","godby","bede","berthold","callaham","quentina","raelin","millicent","gethsemane","allemang","macdermott","ussery","berendt","iluka","loretta","marco","garnsey","miglio","coslet","tourin","leigh","mctigue","keady","agatha","brownrigg","coelho","teehan","decell","fish","halligan","buit","davina","neveyah","Ciel","Mimi","Geri","Muse","Demi","Luna","Lumina","Sandy","Ash","Angel","Izefia","Louise","Danae","An","Skye","Kira","Jo","Nana","Esme","Aida","Cyan","Indira","Desdemona","Claudia","Cecilia","Quella","Ulrica","Cassiel","Esme","neveyah","neveyah","neveyah","neveyah","neveyah","neveyah","ratliff","grieder","bolivar","garvin","gianino","kizzy","beech","gerrey","omar","ruhama","inman","ruhama","omar","caylor","ficklin","Rafaela","heppel","kuhns","garnsey","miglio","coslet","tourin","leigh","mctigue","keady","agatha","brownrigg","coelho","teehan","decell","fish","halligan","buit","davina","posie","neveyah","dudden","carlita","talbert","dunbar","duard","mcdonell","rodgers","watson","hopkin","bednarek","sushil","hopkin","normandin","sporting","katzen","milsten","cressida","sponholz"],n=JSON.parse(JSON.stringify(t)),o=0;for(var i in n)n[i].name=e[o],o++;console.log("English\uff1a",JSON.stringify(n))},e.prototype.getJsonLanguageTxt=function(t,e){for(var n in e){var o=e[n];for(var i in t)this.findchiledtype(t[i],o)}for(var i in this.thislist)console.log(this.thislist[i])},e.prototype.findchiledtype=function(t,e){if(!e||!e.hasOwnProperty(t)){if(Object.keys(e).length>=1){for(var n in e)this.findchiledtype(t,e[n]);return null}return null}-1==this.thislist.indexOf(e[t])&&this.thislist.push(e[t])},e._instance=null,n=c([l],e)}(cc.Component));n.default=u,cc._RF.pop()},{}],HortorAdManager:[function(t,e,n){"use strict";cc._RF.push(e,"88e43mFewpNZZxSXcej7DQZ","HortorAdManager");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./PlatformManager"),c=cc._decorator,s=c.ccclass,l=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.coupletAd=null,e}var n;return i(e,t),n=e,e.prototype.onLoad=function(){console.log("hortor ad on load is wxgame",a.default.iswxGame),a.default.iswxGame&&this.init()},e.prototype.init=function(){console.log("hortor ad manager init")},Object.defineProperty(e.prototype,"CoupletAd",{get:function(){return this.coupletAd||(this.coupletAd=hortor.sdk.createCrossAd({adsId:"qMYXv6OXwl"})),this.coupletAd},enumerable:!1,configurable:!0}),e.Instance=new n,r([s],e)}(cc.Component));n.default=l,cc._RF.pop()},{"./PlatformManager":"PlatformManager"}],HortorSdkV2:[function(t,e,n){"use strict";cc._RF.push(e,"1b2c1SYn9tLy7OI03XcGUeW","HortorSdkV2");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.HortorSdkV2=void 0;var r=t("./WXSdk"),a=t("./HSDK/platform"),c=t("../consts/GlobalDefines"),s=t("../../game/consts/GameConfig"),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.init=function(e){if(t.prototype.init.call(this,e),this.isWxPlatform){var n={env:HSDK.ENV.Production,gameId:s.GameConfig.GameId,gameVersion:s.GameConfig.VER_RELEASE,shareData:e.shareData,getUserInfoBtn:{type:"image",image:s.GameConfig.OSS_URL_BASE+"image/login_btn.png",style:{width:c.GlobalDefines.WindowWidth,height:1e3,top:100,left:0}},wallKey:"wwbcRgihVfkBMqBp",appId:s.GameConfig.APPID,shareSuccessDiff:2300,useShareAdapter:!0,openGetShareTheme:!0,openShareTimeline:!0,logReportFrequency:3e3,tgaAutoUpload:!0};a.default.init(n).then(function(t){console.log("\u521d\u59cb\u5316\u6210\u529f, \u53ef\u4ee5\u8c03\u7528HSDK\u7684\u5176\u4ed6\u63a5\u53e3\u4e86",JSON.stringify(t))}).catch(function(t){console.log("\u521d\u59cb\u5316\u5931\u8d25, \u4e0d\u53ef\u4ee5\u8c03\u7528HSDK\u7684\u5176\u4ed6\u63a5\u53e3, \u8bf7\u518d\u6b21\u521d\u59cb\u5316",JSON.stringify(t))})}},e.prototype.initReport=function(){},e.prototype.setLogind=function(){},e.prototype.trackEventPost=function(t,e){a.default.track.gameLog({logType:HSDK.LogType.TGA,eventType:HSDK.EventType.Track,eventName:t,customData:e})},e.prototype.sdkLogin=function(t){a.default.user.login().then(function(e){console.log("\u5f3a\u6388\u6743 \u767b\u5f55\u6210\u529f\uff01",e),t&&t(e)}).catch(function(e){console.log("\u5f3a\u6388\u6743 \u767b\u5f55\u5931\u8d25\uff01",e),t&&t(void 0)})},e.prototype.weakLogin=function(t){a.default.user.weakLogin().then(function(e){e?(console.log("\u5f31\u6388\u6743\u767b\u5f55\u6210\u529f\uff01",e),a.default.user.setPlayerInfo({serverId:"server-001"})):console.log("\u5f31\u6388\u6743\u767b\u5f55\u5931\u8d25! ",e),t&&t(e)}).catch(function(e){console.log("\u5f31\u6388\u6743\u767b\u5f55\u5931\u8d25\uff01",e),t&&t(void 0)})},e.prototype.checkVideoAd=function(t,e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return this.isWxPlatform?(a.default.ad.video.preload({id:e}).then(function(){console.log("\u89c6\u9891\u5e7f\u544a\u53ef\u7528"),t&&t(!0)}).catch(function(){console.log("\u89c6\u9891\u5e7f\u544a\u4e0d\u53ef\u7528"),t&&t(!1)}),[2]):[2]})})},e.prototype.showVideoAd=function(t,e){this.isWxPlatform?this.checkVideoAd(function(n){n?a.default.ad.video.show({id:e,onShowFail:function(){t(r.RewardAdStatus.Fail),console.log("\u5c55\u793a\u5931\u8d25")},onFinishClose:function(){console.log("\u89c6\u9891\u64ad\u653e\u5b8c\u540e\u5173\u95ed"),t(r.RewardAdStatus.Complete)},onQuitClose:function(){console.log("\u89c6\u9891\u672a\u64ad\u653e\u5b8c\u4e2d\u9014\u5173\u95ed"),t(r.RewardAdStatus.Fail)},onClose:function(){console.log("\u5173\u95ed, \u5305\u62ec\u89c6\u9891\u64ad\u653e\u5b8c\u540e\u5173\u95ed, \u548c\u89c6\u9891\u672a\u64ad\u653e\u5b8c\u4e2d\u9014\u5173\u95ed")},onPlaySuccess:function(){console.log("\u64ad\u653e\u6210\u529f")},onPlayFail:function(){console.log("\u64ad\u653e\u5931\u8d25"),t(r.RewardAdStatus.Fail)}}):(console.log("[HortorSdk] \u6ca1\u6709\u5e7f\u544a"),t(r.RewardAdStatus.None))},e):t(r.RewardAdStatus.Complete)},e.prototype.onShareAppMessage=function(){},e.prototype.goCustomer=function(t,e,n){a.default.customer.openConversation().then(function(t){console.log("\u6253\u5f00\u5ba2\u670d\u4f1a\u8bdd\u6210\u529f",t)}).catch(function(t){console.log("\u6253\u5f00\u5ba2\u670d\u4f1a\u8bdd\u5931\u8d25",t),n&&n()})},e.prototype.preloadInterstitialAds=function(t,e){a.default.ad.interstitial.preload({id:t[0]}).then(function(){console.log("\u9884\u52a0\u8f7d\u63d2\u5c4f\u6210\u529f"),e&&e(!0)}).catch(function(){e&&e(!1)})},e.prototype.showInterstitialAd=function(t,e){var n={id:t,onShowFail:function(){e&&e(!1)},onShowSuccess:function(){e&&e(!0)},onClose:function(){}};a.default.ad.interstitial.show(n)},e.prototype.ShowX=function(t,e){var n=this;this.preloadInterstitialAds([t],function(o){o?n.showInterstitialAd(t,function(t){e&&e(t)}):e&&e(!1)})},e.prototype.destroyInterstitialAd=function(){},e.prototype.GetBannerHeight=function(){return cc.sys.isBrowser?this.bannerHigth:this.bannerHigth*cc.winSize.height/c.GlobalDefines.WindowHeight},e.prototype.SetADSize=function(t){this.hortroBanner&&(this.hortroBanner.style=t)},e.prototype.HideAllAD=function(){t.prototype.HideAllAD.call(this),this.hortroBanner&&this.hortroBanner.hide()},e.prototype.getTrackEventName=function(t){return t},e.prototype.getTasks=function(t){a.default.wall.getTaskList().then(function(e){t(e)}).catch(function(){t(void 0)})},e.prototype.logOpenTaskPanel=function(){a.default.wall.logOpenTaskPanel()},e.prototype.goTask=function(t,e){a.default.wall.goTask(t).then(function(t){e&&e(t)}).catch(function(){e&&e(void 0)})},e.prototype.getAward=function(t,e){a.default.wall.getAward(t).then(function(t){e&&e(t)}).catch(function(t){console.log("[HortorSdkV2 getAward] err:",t),e&&e(void 0)})},e.prototype.getSwitchData=function(t){return __awaiter(this,void 0,Promise,function(){return __generator(this,function(){return a.default.gm.getSwitchData({switchIdList:[t]}).then(function(e){return e[t]===HSDK.SwitchStatus.Opened?(console.log(t+"\u5f00\u542f"),!0):e[t]===HSDK.SwitchStatus.Closed?(console.log(t+"\u5173\u95ed"),!1):e[t]===HSDK.SwitchStatus.NotConfigured?(console.log(t+"\u6ca1\u6709\u914d\u7f6e\u6b64\u5f00\u5173"),!1):void 0}).catch(function(){return!1}),[2]})})},e}(r.WXSdk);n.HortorSdkV2=l,cc._RF.pop()},{"../../game/consts/GameConfig":"GameConfig","../consts/GlobalDefines":"GlobalDefines","./HSDK/platform":"platform","./WXSdk":"WXSdk"}],HortorSdk:[function(t,e,n){"use strict";cc._RF.push(e,"cc2feTQdyFBQaOImyYbGqQ3","HortorSdk");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.VERIFY=n.HORTOR_EVENT_NAME=n.SHARE_TYPE=n.HortorSdk=void 0;var r,a,c=t("./WXSdk"),s=t("../PlatformManager"),l=t("../NetworkManager"),u=t("../HortorAdManager"),p=t("../G"),h=t("../DataManager"),f=t("../consts/GlobalDefines"),d=t("../../utils/logger"),g=t("../../game/consts/GameConfig"),m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isNewPlayer=!1,e.userIndex="",e.env_Test="Test",e.env_Prod="Prod",e.env=e.env_Test,e.hortorWallTasksList=[],e}return i(e,t),e.prototype.init=function(e){if(t.prototype.init.call(this,e),this.isWxPlatform){this.InitGameEnv(),console.log("[HortorSdk Log] \u5f00\u59cb\u521d\u59cb\u5316");var n=hortor.config;this.sdk=hortor.sdk,console.log("[HortorSdk Log] hortor:",hortor),console.log("[HortorSdk Log] hortor config:",hortor.config),console.log("[HortorSdk Log] hortor sdk:",hortor.sdk),hortor.wxapm,this.logType=this.sdk.getGameLogTypes(),hortor.init(n),u.default.Instance.init()}},e.prototype.initReport=function(){this.isWxPlatform&&this.sdk.init({env:this.env,gameId:g.GameConfig.GameId,gameVersion:g.GameConfig.VER_RES,stdAutoUpload:!l.net.developmentUrl})},e.prototype.setLogind=function(){var t=h.dm.openId;this.sdk.wallSDK.setLogind(t,1,"")},e.prototype.InitGameEnv=function(){return"Prod"},e.prototype.CustomEventPost=function(t,e,n){if(this.isWxPlatform)try{this.sdk.postGameLog({logType:this.logType.TGA,eventType:t,eventName:e,extend:n})}catch(o){d.Logger.warn(o)}},e.prototype.userDataSetPost=function(t,e){d.Logger.debug("[HortorSdk userDataSetPost]"),this.CustomEventPost("user_set",t,e)},e.prototype.trackEventPost=function(t,e){this.CustomEventPost("track",t,e)},e.prototype.registerUserPost=function(t,e){this.isNewPlayer&&this.CustomEventPost("track",t,e)},e.prototype.GetSdk=function(){return this.sdk},e.prototype.sdkLogin=function(t){this.weakLogin(t)},e.prototype.weakLogin=function(t){var e=this;d.Logger.debug("[HortorSdk] \u8c03\u7528\u4e86sdkLogin\u65b9\u6cd5"),this.sdk.weakLogin().then(function(n){d.Logger.debug("[HortorSdk] weak login data:",n),n&&(d.Logger.debug("[HortorSdk]  weak login data =",n,n.userInfo),e.setGameUserInfo()),t&&t(n)}).catch(function(){t&&t(void 0)})},e.prototype.updateUserInfo=function(){this.sdk.updateUserInfo().then(function(t){d.Logger.debug("[HortorSdk] \u66f4\u65b0\u6210\u529f\uff01",t)}).catch(function(t){d.Logger.debug("[HortorSdk] \u66f4\u65b0\u5931\u8d25\uff01",t)})},e.prototype.reportUserResources=function(t){null==t?(t=h.dm.getTgaData(),this.userDataSetPost(a.USER_RES,t)):this.userDataSetPost(a.USER_RES,t)},e.prototype.reportUserSkillData=function(t){this.userDataSetPost(a.USER_SKILL,{step:["hp","damage","defense","add_blood","attack","block","add_blood_cd","attack_cd","block_cd"][t.step],price:t.price,LEVE:t.LEVE,player_id:parseInt(this.userIndex)})},e.prototype.checkVideoAd=function(t,e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return this.isWxPlatform?(this.GetSdk().checkVideoAd({adUnitId:e,multiton:!1}).then(function(){console.log("\u89c6\u9891\u5e7f\u544a\u53ef\u7528"),t&&t(!0)}).catch(function(){console.log("\u89c6\u9891\u5e7f\u544a\u4e0d\u53ef\u7528"),t&&t(!1)}),[2]):[2]})})},e.prototype.showVideoAd=function(t,e){var n=this;this.isWxPlatform?this.checkVideoAd(function(o){o?n.GetSdk().showVideoAd({adUnitId:e,multiton:!1,onClose:function(e){d.Logger.debug("[HortorSdk] \u89c6\u9891\u5e7f\u544a\u5173\u95ed\uff0c\u4e14"+(!e||e.isEnded?"\u5df2\u770b\u5b8c":"\u672a\u770b\u5b8c")),e&&e.isEnded||void 0===e?t(c.RewardAdStatus.Complete):t(c.RewardAdStatus.Fail),n.ResumeGame()}}).then(function(){d.Logger.debug("[HortorSdk] \u64ad\u653e\u5e7f\u544a\u6210\u529f"),n.showVideoSuccess(e),n.PauseGame()}).catch(function(e){n.ResumeGame(),d.Logger.debug("[HortorSdk]\u89c6\u9891\u64ad\u653e\u5931\u8d25\uff01",e),t(c.RewardAdStatus.Fail)}):(console.log("[HortorSdk] \u6ca1\u6709\u5e7f\u544a"),t(c.RewardAdStatus.None))},e):t(c.RewardAdStatus.Complete)},e.prototype.setGameUserInfo=function(){if(this.isWxPlatform){d.Logger.debug("[hortor sdk] setGameUserInfo");var t=h.dm.getTgaData();this.GetSdk().setGameUserInfo(t)}},e.prototype.shareMessage=function(t,e,n){void 0===n&&(n=r.DEFAULT),this.isWxPlatform?this.sdk.shareMessage({shareType:n,query:e,success:function(){d.Logger.debug("[HortorSdk] \u5206\u4eab\u6210\u529f"),t(!0)},fail:function(e){d.Logger.debug("[HortorSdk] \u5206\u4eab\u5931\u8d25",e),t(!1)}}):t(!0)},e.prototype.onShareAppMessage=function(t,e){this.sdk.onShareAppMessage(function(){return{title:t,imageUrl:e}})},e.prototype.getSubscribeMessageCount=function(t){var e=t;this.sdk.getSubscribeMessageCount().then(function(t){d.Logger.debug("\u6a21\u677f "+e+" \u8ba2\u9605\u6b21\u6570\u4e3a\uff1a"+(t[e]||0))}).catch(function(){d.Logger.debug("\u83b7\u53d6\u8ba2\u9605\u6b21\u6570\u5931\u8d25")})},e.prototype.jumpPay=function(){},e.prototype.midasPay=function(){},e.prototype.tryPay=function(){},e.prototype.SuceessPay=function(){},e.prototype.showVideoSuccess=function(t){this.trackEventPost(a.SHOW_VIDEO_SUCCESS,{player_id:parseInt(this.userIndex),adId:t,platform:f.GlobalDefines.platform,channel:h.dm.channel}),d.Logger.debug("showVideoSuccess channel:",h.dm.channel)},e.prototype.tryPayVipCard=function(t,e,n){this.trackEventPost(e,{scene:t,goods_id:n,player_id:parseInt(this.userIndex),platform:f.GlobalDefines.platform})},e.prototype.HortorWallTasks=function(t){var e=this;this.isWxPlatform?hortor.sdk.getWallInstance().getTasks({playerOptions:{}}).then(function(n){console.log("\u83b7\u53d6\u79ef\u5206\u5899\u5230\u6570\u636e",n),e.hortorWallTasksList=n.tasks,t&&t(!0)}).catch(function(t){console.log("\u83b7\u53d6\u79ef\u5206\u5899\u4efb\u52a1\u5931\u8d25.",t)}):t&&t(!1)},e.prototype.scoreWallGoTask=function(t){hortor.sdk.getWallInstance().goTask(t).then(function(){console.log("\u53bb\u505a\u4efb\u52a1\u4e86")}).catch(function(t){console.log("\u505a\u4efb\u52a1\u5931\u8d25.",t)})},e.prototype.scoreWallGetAward=function(t,e){hortor.sdk.getWallInstance().getAward(t).then(function(t){d.Logger.debug("\u9886\u53d6\u5956\u52b1\u6210\u529f"),d.Logger.debug("\u5956\u52b1\u7269\u54c1"+t.awardValue+" \u4e2a "+t.awardId),e&&e(!0,t.awardValue)}).catch(function(t){d.Logger.debug("\u505a\u4efb\u52a1\u5931\u8d25.",t),e&&e(!1,0)})},e.prototype.getScoreWallList=function(){return this.hortorWallTasksList},e.prototype.reportLogOpenTaskPanel=function(){this.isWxPlatform&&hortor.sdk.getWallInstance().logOpenTaskPanel()},e.prototype.goCustomer=function(){this.GetSdk().goCustomer()},e.prototype.preloadInterstitialAds=function(t,e){this.GetSdk().preloadInterstitialAds({adUnitIds:t,next:e})},e.prototype.showInterstitialAd=function(t,e){this.GetSdk().showInterstitialAd({adUnitId:t,next:e})},e.prototype.destroyInterstitialAd=function(){this.GetSdk().destroyInterstitialAd()},e.prototype.getClipboardData=function(){this.GetSdk().get},e.prototype.GetBannerHeight=function(){return cc.sys.isBrowser?this.bannerHigth:this.bannerHigth*cc.winSize.height/f.GlobalDefines.WindowHeight},e.prototype.SetADSize=function(t){this.hortroBanner&&(this.hortroBanner.style=t),e.gridAd&&(e.gridAd.style=t)},e.prototype.HideAllAD=function(){this.hortroBanner&&this.hortroBanner.hide(),e.gridAd&&e.gridAd.hide()},e.prototype.ShowBannerBySizePolling=function(t,e,n){return __awaiter(this,void 0,void 0,function(){var o,i;return __generator(this,function(r){switch(r.label){case 0:o=0,r.label=1;case 1:return o<t.length?(i=o,[4,this.ShowBannnerBySize(t[i],e)]):[3,4];case 2:if(r.sent())return n&&n(!0),[3,4];r.label=3;case 3:return o++,[3,1];case 4:return n&&n(!1),[2]}})})},e.prototype.ShowBannnerBySize=function(t,e){var n=this;return new Promise(function(o){if(s.default.iswxGame){n.HideAllAD();var i=n.sdk.createBannerAd({adUnitId:t,style:e});n.hortroBanner=i,i.onError(function(t){console.log("banner show error:"+t.errMsg+"code:"+t.errCode),o(!1)}),i.onResize(function(t){console.log("\u5e7f\u544a\u5c3a\u5bf8\u53d8\u5316",t.width,t.height,f.GlobalDefines.WindowWidth),i.style.left=(f.GlobalDefines.WindowWidth-t.width)/2;var o=f.GlobalDefines.WindowHeight-t.height;e.top>o&&(i.style.top=o),n.bannerHigth=t.height,p.GlobalEvent.emit(c.EventBannerSizeChanged.NAME,t)}),i.onLoad(function(){i.show().then(function(){console.log("banner\u5c55\u793a\u6210\u529f"),o(!0)}).catch(function(t){console.log("banner\u5c55\u793a\u5931\u8d25 err:",t),o(!1)})})}else o(!0)})},e.prototype.ShowBannner=function(t,e,n){var o=this;if(this.HideAllAD(),!s.default.isH5){var i=this.sdk.createBannerAd({adUnitId:t,style:e,adIntervals:30});this.hortroBanner=i,i.onError(function(t){console.log("\u5fae\u4fe1\u56de\u6389\uff0c\u65e0\u6cd5\u83b7\u5f97\u5e7f\u544a"),console.log("error:"+t.errMsg+"code:"+t.errCode),o.ShowGrid(e)}),i.onResize(function(t){console.log("\u5e7f\u544a\u5c3a\u5bf8\u53d8\u53161",t.width,t.height),o.bannerHigth=t.height,n&&n(t,i),p.GlobalEvent.emit(c.EventBannerSizeChanged.NAME,t)}),i.show()}},e.prototype.PreloadX=function(t){void 0===t&&(t="adunit-e4a7edf3ecd68b0a"),this.sdk.preloadInterstitialAds({adUnitIds:[t]})},e.prototype.ShowX=function(e,n){t.prototype.ShowX.call(this,e,n)},e.prototype.ShowGrid=function(t,n){var o=this,i=this.sdk.createGridAd({adUnitId:"adunit-760135a7fd78d2d5",style:t,adTheme:"black",gridCount:5,adIntervals:30});i.onError(function(){console.log("\u6ca1\u6709\u683c\u5b50\u5e7f\u544a"),p.GlobalEvent.emit(c.EventGridNoAD.NAME)}),i.onResize(function(t){n&&n(t,i),o.bannerHigth=t.height,p.GlobalEvent.emit(c.EventBannerSizeChanged.NAME,t)}),i&&i.show().then(function(){e.gridAd=i,console.log("\u5c55\u793agrid\u6210\u529f")}).catch(function(t){console.log("\u5c55\u793agrid\u5931\u8d25",t)})},e.prototype.getTrackEventName=function(t){return a[t]||t},e}(c.WXSdk);n.HortorSdk=m,function(t){t.DEFAULT="default",t.BATTLE="battle",t.RETRY="retry",t.SHOP="shop",t.RANK="rank",t.FAIL="fail",t.TOWER="tower",t.EVENT_ROPE="event_rope"}(r=n.SHARE_TYPE||(n.SHARE_TYPE={})),function(t){t.SDK_INIT="sdk_init",t.SDK_LOGIN="sdk_login",t.REGISTER="register",t.SDK_SHARE="sdk_share",t.SDK_SHARE_FRIEND="sdk_share_to_friend",t.SDK_VIDEOAD_SHOW="sdk_video_ad_show",t.USER_RES="user_res",t.USER_SKILL="skill",t.USER_STAGE_PROGRESS="user_level_stage",t.NETWORK_POST_EVENT="server_post",t.YDGAME_LOGIN="login",t.CREATE_ROLE="creat_role",t.SHOP_OPEN_BOX="shop_get_box",t.SHOP_GET_GOLD="shop_get_coin",t.SET_USERINFO="set_user_info",t.BATTLE_START="battle_star",t.CONSUME_GOLD="consume_gold",t.CONSUME_DIAMOND="consume_diamond",t.OFFLINE="bonuses_offline",t.GET_ITEM="tools",t.SHOP_GET_DIAMOND="shop_get_diamond",t.SHOW_VIDEO_SUCCESS="show_video_success"}(a=n.HORTOR_EVENT_NAME||(n.HORTOR_EVENT_NAME={})),function(t){t.BOX="U77PfWSHt6UuLIwdhAPwHcuVDaI4GK1uCu6K3sVMdPI",t.OFFONLINE="JatGW6bkxZxvZtEwC7f9xh6zRQbVlA2A25EF7ofoccQ",t.NEWVERSION="rhn8F0ZpJT7oDesUy4RAUspAI_Y-lu06PFJYxi4sTWE",t.WORLDBOSSAWARD="_jU05o4d9wpRsuGwGvI-Elja7sVk57ruFDQG7k77fYk"}(n.VERIFY||(n.VERIFY={})),cc._RF.pop()},{"../../game/consts/GameConfig":"GameConfig","../../utils/logger":"logger","../DataManager":"DataManager","../G":"G","../HortorAdManager":"HortorAdManager","../NetworkManager":"NetworkManager","../PlatformManager":"PlatformManager","../consts/GlobalDefines":"GlobalDefines","./WXSdk":"WXSdk"}],HurryLoading:[function(t,e,n){"use strict";cc._RF.push(e,"b9c50tHlcJOdK2leetq6rTi","HurryLoading");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e.timeOut=-1,e}return i(e,t),e.prototype.show=function(){this.node.active=!0},e.prototype.hide=function(){this.node.active=!1},e.prototype.onEnable=function(){var t=this;this.icon.active=!1,this.timeOut=setTimeout(function(){t.icon.active=!0},3e3)},e.prototype.onDisable=function(){clearTimeout(this.timeOut)},r([s(cc.Node)],e.prototype,"icon",void 0),r([c],e)}(cc.Component);n.default=l,cc._RF.pop()},{}],ISeed:[function(t,e,n){"use strict";cc._RF.push(e,"60c677XcYNIlY2hc07ngHVx","ISeed");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.Get=function(t,e){return t.GetJson()[e]},e.GetAll=function(t){return t.GetJson()},r([c],e)}(cc.Component));n.default=s,cc._RF.pop()},{}],Item:[function(t,e,n){"use strict";cc._RF.push(e,"b3632Mdui9J06XdzQZyjHmh","Item");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../GameUtils"),c=t("../../utils/Utils"),s=t("../../utils/logger"),l=t("../../common/GlobalEvents"),u=t("../../common/G"),p=t("../../common/DataManager"),h=t("../../common/consts/GlobalDefines"),f=cc._decorator,d=f.ccclass,g=f.property,m=function(t){function e(){var e=t.call(this)||this;return e.contentNode=null,e.testLabel=null,e.videoBtn=null,e.row=-1,e.col=-1,e.type=h.ItemType.Free,e.endPos=null,e.colItemCount=[4,5,6,5,4],e.bornPos=new cc.Vec2,e.centerPos=new cc.Vec2(0,100),e.maxParticalRes=null,e}return i(e,t),e.prototype.Init=function(t){this.row=t.row,this.col=t.col,this.endPos=t.pos,this.type=t.type,this.tryDown(),this.testLabel.string=this.row+", "+this.col},e.prototype.changePos=function(t){var e=this;return new Promise(function(n){e.row=t.row,e.col=t.col,e.endPos=t.pos,e.testLabel.string=e.row+", "+e.col,cc.tween(e.node).delay(.25*Math.random()).to(.8,{x:0,y:0,scale:1},{easing:cc.easing.backOut}).delay(.05).to(.5,{position:t.pos,scale:1},{easing:cc.easing.backOut}).call(function(){n(null)}).start()})},e.prototype.onClicked=function(){if(this.type!=h.ItemType.Honey){a.GameUtils.playSoundBtnClicked(),this.videoBtn.active=!1;var t=new l.ItemClicked(this);u.GlobalEvent.dispatchEvent(t)}},e.prototype.onEnable=function(){u.GlobalEvent.on(l.EventTipEnd.NAME,this.selectTipEnd,this),u.GlobalEvent.on(l.EventBottleLevelUp.NAME,this.bottleLevelUp,this)},e.prototype.onDisable=function(){u.GlobalEvent.off(l.EventTipEnd.NAME,this.selectTipEnd,this),u.GlobalEvent.off(l.EventBottleLevelUp.NAME,this.bottleLevelUp,this)},e.prototype.bottleLevelUp=function(){this.checkItemImage()},e.prototype.initByType=function(t){return this.type=t,this.contentNode.active=!0,this.tryDown()},e.prototype.tryDown=function(){return this.bornPos.y=this.endPos.y+h.GlobalDefines.ItemDisY*this.colItemCount[this.col],this.bornPos.x=this.endPos.x,this.node.position=this.bornPos,this.initContent(),this.moveToTargetPos()},e.prototype.moveToTargetPos=function(){var t=this;return new Promise(function(e){t.node.opacity=0;var n=t.colItemCount[t.col],o=n-t.row-1,i=0;o>0&&(i=.1*o),setTimeout(function(){t.node.opacity=255},1e3*i),cc.tween(t.node).delay(.03*t.row).to(.1*n,{y:t.endPos.y-40},{easing:cc.easing.sineIn}).by(.09,{y:40},{easing:cc.easing.sineIn}).call(function(){e(null)}).start()})},e.prototype.initContent=function(){switch(this.node.getComponent(cc.Button).enabled=!0,this.contentNode.active=!0,this.videoBtn.active=!1,this.type){case h.ItemType.Free:this.node.getComponent(cc.Button).enabled=!1,this.contentNode.active=!1;break;case h.ItemType.Honey:this.node.getComponent(cc.Button).enabled=!1}this.checkItemImage()},e.prototype.checkItemImage=function(){var t=this.getUrlByType(this.type);""!=t&&c.Utils.updateNodeSpriteFrame("/images/gird/"+t,this.contentNode,!1)},e.prototype.getUrlByType=function(t){var e=p.dm.player.bottle,n="";switch(t){case h.ItemType.One:n=e+"_1";break;case h.ItemType.Two:n=e+"_2";break;case h.ItemType.Three:n=e+"_3";break;case h.ItemType.Four:n=e+"_4";break;case h.ItemType.Five:n=e+"_5";break;case h.ItemType.Honey:n="hive_grid_full";break;case h.ItemType.BeeTip:n="ico_bee",this.videoBtn.active=!0;break;case h.ItemType.Max:n=""+e}return n},e.prototype.tryMove=function(t,e,n){var o=this;this.type=h.ItemType.Free;var i=t.x-this.node.x,r=t.y-this.node.y;cc.tween(this.contentNode).delay((e-n)*h.GlobalDefines.OneStepTm).by(h.GlobalDefines.OneStepTm,{x:i,y:r}).call(function(){o.contentNode.active=!1,o.contentNode.x=0,o.contentNode.y=0}).start()},e.prototype.changeToFree=function(){this.type=h.ItemType.Free,this.initContent()},e.prototype.itemMoveDown=function(t,e){return this.type=e,this.initContent(),this.contentNode.active=!0,this.contentNode.x=t[0].node.x-this.node.x,this.contentNode.y=t[0].node.y-this.node.y,this.stepDown(t)},e.prototype.stepDown=function(t){var e=this;return new Promise(function(n,o){for(var i=cc.tween(e.contentNode),r=e.node.x,a=e.node.y,c=1;c<t.length;c++){var s=t[c].node.x-r-e.contentNode.x,l=t[c].node.y-a-e.contentNode.y;i.by(h.GlobalDefines.HoneyOneStepTm,{x:s,y:l}),r+=s,a+=l}i.call(function(){e.honeyDownEndEff().then(function(){n(null)}).catch(function(){o()})}),i.start()})},e.prototype.isFree=function(){return this.type==h.ItemType.Free},e.prototype.isHoney=function(){return this.type==h.ItemType.Honey},e.prototype.isBeeTip=function(){return this.type==h.ItemType.BeeTip},e.prototype.levelUp=function(){return __awaiter(this,void 0,void 0,function(){var t=this;return __generator(this,function(){return[2,new Promise(function(e,n){if(t.type!=h.ItemType.Honey){if(t.type==h.ItemType.Five)return t.loadMaxLevelParticle(),void Promise.resolve().then(t.moveToCenter.bind(t)).then(t.centerBomb.bind(t)).then(t.centerParticle.bind(t)).then(function(){e(!0)}).catch(function(){s.Logger.error("level up max eff error"),n(null)});t.type+=1,t.initContent(),t.levelUpEff().then(function(){return e(!1)})}else e(!1)})]})})},e.prototype.moveToCenter=function(){var t=this,e=new cc.Node;e.addComponent(cc.Sprite);var n=this.getUrlByType(h.ItemType.Max);if(""!=n)return c.Utils.updateNodeSpriteFrame("/images/gird/"+n,e,!1),this.type=h.ItemType.Free,this.initContent(),this.node.parent.addChild(e),e.position=this.node.position,new Promise(function(n){return __awaiter(t,void 0,void 0,function(){return __generator(this,function(){return cc.tween(e).delay(.1).to(.5,{position:this.centerPos},{easing:cc.easing.sineInOut}).call(function(){e.removeFromParent(),n(null)}).start(),[2]})})});s.Logger.error("move to cneter error")},e.prototype.centerBomb=function(){var t=this;return new Promise(function(e){return __awaiter(t,void 0,void 0,function(){var t,n,o,i,r=this;return __generator(this,function(l){switch(l.label){case 0:return[4,c.Utils.loadPefab("prefab/game/ui/\u82b1\u6ee1\u7ea7\u7206\u70b8_1_\u914d\u5408eff")];case 1:return(t=l.sent())||(s.Logger.error("bomb prefab fail"),this.type=h.ItemType.Free,this.initContent(),this.contentNode.scale=1,e(null)),n=cc.instantiate(t),this.node.parent.addChild(n),""==(o=this.getUrlByType(h.ItemType.Max))?(s.Logger.error("getUrlByType error"),e(null),[2]):(c.Utils.updateNodeSpriteFrame("/images/gird/"+o,n.getChildByName("ani").getChildByName("flower"),!1),c.Utils.updateNodeSpriteFrame("/images/gird/"+o,n.getChildByName("ani").getChildByName("flower_highlight"),!1),this.contentNode.active=!1,n.position=this.centerPos,(i=n.getComponent(cc.Animation)).play("\u82b1\u6ee1\u7ea7\u7206\u70b8"),setTimeout(function(){a.GameUtils.playSFX("\u82b1\u74e3\u7206\u70b81")},1420),setTimeout(function(){e(null)},1500),i.on(cc.Animation.EventType.FINISHED,function(){r.type=h.ItemType.Free,r.initContent(),n.removeFromParent()}),[2])}})})})},e.prototype.loadMaxLevelParticle=function(){var t="prefab/game/ui/eff_flower_boom_"+p.dm.player.bottle,e=c.Utils.loadPefab(t);e||s.Logger.error("particle prefab fail"),this.maxParticalRes=e},e.prototype.centerParticle=function(){var t=this;return new Promise(function(e){return __awaiter(t,void 0,void 0,function(){var t,n,o;return __generator(this,function(i){switch(i.label){case 0:return null==this.maxParticalRes?[3,2]:(t="prefab/game/ui/eff_flower_boom_"+p.dm.player.bottle,[4,c.Utils.loadPefab(t)]);case 1:return(n=i.sent())||(s.Logger.error("particle prefab fail"),e(null)),o=cc.instantiate(n),this.node.parent.addChild(o),o.position=this.centerPos,setTimeout(function(){e(null)},900),[3,3];case 2:o=cc.instantiate(this.maxParticalRes),this.node.parent.addChild(o),o.position=this.centerPos,setTimeout(function(){e(null)},1e3),i.label=3;case 3:return[2]}})})})},e.prototype.levelUpEff=function(){return __awaiter(this,void 0,void 0,function(){var t=this;return __generator(this,function(){return[2,new Promise(function(e){t.contentNode.scale=.3,cc.tween(t.contentNode).to(.1,{scale:.8}).to(.1,{scaleX:.85,scaleY:1.15}).to(.1,{scaleX:1.1,scaleY:.9}).to(.1,{scaleX:.95,scaleY:1.05}).to(.1,{scaleX:1,scaleY:1}).call(function(){e(null)}).start()})]})})},e.prototype.honeyDownEndEff=function(){var t=this;return new Promise(function(e){t.contentNode.scale=.3,cc.tween(t.contentNode).to(.1,{scale:.8}).to(.1,{scaleX:.85,scaleY:1.15}).to(.1,{scaleX:1.1,scaleY:.9}).to(.1,{scaleX:.95,scaleY:1.05}).to(.1,{scaleX:1,scaleY:1}).call(function(){e(null)}).start()})},e.prototype.honeDropToBottle=function(){var t=this;return new Promise(function(e){cc.tween(t.contentNode).to(1,{opacity:0}).call(function(){t.type=h.ItemType.Free,t.initContent(),t.contentNode.opacity=255,e(null)}).start()})},e.prototype.bomb=function(){var t=this;return new Promise(function(e){return __awaiter(t,void 0,void 0,function(){var t,n,o,i=this;return __generator(this,function(r){switch(r.label){case 0:return console.log("item bomb begin"),[4,c.Utils.loadPefab("prefab/game/ui/\u82b1\u6ee1\u7ea7\u7206\u70b8_1_\u914d\u5408eff")];case 1:return(t=r.sent())||(s.Logger.error("bomb prefab fail"),this.type=h.ItemType.Free,this.initContent(),this.contentNode.scale=1,e(null)),n=cc.instantiate(t),this.node.parent.addChild(n),n.getChildByName("ani").getChildByName("flower").getComponent(cc.Sprite).spriteFrame=this.contentNode.getComponent(cc.Sprite).spriteFrame,n.getChildByName("ani").getChildByName("flower_highlight").getComponent(cc.Sprite).spriteFrame=this.contentNode.getComponent(cc.Sprite).spriteFrame,this.contentNode.active=!1,n.position=this.node.position,(o=n.getComponent(cc.Animation)).play("\u82b1\u6ee1\u7ea7\u7206\u70b8"),o.on(cc.Animation.EventType.FINISHED,function(){i.type=h.ItemType.Free,i.initContent(),i.contentNode.active=!0,n.removeFromParent(),e(null)}),[2]}})})})},e.prototype.selectTipBegin=function(){this.type!=h.ItemType.Honey&&this.type!=h.ItemType.BeeTip||cc.tween(this.contentNode).to(.1,{opacity:120},{easing:cc.easing.bounceInOut}).start()},e.prototype.selectTipEnd=function(){this.contentNode.opacity>=255||cc.tween(this.contentNode).to(.2,{opacity:255},{easing:cc.easing.bounceInOut}).start()},e.prototype.switchToHoney=function(){this.type=h.ItemType.Honey,this.initContent()},e.prototype.showBeeInto=function(t,e){return __awaiter(this,void 0,void 0,function(){var n,o,i,r=this;return __generator(this,function(p){switch(p.label){case 0:return[4,c.Utils.loadPefab("prefab/game/ui/\u871c\u8702\u98de\u5165")];case 1:return(n=p.sent())?(o=cc.instantiate(n),this.node.parent.addChild(o),o.position=this.node.position,o.angle=90*e,(i=o.getComponent(cc.Animation)).play("\u871c\u8702\u98de\u5165"),a.GameUtils.playSFX("\u871c\u8702\u98de\u5165"),i.on(cc.Animation.EventType.FINISHED,function(){switch(i.currentClip.name){case"\u871c\u8702\u98de\u5165":i.play("\u871c\u8702\u98de\u5165_\u6ce8\u871c"),cc.tween(r.contentNode).to(.1,{scale:.2}).start();break;case"\u871c\u8702\u98de\u5165_\u6ce8\u871c":i.play("\u871c\u8702\u98de\u5165_\u79bb\u573a"),r.contentNode.scale=1,r.type=h.ItemType.Honey,r.initContent();break;case"\u871c\u8702\u98de\u5165_\u79bb\u573a":r.contentNode.scale=1,u.GlobalEvent.dispatchEvent(new l.EventTipEnd),t(),o.removeFromParent()}}),[2]):(s.Logger.error("load \u871c\u8702\u98de\u5165 prefab fail"),[2])}})})},e.prototype.showBeeTipFly=function(t){return __awaiter(this,void 0,void 0,function(){var e,n,o,i=this;return __generator(this,function(r){switch(r.label){case 0:return this.videoBtn.active=!1,[4,c.Utils.loadPefab("prefab/game/ui/\u871c\u8702\u4e0b\u843d\u53d8\u9053\u5177")];case 1:return(e=r.sent())?(this.contentNode.active=!1,n=cc.instantiate(e),this.node.parent.addChild(n),n.position=this.node.position,(o=n.getComponent(cc.Animation)).play("\u871c\u8702\u4e0b\u843d\u53d8\u9053\u5177"),o.once(cc.Animation.EventType.FINISHED,function(){i.contentNode.active=!0,i.type=h.ItemType.Free,i.initContent(),t(),n.removeFromParent()}),[2]):(s.Logger.error("load \u871c\u8702\u4e0b\u843d\u53d8\u9053\u5177 prefab fail"),[2])}})})},e.prototype.getScore=function(){var t=0;switch(this.type){case h.ItemType.One:t=6;break;case h.ItemType.Two:t=7;break;case h.ItemType.Three:t=8;break;case h.ItemType.Four:t=9;break;case h.ItemType.Five:t=10;break;default:t=0}return t},r([g(cc.Node)],e.prototype,"contentNode",void 0),r([g(cc.Label)],e.prototype,"testLabel",void 0),r([g(cc.Node)],e.prototype,"videoBtn",void 0),r([d],e)}(cc.Component);n.default=m,cc._RF.pop()},{"../../common/DataManager":"DataManager","../../common/G":"G","../../common/GlobalEvents":"GlobalEvents","../../common/consts/GlobalDefines":"GlobalDefines","../../utils/Utils":"Utils","../../utils/logger":"logger","../GameUtils":"GameUtils"}],Jumpjump3d:[function(t,e,n){"use strict";cc._RF.push(e,"abdc7i4YHRJC7bOrM1bNwEQ","Jumpjump3d");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.EventOnBoom=void 0;var a=t("../G"),c=t("../../utils/Utils"),s=t("../../game/GameUtils"),l=function(t){function e(n){var o=t.call(this,e.NAME,!0)||this;return o.tType=n,o}return i(e,t),e.NAME="EventOnBoom",e}(cc.Event.EventCustom);n.EventOnBoom=l;var u=cc._decorator,p=u.ccclass,h=(u.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dx=0,e.dy=0,e.dz=170,e.rate=.45,e.groundLine=0,e.scale=1,e.icon=null,e.isFading=!1,e.curStatus=0,e.nextStatus=0,e.tWPos=void 0,e}var n;return i(e,t),n=e,e.createBySpr=function(t,e,n,o,i,r,a){return __awaiter(this,void 0,void 0,function(){var c,s;return __generator(this,function(){return c=new cc.Node,(s=c.addComponent(cc.Sprite)).sizeMode=cc.Sprite.SizeMode.RAW,s.spriteFrame=e,s.node.y=s.node.height/2,this._create(t,c,n,o,i,r,a),[2]})})},e.createByStr=function(t,e,n,o,i,r,a){return __awaiter(this,void 0,void 0,function(){var c,s;return __generator(this,function(){return(c=new cc.Node).color=cc.color(249,229,114,255),(s=c.addComponent(cc.Label)).fontSize=40,s.enableBold=!0,s.string=e,this._create(t,c,n,o,i,r,a),[2]})})},e._create=function(t,e,o,i,r,a,l){return __awaiter(this,void 0,void 0,function(){var u,p,h,f;return __generator(this,function(){return u=new cc.Node,(p=new cc.Node).y=i,p.scaleY=.2,p.scaleX=.3,p.color=cc.Color.BLACK,h=p.addComponent(cc.Sprite),t?(h.spriteFrame=t,p.opacity=90):p.opacity=0,u.addChild(p),u.addChild(e),f=u.addComponent(n),u.position=o,f.groundLine=i,f.scale=null==r?c.Utils.randomFloat(.8,1.2):r,f.tWPos=a,f.tType=l,s.GameUtils.addEffectAR(u),[2]})})},e.prototype.onLoad=function(){var t=this;this.dz=c.Utils.randomIntInclusive(this.dz/2,this.dz);var e=this.dz/this.rate;this.dx=c.Utils.randomIntInclusive(-e,e),this.dy=.6*c.Utils.randomIntInclusive(-e,e),this.node.scale=this.scale,this.icon=this.node.children[1];var n=c.Utils.randomFloat(.15,.25),o=c.Utils.randomFloat(.2,.4);cc.tween(this.node).by(o,{x:this.dx,y:this.dy},{easing:cc.easing.sineOut}).delay(n).call(function(){if(t.tWPos){var e=t.node.parent.convertToNodeSpaceAR(t.tWPos),n=t.node.scale;cc.tween(t.node).delay(.3).to(.4,{position:e,scale:.8*n}).call(function(){a.GlobalEvent.dispatchEvent(new l(t.tType)),t.close()}).start()}else cc.tween(t.node).to(.15,{opacity:0}).call(function(){t.close()}).start()}).start()},e.prototype.jump=function(t,e){var n=c.Utils.randomFloat(.13,.19),o=Math.max(0,t-2*n);cc.tween(this.icon).to(n,{y:this.dz,angle:95*e,scale:1.5},{easing:cc.easing.sineOut}).to(n,{y:this.groundLine,angle:185*e,scale:1.3},{easing:cc.easing.sineIn}).to(o,{angle:0},{easing:cc.easing.sineOut}).start()},e.prototype.close=function(){c.Utils.removeNode(this.node)},n=r([p],e)}(cc.Component));n.default=h,cc._RF.pop()},{"../../game/GameUtils":"GameUtils","../../utils/Utils":"Utils","../G":"G"}],Jumpjump:[function(t,e,n){"use strict";cc._RF.push(e,"a55aaPhoP5Jp4M5bhzyUAZQ","Jumpjump");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../consts/GlobalDefines"),c=t("../../utils/Utils"),s=t("../../game/common/UIManager"),l=cc._decorator,u=l.ccclass,p=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spdx=6,e.spdy=18,e.groundNum=0,e.groundLine=0,e.scale=1,e.isFading=!1,e.curStatus=0,e.nextStatus=0,e}var n;return i(e,t),n=e,e.create=function(t,e,o,i){return void 0===i&&(i=1),__awaiter(this,void 0,void 0,function(){var r,a,c,l;return __generator(this,function(){return r=new cc.Node,a=new cc.Node,r.addChild(a),(c=a.addComponent(cc.Sprite)).sizeMode=cc.Sprite.SizeMode.RAW,c.spriteFrame=t,c.node.y=c.node.height/2,l=r.addComponent(n),r.position=e,l.scale=i,l.initNPos=s.ui.getLayer(s.UILayer.Effect).convertToNodeSpaceAR(cc.v2(r.x,r.y)),l.groundLine=l.initNPos.y+o,s.ui.addEffectAR(r),[2]})})},e.prototype.onLoad=function(){this.spdx=c.Utils.randomIntInclusive(-this.spdx,this.spdx),this.spdy=c.Utils.randomIntInclusive(this.spdy-10,this.spdy),this.node.scale=this.scale},e.prototype.close=function(){c.Utils.removeNode(this.node)},e.prototype.update=function(){if(-1!=this.nextStatus)switch(this.curStatus=this.nextStatus,this.nextStatus=-1,this.curStatus){case 0:this.spdx=c.Utils.randomIntInclusive(-this.spdx,this.spdx),this.spdy=c.Utils.randomIntInclusive(0,this.spdy);break;case 1:this.node.y=this.groundLine,this.spdy=Math.abs(this.spdy)*c.Utils.randomFloat(.4,.6);break;case 2:this.close()}switch(this.curStatus){case 0:this.node.y<this.groundLine&&(this.nextStatus=1),this.spdy-=.6,this.node.x+=this.spdx,this.node.y+=this.spdy;break;case 1:this.node.y<-a.GlobalDefines.ScreenHeight/2&&(this.nextStatus=2),this.spdy-=.6,this.node.x+=this.spdx,this.node.y+=this.spdy}},n=r([u],e)}(cc.Component));n.default=p,cc._RF.pop()},{"../../game/common/UIManager":"UIManager","../../utils/Utils":"Utils","../consts/GlobalDefines":"GlobalDefines"}],KongDaoSdk:[function(t,e,n){"use strict";cc._RF.push(e,"09e52c/U5ZPCI9pqMgOIxa0","KongDaoSdk");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.KD_EVENT_NAME=n.KongDaoSdk=void 0;var r,a=t("./WXSdk"),c=t("../../game/consts/GameConfig"),s=window.sk,l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.init=function(e){t.prototype.init.call(this,e);var n=c.GameConfig.cfg.appid;s.init(n,"cocos","wechat",1)},e.prototype.initReport=function(){},e.prototype.trackEventPost=function(t,e){s.dotEvent(t,e)},e.prototype.getTrackEventName=function(t){return r[t]||t},e}(a.WXSdk);n.KongDaoSdk=l,function(t){t.GAME_INIT="10\u79d2\u7528\u6237",t.ITEM_RESET_COIN_CLICKED="\u9053\u5177-\u6362\u4f4d-\u91d1\u5e01\u70b9\u51fb",t.ITEM_RESET_AD_CLICKED="\u9053\u5177-\u6362\u4f4d-\u89c6\u9891\u70b9\u51fb",t.ITEM_TIP_COIN_CLICKED="\u9053\u5177-\u63d0\u793a-\u91d1\u5e01\u70b9\u51fb",t.ITEM_TIP_AD_CLICKED="\u9053\u5177-\u63d0\u793a-\u89c6\u9891\u70b9\u51fb",t.BTN_CHALLENGE_CLICKED="\u70b9\u51fb\u6311\u6218",t.STAGE_WIN="\u8fc7\u5173",t.CHALLENGE_WIN="\u6311\u6218\u80dc\u5229",t.RESULT_X="\u7ed3\u7b97-\u63d2\u5c4f\u5c55\u793a"}(r=n.KD_EVENT_NAME||(n.KD_EVENT_NAME={})),cc._RF.pop()},{"../../game/consts/GameConfig":"GameConfig","./WXSdk":"WXSdk"}],Launch:[function(t,e,n){"use strict";cc._RF.push(e,"81813BRgT1By4SK63YjIhSa","Launch");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.background=null,e}return i(e,t),e.prototype.start=function(){cc.director.loadScene("game")},r([s(cc.Node)],e.prototype,"background",void 0),r([c],e)}(cc.Component);n.default=l,cc._RF.pop()},{}],LevelData:[function(t,e,n){"use strict";cc._RF.push(e,"481f55U6m1EY5vKuFYVIu8R","LevelData"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){}return t.prototype.load=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return[2]})})},t.prototype.initNextPart=function(){},t}();n.default=o,cc._RF.pop()},{}],ListCellBase:[function(t,e,n){"use strict";cc._RF.push(e,"4c914cT+bFEpoacs/JjEH6a","ListCellBase");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.init=function(t){this.data=t},r([c],e)}(cc.Component));n.default=s,cc._RF.pop()},{}],LoadingScene:[function(t,e,n){"use strict";cc._RF.push(e,"0bda9Cp/PtHB7hgUAqwW8qN","LoadingScene");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../GameUtils"),c=t("../consts/GameConfig"),s=t("../../utils/Utils"),l=t("../../utils/logger"),u=t("../../common/SceneManager"),p=t("../../common/PlatformUtil"),h=t("../../common/PlatformManager"),f=t("../../common/NetworkManager"),d=t("../../common/GameManager"),g=t("../../common/DataManager"),m=t("../../common/consts/GlobalDefines"),y=t("../../common/comp/SceneLoadingUI"),v=t("../../common/AudioManager"),_=t("../../hagoSdk/HagoSdk"),b=cc._decorator,w=b.ccclass,S=b.property,E=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lb_ver=null,e}var n;return i(e,t),n=e,e.GetType=function(){return u.SceneType.Loading},e.prototype.startLoading=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){var e=this;switch(t.label){case 0:return this.lb_ver.string="v"+c.GameConfig.VER_RELEASE+(c.GameConfig.isDebug()?" \u6d4b\u8bd5\u7248":""),d.default.instance.isInited=!1,u.sm.curScene=this,[4,_.default.instance.initLoadGame(1,function(){e.initScene()})];case 1:return t.sent(),[2]}})})},e.prototype.getNode=function(){return this.node},e.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){var t=this;return __generator(this,function(){return[2,new Promise(function(e){return __awaiter(t,void 0,void 0,function(){var t,n;return __generator(this,function(o){switch(o.label){case 0:o.trys.push([0,4,,5]),t=f.default.TIMES_RETRY,o.label=1;case 1:return t>0?[4,h.pm.weakLogin(d.default.instance.entryData.query).then(function(n){t=0,g.dm.loginRes=n,e(m.LoadStatus.Success)}).catch(function(e){if(--t<=0)throw e})]:[3,3];case 2:return o.sent(),[3,1];case 3:return[3,5];case 4:return n=o.sent(),l.Logger.debug("[Loading ladScene] \u767b\u5f55\u5f02\u5e38\uff1a",n),[3,5];case 5:return[2]}})})})]})})},e.prototype.loadRes=function(){return __awaiter(this,void 0,void 0,function(){var t=this;return __generator(this,function(){return[2,new Promise(function(e){return __awaiter(t,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,y.default.preLoad()];case 1:return t.sent(),y.default.show(),[4,d.default.instance.initGame()];case 2:return t.sent(),e(m.LoadStatus.Success),[2]}})})})]})})},e.prototype.onShareIn=function(){return __awaiter(this,void 0,Promise,function(){return __generator(this,function(){return[2]})})},e.prototype.initScene=function(){return __awaiter(this,void 0,void 0,function(){var t,e,n,o=this;return __generator(this,function(i){switch(i.label){case 0:if(d.default.instance.isInited=!1,!p.PlatformUtil.NEED_LOAD_GAMESETTING)return[3,4];t=m.LoadStatus.Doing,i.label=1;case 1:return[4,g.dm.gamesetting.loadGameSetting().then(function(e){t=e})];case 2:i.sent(),i.label=3;case 3:if(t==m.LoadStatus.Doing)return[3,1];i.label=4;case 4:g.dm.gamesetting.reviewing&&(this.lb_ver.node.color=cc.Color.YELLOW),e=m.LoadStatus.Doing,i.label=5;case 5:return[4,this.loadRes().then(function(t){e=t})];case 6:i.sent(),i.label=7;case 7:if(e==m.LoadStatus.Doing)return[3,5];i.label=8;case 8:if(e==m.LoadStatus.GameOut)return[2];if(l.Logger.debug("PlatformUtil.NEED_LOGIN"),!p.PlatformUtil.NEED_LOGIN||!s.Utils.isEmpty(g.dm.player.token))return[3,13];n=m.LoadStatus.Doing,i.label=9;case 9:return[4,this.login().then(function(t){n=t,a.GameUtils.GameLogin(!1,void 0)})];case 10:i.sent(),i.label=11;case 11:if(n==m.LoadStatus.Doing)return[3,9];i.label=12;case 12:if(n==m.LoadStatus.GameOut)return[2];i.label=13;case 13:return g.dm.player.timeGameStart=s.Utils.getCurTime(),l.Logger.debug("loading end"),[4,this.onShareIn()];case 14:return i.sent(),setTimeout(function(){return __awaiter(o,void 0,void 0,function(){return __generator(this,function(){return a.GameUtils.ShowX(g.dm.adids.XAdInfo.EnterGame.xid),u.sm.switchScene("MainScene",void 0,!0),[2]})})},0),d.default.instance.isInited=!0,v.default.Instance.playBGM("sounds/bee_bgm",!1),[2]}})})},e.prototype.getType=function(){return n.GetType()},e.prototype.removeScene=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return[2]})})},e.Prefab_Name="prefab/game/scene/loading_scene",r([S(cc.Label)],e.prototype,"lb_ver",void 0),n=r([w],e)}(u.GameScene);n.default=E,cc._RF.pop()},{"../../common/AudioManager":"AudioManager","../../common/DataManager":"DataManager","../../common/GameManager":"GameManager","../../common/NetworkManager":"NetworkManager","../../common/PlatformManager":"PlatformManager","../../common/PlatformUtil":"PlatformUtil","../../common/SceneManager":"SceneManager","../../common/comp/SceneLoadingUI":"SceneLoadingUI","../../common/consts/GlobalDefines":"GlobalDefines","../../hagoSdk/HagoSdk":"HagoSdk","../../utils/Utils":"Utils","../../utils/logger":"logger","../GameUtils":"GameUtils","../consts/GameConfig":"GameConfig"}],MainController:[function(t,e,n){"use strict";cc._RF.push(e,"7f78dNu50NNdrL1VMoZK8+4","MainController");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./UIController"),c=t("./SmallBottle"),s=t("./panel/RevivePanel"),l=t("./panel/ResultPanel"),u=t("./panel/AwardPanel"),p=t("./Bottle"),h=t("../hcfm/Item"),f=t("../GameUtils"),d=t("../common/UIManager"),g=t("../../utils/Utils"),m=t("../../utils/logger"),y=t("../../common/PlatformManager"),v=t("../../common/GlobalEvents"),_=t("../../common/GameManager"),b=t("../../common/G"),w=t("../../common/DataManager"),S=t("../../common/consts/GlobalDefines"),E=cc._decorator,O=E.ccclass,P=E.property,C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.itemParent=null,e.itemPrefab=null,e.beginPos=null,e.bottleParent=null,e.tipBag=null,e.uiNode=null,e.beeTipEff=null,e.uiController=null,e.testLabel=null,e.bannerNode=null,e.allPos=[],e.allItem=[],e.itemMap=new Map,e.moveX=S.GlobalDefines.ItemDisX,e.moveY=S.GlobalDefines.ItemDisY/2,e.gameType=S.GameType.Wait,e.clickedItem=null,e.dropHoneyItem=null,e.bottlePos=new cc.Vec2(375,0),e.bottle=null,e.smallBottleCount=0,e.allSmallBottle=[],e.lastSmallBottle=null,e.tipType=S.TipType.None,e.beeTipCount=0,e.beeBeginSec=0,e.isRevive=!1,e.score=0,e.honeyCount=0,e.isBottleFull=!1,e}return i(e,t),e.prototype.onLoad=function(){this.initItemPos(),this.initBeginItem(),this.initBottle(),this.beeBeginSec=g.Utils.getCurTime(),this.showBanner()},e.prototype.initBottle=function(){return __awaiter(this,void 0,void 0,function(){var t,e,n,o;return __generator(this,function(i){switch(i.label){case 0:return(t=w.dm.player.bottle)<1||t>4?(m.Logger.error("error bottle idnex",t),[2]):(e="prefab/game/ui/\u74f6\u5b50_"+t+"_\u704c\u8702\u871c",[4,g.Utils.loadPefab(e)]);case 1:return(n=i.sent())&&((o=cc.instantiate(n)).position=this.bottlePos,this.bottleParent.addChild(o),this.bottle=o.getComponent(p.default)),[2]}})})},e.prototype.bottleFull=function(){var t=this,e=this.bottleParent.convertToWorldSpaceAR(this.getSmallBottlePos(this.smallBottleCount+1)),n=this.bottleParent.convertToNodeSpaceAR(e),o=this.bottle.node.position;cc.tween(this.bottle.node).to(.7,{position:n,scale:.3}).call(function(){t.bottle.node.position=o,t.bottle.node.scale=1,t.bottle.reset(),t.addBottle(),t.updateGameType(S.GameType.HoneyDown)}).start()},e.prototype.addBottle=function(){return __awaiter(this,void 0,void 0,function(){var t,e,n;return __generator(this,function(o){switch(o.label){case 0:return this.smallBottleCount+=1,this.smallBottleCount>S.GlobalDefines.MaxSmallBottle?(this.lastSmallBottle.updateLabel(this.smallBottleCount),[2]):[4,g.Utils.loadPefab("prefab/game/main/bottle")];case 1:return(t=o.sent())&&((e=cc.instantiate(t)).position=this.getSmallBottlePos(this.smallBottleCount),(n=e.getComponent(c.default)).init(this.smallBottleCount),this.bottleParent.addChild(e),this.allSmallBottle.push(e),this.smallBottleCount==S.GlobalDefines.MaxSmallBottle&&(this.lastSmallBottle=n)),[2]}})})},e.prototype.getSmallBottlePos=function(t){t>S.GlobalDefines.MaxSmallBottle&&(t=S.GlobalDefines.MaxSmallBottle),t<1&&(t=1);var e=S.GlobalDefines.SmallBottleWidth+3,n=new cc.Vec2,o=Math.floor((t-1)/10);return n.y=o*S.GlobalDefines.SmallBottleHeight,n.x=(t-1)%10*e,n.x+=e/2+6,(t-1)%10>=5&&(n.x+=230),n},e.prototype.updateGameType=function(t){switch(console.log("test old  new ",this.gameType,t),this.gameType=t,this.gameType){case S.GameType.Wait:this.checkFinish()?this.updateGameType(S.GameType.End):this.isBottleFull&&(this.isBottleFull=!1,u.default.show());break;case S.GameType.Collect:this.itemClickLogic();break;case S.GameType.Bee:break;case S.GameType.HoneyDown:this.checkHoneyMove();break;case S.GameType.HoneyInBottle:this.checkHoneyToBottle();break;case S.GameType.BottleFull:this.isBottleFull=!0,this.bottleFull();break;case S.GameType.Fill:this.dropNewItem();break;case S.GameType.ObstacleBomb:this.obstacleBomb();break;case S.GameType.End:this.gameEnd();break;case S.GameType.FourBee:this.fourBeeEff()}},e.prototype.onEnable=function(){b.GlobalEvent.on(v.ItemClicked.NAME,this.onItemClicked,this),b.GlobalEvent.on(v.EventRevive.NAME,this.showRefreshTip,this),b.GlobalEvent.on(v.EventRestart.NAME,this.restartGame,this),b.GlobalEvent.on(v.EventBottleLevelUp.NAME,this.bottleLevelUp,this),b.GlobalEvent.on(v.EventFourBee.NAME,this.fourBeeEff,this),b.GlobalEvent.on(v.EventShowBanner.NAME,this.showBanner,this)},e.prototype.onDisable=function(){b.GlobalEvent.off(v.ItemClicked.NAME,this.onItemClicked,this),b.GlobalEvent.off(v.EventRevive.NAME,this.showRefreshTip,this),b.GlobalEvent.off(v.EventRestart.NAME,this.restartGame,this),b.GlobalEvent.off(v.EventBottleLevelUp.NAME,this.bottleLevelUp,this),b.GlobalEvent.off(v.EventFourBee.NAME,this.fourBeeEff,this),b.GlobalEvent.off(v.EventShowBanner.NAME,this.showBanner,this)},e.prototype.bottleLevelUp=function(){this.bottle.node.removeFromParent(),this.bottle=null,this.initBottle()},e.prototype.dropNewItem=function(){var t=this,e=[];this.allItem.forEach(function(t){t.type!=S.ItemType.Free&&e.push(t)}),e.sort(function(t,e){return t.row>e.row?-1:1}),e.forEach(function(e){var n=t.getLowestItem(e);n.length>1&&(n[n.length-1].itemMoveDown(n,e.type),e.changeToFree())});var n=[],o=this.getItemsByType(S.ItemType.Free),i=!0;o.forEach(function(e){if(i&&2==e.col&&t.isCanShowBeeTip())n.push(e.initByType(S.ItemType.BeeTip)),i=!1;else{var o=_.default.instance.resList.getNewItemType(t.score,t.honeyCount);n.push(e.initByType(o))}}),n.length<=0?this.updateGameType(S.GameType.Wait):Promise.all(n).then(function(){t.updateGameType(S.GameType.HoneyInBottle)}).catch(function(t){m.Logger.error("item move down err =",t)})},e.prototype.getLowestItem=function(t){var e=[t],n=t.row,o=t.col;if(n>=S.GlobalDefines.MaxRow)return e;for(var i=n+1;i<=S.GlobalDefines.MaxRow;i++){var r=this.itemMap.get(i+""+o);!g.Utils.isEmpty(r)&&r.isFree()&&e.push(r)}return e},e.prototype.initItemPos=function(){for(var t=[0,this.moveY,2*this.moveY,this.moveY,0],e=0;e<6;e++)for(var n=0;n<5;n++)if((4!=e||0!=n&&4!=n)&&(5!=e||2==n)){var o=new cc.Vec2(this.beginPos.x,this.beginPos.y);o.y-=this.moveY*e*2,o.x+=this.moveX*n,o.y+=t[n];var i={pos:o,row:e,col:n};this.allPos.push(i)}},e.prototype.initBeginItem=function(){var t=this;this.allPos.forEach(function(e){e.type=S.ItemType.One,0==e.row&&(e.type=S.ItemType.Honey);var n=cc.instantiate(t.itemPrefab),o=n.getComponent(h.default);o.Init(e),t.allItem.push(o),t.itemParent.addChild(n),5==e.row&&2==e.col&&(t.dropHoneyItem=o),t.itemMap.set(e.row+""+e.col,o)})},e.prototype.isNeighbour=function(t,e){return t.node.position.sub(e.node.position).mag()<=S.GlobalDefines.ItemDisY+1},e.prototype.onItemClicked=function(t){var e=this;if(this.gameType==S.GameType.Wait){if(t.item.type==S.ItemType.BeeTip)return t.item.changeToFree(),this.updateGameType(S.GameType.Fill),d.ui.showLoading(),void y.pm.loadAndShowVideoAd(function(t){1==t?(b.GlobalEvent.dispatchEvent(new v.EventBeeTipBegin),d.ui.hideLoading()):(m.Logger.error("video player error, use bee tip"),d.ui.hideLoading())},w.dm.adids.AdInfo.Bee.adid);switch(this.tipType){case S.TipType.None:this.normalClick(t.item);break;case S.TipType.Bee:this.beeBeginSec=g.Utils.getCurTime(),w.dm.player.beeTip-=1,this.uiController.hideBeeTip(),this.beeTipEff.node.active=!0,this.beeTipEff.setAnimation(0,"bee_into",!1),f.GameUtils.playSFX("bee_in"),setTimeout(function(){f.GameUtils.playSFX("bee_yahoo")},1140),setTimeout(function(){f.GameUtils.playSFX("bee_out")},1900),this.beeTipEff.setCompleteListener(function(){e.beeTipEff.node.active=!1,t.item.showBeeInto(function(){e.updateGameType(S.GameType.HoneyInBottle),e.tipType=S.TipType.None,e.bottleParent.setParent(e.node)},0)});break;case S.TipType.Magic:f.GameUtils.playSFX("\u4f7f\u7528\u9b54\u6cd5\u68d2"),t.item.levelUp().then(function(t){w.dm.player.magic-=1,e.uiController.refresh(),t?e.updateGameType(S.GameType.FourBee):(e.bottleParent.setParent(e.node),e.updateGameType(S.GameType.HoneyInBottle)),e.tipType=S.TipType.None,b.GlobalEvent.dispatchEvent(new v.EventTipEnd)}).catch(function(){m.Logger.error("item level up error")});break;default:this.normalClick(t.item)}}else m.Logger.error("game type error, player wait item action")},e.prototype.normalClick=function(t){this.clickedItem=t,this.updateGameType(S.GameType.Collect)},e.prototype.itemClickLogic=function(){var t=this,e=this.getStepItems(this.clickedItem);if(e.length<=0)this.updateGameType(S.GameType.HoneyDown);else{f.GameUtils.playSFX("\u5408\u6210");for(var n=function(n){e[n].forEach(function(o){if(t.collectItem(o),0==n)o.tryMove(t.clickedItem.node.position,e.length,n+1);else{var i=t.getNerghbour([o],e[n-1]),r=g.Utils.randomInt(0,i.length);o.tryMove(i[r].node.position,e.length,n+1)}})},o=e.length-1;o>=0;o--)n(o);setTimeout(function(){return __awaiter(t,void 0,void 0,function(){var t=this;return __generator(this,function(){return this.clickedItem.levelUp().then(function(e){e?t.updateGameType(S.GameType.FourBee):t.updateGameType(S.GameType.Collect)}).catch(function(t){m.Logger.error("item levelUp err =",t)}),[2]})})},e.length*S.GlobalDefines.OneStepTm*1e3)}},e.prototype.collectItem=function(t){this.score+=t.getScore();var e=new v.EventScoreChange(this.score);b.GlobalEvent.dispatchEvent(e)},e.prototype.collectHoney=function(){var t=_.default.instance.resList.honeyScore[w.dm.player.bottle-1];this.score+=t;var e=new v.EventScoreChange(this.score);b.GlobalEvent.dispatchEvent(e),this.honeyCount+=1},e.prototype.getStepItems=function(t){var e=[],n=this.getItemsByType(t.type);if((n=this.removeSameItem(n,[t])).length<2)return e;for(var o=0,i=0;i<30;i++){var r=[t];i>0&&(r=e[i-1]);var a=this.getNerghbour(r,n);if(a.length<=0)break;if(o+=a.length,e.push(a),(n=this.removeSameItem(n,a)).length<=0)break}return o<2?[]:e.length<=0?[]:e},e.prototype.removeSameItem=function(t,e){var n=[];return t.forEach(function(t){var o=!1;e.forEach(function(e){t==e&&(o=!0)}),o||n.push(t)}),n},e.prototype.getNerghbour=function(t,e){var n=this,o=[];return t.forEach(function(t){e.forEach(function(e){n.isNeighbour(t,e)&&o.push(e)})}),o},e.prototype.resize=function(){S.GlobalDefines.ScreenHeight,S.GlobalDefines.Design_Height},e.prototype.checkHoneyMove=function(){var t=this,e=[];if(this.allItem.forEach(function(t){t.type==S.ItemType.Honey&&e.push(t)}),e.length<=0)this.updateGameType(S.GameType.Fill);else{e.sort(function(t,e){return t.row>e.row?-1:1});for(var n=[],o=0;o<e.length;o++){var i=this.genPath([[e[o]]],[e[o]]);if(!(i.length<=0)){var r=i[this.getBestDownPath(i)];r.length<=1||(r[0].changeToFree(),n.push(r[r.length-1].itemMoveDown(r,S.ItemType.Honey)))}}n.length<=0?this.updateGameType(S.GameType.HoneyInBottle):Promise.all(n).then(function(){m.Logger.debug("all honeys is down"),t.updateGameType(S.GameType.HoneyInBottle)}).catch(function(t){m.Logger.error("honeyMoveDown err =",t)})}},e.prototype.checkHoneyToBottle=function(){var t=this;this.dropHoneyItem.isHoney()?(f.GameUtils.playSFX("\u704c\u8702\u871c\u5428\u5428\u5428"),this.dropHoneyItem.changeToFree(),this.bottle.honeyDown(function(e){t.collectHoney(),e?(f.GameUtils.playSFX("\u6bcf\u6b21\u704c\u6ee1\u4e00\u74f6\u76d6\u4e0a\u76d6\u5b50\u540e\u64ad\u653e"),t.updateGameType(S.GameType.BottleFull)):t.updateGameType(S.GameType.HoneyDown)})):this.dropHoneyItem.isBeeTip()?(this.uiController.hideBeeTip(),this.dropHoneyItem.showBeeTipFly(function(){t.uiController.showBeeTip(),t.beeBeginSec=g.Utils.getCurTime(),t.updateGameType(S.GameType.Fill)})):this.checkObstacle()?this.updateGameType(S.GameType.ObstacleBomb):this.updateGameType(S.GameType.Fill)},e.prototype.getBestDownPath=function(t){var e=99999;t.forEach(function(t){t[t.length-1].node.y<e&&(e=t[t.length-1].node.y)});for(var n=0;n<t.length;n++)if(t[n][t[n].length-1].node.y==e)return n;return 0},e.prototype.genPath=function(t,e){for(var n=[],o=!0,i=[],r=function(r){var c=t[r],s=c[c.length-1],l=a.getDownEmptyItems(s);if(l.length<=0)return"continue";l.forEach(function(t){if(-1==e.indexOf(t)){var r=c.slice(0,c.length);r.push(t),n.push(r),i.push(t),o=!1}})},a=this,c=0;c<t.length;c++)r(c);return e=e.concat(i),o?t:this.genPath(n,e)},e.prototype.getDownEmptyItems=function(t){var e=this.getItemsByType(S.ItemType.Free),n=this.getNerghbour([t],e),o=[];return n.forEach(function(e){e.node.y<t.node.y&&o.push(e)}),o},e.prototype.getItemsByType=function(t){var e=[];return this.allItem.forEach(function(n){n.type==t&&e.push(n)}),e},e.prototype.checkFinish=function(){for(var t in this.allItem)if(this.allItem[t].type!=S.ItemType.Honey&&this.getStepItems(this.allItem[t]).length>0)return console.log("check finsh false",this.allItem[t].row,this.allItem[t].col),!1;return console.log("check finsh true"),!0},e.prototype.gameEnd=function(){var t=this;f.GameUtils.playSFX("\u6e38\u620f\u7ed3\u675f"),cc.tween(this.itemParent).to(.15,{color:(new cc.Color).fromHEX("#DE6565")}).delay(.1).to(.15,{color:(new cc.Color).fromHEX("#FFFFFF")}).delay(.15).to(.15,{color:(new cc.Color).fromHEX("#DE6565")}).delay(.1).to(.15,{color:(new cc.Color).fromHEX("#FFFFFF")}).delay(.15).to(.15,{color:(new cc.Color).fromHEX("#DE6565")}).delay(.1).to(.15,{color:(new cc.Color).fromHEX("#FFFFFF")}).call(function(){m.Logger.debug("game end"),t.isRevive?l.default.show(t.smallBottleCount):(s.default.show(t.smallBottleCount),t.isRevive=!0)}).start()},e.prototype.checkObstacle=function(){if(this.dropHoneyItem.isHoney())return!1;for(var t=!0,e=0;e<=S.GlobalDefines.MaxCol;e++){var n=this.itemMap.get("4"+e);if(!g.Utils.isEmpty(n)&&!n.isHoney()){t=!1;break}}return t},e.prototype.obstacleBomb=function(){var t=this;this.dropHoneyItem.isHoney()||this.dropHoneyItem.isFree()?this.updateGameType(S.GameType.HoneyDown):this.dropHoneyItem.bomb().then(function(){t.updateGameType(S.GameType.HoneyDown)}).catch(function(t){m.Logger.error("obstacleBomb err =",t)})},e.prototype.tryTip=function(t){if(this.gameType==S.GameType.Wait){switch(this.tipType=t,this.tipType){case S.TipType.Magic:case S.TipType.Bee:this.bottleParent.setParent(this.uiNode),this.selectTipBegin();break;case S.TipType.Refresh:this.showRefreshTip()}return!0}return!1},e.prototype.isCanTip=function(){return this.gameType==S.GameType.Wait},e.prototype.selectTipBegin=function(){for(var t in this.allItem)this.allItem[t].selectTipBegin()},e.prototype.showRefreshTip=function(){var t=this,e=[];this.allPos.sort(function(){return.5-Math.random()});for(var n=0;n<this.allItem.length;n++){var o=this.allPos[n];5==o.row&&2==o.col&&(this.dropHoneyItem=this.allItem[n]),this.itemMap.set(o.row+""+o.col,this.allItem[n]),e.push(this.allItem[n].changePos(o))}e.length<=0?this.updateGameType(S.GameType.HoneyInBottle):Promise.all(e).then(function(){t.updateGameType(S.GameType.HoneyInBottle)}).catch(function(t){m.Logger.error("item move down err =",t)})},e.prototype.closeTip=function(){for(var t in this.tipType=S.TipType.None,this.bottleParent.setParent(this.node),this.allItem)this.allItem[t].selectTipEnd()},e.prototype.restartGame=function(){this.beeTipCount=0,this.beeBeginSec=g.Utils.getCurTime(),this.isRevive=!1,this.itemParent.removeAllChildren(),this.allItem=[],this.itemMap=new Map,this.clickedItem=null,this.bottle.reset(),this.smallBottleCount=0,this.score=0,this.honeyCount=0,this.allSmallBottle.forEach(function(t){t.removeFromParent()}),this.allSmallBottle=[],this.initBeginItem(),this.updateGameType(S.GameType.Wait)},e.prototype.isCanShowBeeTip=function(){if(this.uiController.isBeeTipShow())return!1;if(this.score<4e3)return!1;if(this.beeTipCount>=S.GlobalDefines.MaxBeeTipCount)return!1;for(var t in this.allItem)if(this.allItem[t].type==S.ItemType.BeeTip)return!1;var e=g.Utils.getCurTime();return!(e-this.beeBeginSec<S.GlobalDefines.BeeTipInterval||(this.beeBeginSec=e,this.beeTipCount+=1,0))},e.prototype.fourBeeEff=function(){for(var t=this,e=this.getLowFourItems(),n=0,o=function(o){var i=e[o];setTimeout(function(){i.showBeeInto(function(){(n+=1)>=e.length&&t.updateGameType(S.GameType.HoneyInBottle)},o)},200*o)},i=0;i<e.length;i++)o(i)},e.prototype.getLowFourItems=function(){for(var t=[],e=S.GlobalDefines.MaxRow;e>=0;e--)for(var n in this.allItem){var o=this.allItem[n];if(o.row==e&&o.type!=S.ItemType.Honey&&o.type!=S.ItemType.BeeTip&&(t.push(o),t.length>=4))return t}return t},e.prototype.showBanner=function(){f.GameUtils.showBanner(this.bannerNode)},e.prototype.testClicked=function(){},r([P(cc.Node)],e.prototype,"itemParent",void 0),r([P(cc.Prefab)],e.prototype,"itemPrefab",void 0),r([P(cc.Vec2)],e.prototype,"beginPos",void 0),r([P(cc.Node)],e.prototype,"bottleParent",void 0),r([P(cc.Node)],e.prototype,"tipBag",void 0),r([P(cc.Node)],e.prototype,"uiNode",void 0),r([P(sp.Skeleton)],e.prototype,"beeTipEff",void 0),r([P(a.default)],e.prototype,"uiController",void 0),r([P(cc.Label)],e.prototype,"testLabel",void 0),r([P(cc.Node)],e.prototype,"bannerNode",void 0),r([O],e)}(cc.Component);n.default=C,cc._RF.pop()},{"../../common/DataManager":"DataManager","../../common/G":"G","../../common/GameManager":"GameManager","../../common/GlobalEvents":"GlobalEvents","../../common/PlatformManager":"PlatformManager","../../common/consts/GlobalDefines":"GlobalDefines","../../utils/Utils":"Utils","../../utils/logger":"logger","../GameUtils":"GameUtils","../common/UIManager":"UIManager","../hcfm/Item":"Item","./Bottle":"Bottle","./SmallBottle":"SmallBottle","./UIController":"UIController","./panel/AwardPanel":"AwardPanel","./panel/ResultPanel":"ResultPanel","./panel/RevivePanel":"RevivePanel"}],MainScene:[function(t,e,n){"use strict";cc._RF.push(e,"67d221nRKtGkY5Mqd9wpMqn","MainScene");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../GameUtils"),c=t("../../utils/logger"),s=t("../../common/SceneManager"),l=t("../../common/comp/SceneLoadingUI"),u=cc._decorator,p=u.ccclass,h=(u.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var n;return i(e,t),n=e,e.GetType=function(){return s.SceneType.Main},e.prototype.getType=function(){return n.GetType()},e.prototype.getNode=function(){return this.node},e.prototype.initScene=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return c.Logger.debug("[MainScene initScene]"),l.default.setProgress(1),[4,a.GameUtils.showTopresMain()];case 1:return t.sent(),[2]}})})},e.prototype.removeScene=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return[2]})})},e.Prefab_Name="prefab/game/scene/main_scene",n=r([p],e)}(s.GameScene));n.default=h,cc._RF.pop()},{"../../common/SceneManager":"SceneManager","../../common/comp/SceneLoadingUI":"SceneLoadingUI","../../utils/logger":"logger","../GameUtils":"GameUtils"}],MessageBox:[function(t,e,n){"use strict";cc._RF.push(e,"30c57QAdaVJu7heXn9/xYhe","MessageBox");var o,i,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.MessageBoxType=n.MessageBoxBtnIndex=void 0,function(t){t[t.Ok=0]="Ok",t[t.OkAd=1]="OkAd",t[t.OkShare=2]="OkShare",t[t.Cancel=3]="Cancel"}(n.MessageBoxBtnIndex||(n.MessageBoxBtnIndex={})),function(t){t[t.Ok=1]="Ok",t[t.OkCancel=9]="OkCancel",t[t.AdCancel=10]="AdCancel",t[t.AdOk=2]="AdOk",t[t.ShareCancel=12]="ShareCancel"}(i=n.MessageBoxType||(n.MessageBoxType={}));var c=cc._decorator,s=c.ccclass,l=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gp_content=null,e.lb_title=null,e.node_layout=null,e.lb_context=null,e.gp_context2=null,e.lb_context2=null,e.btns=null,e.btn_close=null,e.lbs_btnok=[],e.lbs_btncancel=[],e.cb_ok=void 0,e.cb_cancel=void 0,e}var n;return r(e,t),n=e,e.preLoad=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return t=this,[4,n.loadPefab(this.Prefab_Name,!0)];case 1:return t.prefab=e.sent(),[2]}})})},e.showOk=function(t){var e=Object.assign(t,{type:i.Ok,txt_btnok:"\u786e\u5b9a"});this._show(e)},e.showOkCancel=function(t){var e=Object.assign(t,{type:i.OkCancel,txt_btnok:"\u786e\u5b9a",txt_btncancel:"\u53d6\u6d88"});this._showOkCancel(e)},e.showRetryCancel=function(t){var e=Object.assign(t,{type:i.OkCancel,txt_btnok:"\u91cd\u8bd5",txt_btncancel:"\u53d6\u6d88"});this._showOkCancel(e)},e.showAdOkCancel=function(t){var e=Object.assign(t,{type:i.AdCancel});this._showOkCancel(e)},e.showAdOk=function(t){var e=Object.assign(t,{type:i.AdOk,txt_btncancel:"",showClose:!0});this._showOkCancel(e)},e.showShareOkCancel=function(t){var e=Object.assign(t,{type:i.ShareCancel});this._showOkCancel(e)},e._showOkCancel=function(t){t.cb_cancel||(t.cb_cancel=function(){}),this._show(t)},e._show=function(t){var e=this;return new Promise(function(o){return __awaiter(e,void 0,void 0,function(){var e,i,r;return __generator(this,function(a){switch(a.label){case 0:return[4,this.preLoad()];case 1:return a.sent(),e=cc.instantiate(this.prefab).getComponent(n),(i=t.cb_ok)&&(t.cb_ok=function(){i(),o()}),(r=t.cb_cancel)&&(t.cb_cancel=function(){r(),o()}),e.init(t),n.PopView(e.node,t.popLayer),this.prefab=void 0,[2]}})})})},e.PopView=function(t,e){t.x=0,t.y=0,t.width=e.width,t.height=e.height,t.parent=e},e.loadPefab=function(t,e){return void 0===e&&(e=!1),__awaiter(this,void 0,Promise,function(){var e=this;return __generator(this,function(){return[2,new Promise(function(n,o){return __awaiter(e,void 0,void 0,function(){var e,i,r=this;return __generator(this,function(a){switch(a.label){case 0:e=function(){return __awaiter(r,void 0,void 0,function(){return __generator(this,function(){return[2,new Promise(function(e,n){var o=setTimeout(function(){n("oadPefab \u8fde\u63a5\u8d85\u65f6"+t)},1e4);cc.resources.load(t,function(t,i){clearTimeout(o),t?n(t):e(i)})})]})})},i=3,a.label=1;case 1:return i>0?[4,e().then(function(t){i=0,n(t)}).catch(function(t){--i<=0&&o(t)})]:[3,3];case 2:return a.sent(),[3,1];case 3:return[2]}})})})]})})},e.prototype.init=function(t){this.lb_title.string=t.title,t.context?(this.lb_context.node.active=!0,this.lb_context.string=t.context):this.lb_context.node.active=!1,t.context2?(this.gp_context2.active=!0,this.lb_context2.string=t.context2):this.gp_context2.active=!1,this.cb_ok=t.cb_ok,this.cb_cancel=t.cb_cancel,this.btn_close.active=t.showClose,t.nodeInsert&&this.node_layout.insertChild(t.nodeInsert,1);for(var e=0;e<this.lbs_btnok.length;e++)this.lbs_btnok[e].string=t.txt_btnok;if(t.txt_btncancel)for(e=0;e<this.lbs_btncancel.length;e++)this.lbs_btncancel[e].string=t.txt_btncancel;this.setupBtns(t.type),this.gp_content.opacity=0,this.gp_content.scale=.8},e.prototype.setupBtns=function(t){for(var e=0;e<this.btns.childrenCount;e++)this.btns.children[e].active=0!=(1<<e&t)},e.prototype.onLoad=function(){cc.tween(this.gp_content).to(.3,{scale:1,opacity:255},{easing:cc.easing.sineOut}).start()},e.prototype.onBtnOkClicked=function(){this.cb_ok&&this.cb_ok(),this.close()},e.prototype.onBtnCancelClicked=function(){this.cb_cancel&&this.cb_cancel(),this.close()},e.prototype.close=function(){this.node.removeFromParent(),this.node.destroy()},e.Prefab_Name="prefab/common/msgbox/msgbox",e.prefab=null,a([l(cc.Node)],e.prototype,"gp_content",void 0),a([l(cc.Label)],e.prototype,"lb_title",void 0),a([l(cc.Node)],e.prototype,"node_layout",void 0),a([l(cc.Label)],e.prototype,"lb_context",void 0),a([l(cc.Node)],e.prototype,"gp_context2",void 0),a([l(cc.Label)],e.prototype,"lb_context2",void 0),a([l(cc.Node)],e.prototype,"btns",void 0),a([l(cc.Node)],e.prototype,"btn_close",void 0),a([l([cc.Label])],e.prototype,"lbs_btnok",void 0),a([l([cc.Label])],e.prototype,"lbs_btncancel",void 0),n=a([s],e)}(cc.Component);n.default=u,cc._RF.pop()},{}],NestableScrollView_Inner:[function(t,e){"use strict";cc._RF.push(e,"96b5fwzowtLRo8SKnVvAycb","NestableScrollView_Inner"),cc.Class({extends:cc.ScrollView,properties:{m_OuterScrollView:{default:null,visible:!1}},setOuterScrollView:function(t){this.m_OuterScrollView=t},_onTouchMoved:function(t,e){if(this.enabledInHierarchy&&!this._hasNestedViewGroup(t,e)){var n=t.touch,o=n.getLocation().sub(n.getStartLocation());if(this.content&&(this.m_OuterScrollView.isDifferentBetweenSettingAndPlan(this)||this._handleMoveLogic(n)),this.cancelInnerEvents){if(o.mag()>7&&!this._touchMoved&&t.target!==this.node){var i=new cc.Event.EventTouch(t.getTouches(),t.bubbles);i.type=cc.Node.EventType.TOUCH_CANCEL,i.touch=t.touch,i.simulate=!0,t.target.dispatchEvent(i),this._touchMoved=!0}this._stopPropagationIfTargetIsMe(t)}}}}),cc._RF.pop()},{}],NestableScrollView_Outer:[function(t,e){"use strict";cc._RF.push(e,"37afa1EtYtLp4aekire3qA1","NestableScrollView_Outer"),cc.Class({extends:cc.ScrollView,properties:{m_InnerScrollViews:[t("NestableScrollView_Inner")],m_PlanDir:{default:null,visible:!1},m_ScrollingInnerSv:{default:null,visible:!1}},onLoad:function(){var t=this;this.m_PlanDir=null,this.m_InnerScrollViews.forEach(function(e){e&&e.setOuterScrollView(t)})},_isHisChild:function(t,e){return t==e||null!=t.parent&&(t.parent==e||this._isHisChild(t.parent,e))},_findScrollingInnerSv:function(t){for(var e=0;e<this.m_InnerScrollViews.length;e++){var n=this.m_InnerScrollViews[e];if(n&&this._isHisChild(t,n.node))return n}return null},isDifferentBetweenSettingAndPlan:function(t){return!(0==this.m_PlanDir||1==this.m_PlanDir&&t.horizontal||-1==this.m_PlanDir&&t.vertical)},_hasNestedViewGroup:function(t){if(t.eventPhase===cc.Event.CAPTURING_PHASE)return!1},_onTouchBegan:function(t,e){if(this.enabledInHierarchy&&!this._hasNestedViewGroup(t,e)){this.m_PlanDir=null,this.m_ScrollingInnerSv=null;var n=t.touch;this.content&&this._handlePressLogic(n),this._touchMoved=!1,this._stopPropagationIfTargetIsMe(t)}},_onTouchMoved:function(t,e){if(this.enabledInHierarchy&&!this._hasNestedViewGroup(t,e)){var n=t.touch,o=n.getLocation().sub(n.getStartLocation());if(null==this.m_PlanDir&&o.mag()>7)if(this.m_ScrollingInnerSv=this._findScrollingInnerSv(t.target),null!=this.m_ScrollingInnerSv){var i=this.m_ScrollingInnerSv.content.getContentSize(),r=this.m_ScrollingInnerSv.node.getContentSize();this.m_ScrollingInnerSv.vertical&&i.height>r.height||this.m_ScrollingInnerSv.horizontal&&i.width>r.width?this.m_PlanDir=Math.abs(o.x)>Math.abs(o.y)?1:-1:this.m_PlanDir=0}else this.m_PlanDir=0;if(this.content&&(this.isDifferentBetweenSettingAndPlan(this)||this._handleMoveLogic(n)),this.cancelInnerEvents&&null==this.m_ScrollingInnerSv){if(o.mag()>7&&!this._touchMoved&&t.target!==this.node){var a=new cc.Event.EventTouch(t.getTouches(),t.bubbles);a.type=cc.Node.EventType.TOUCH_CANCEL,a.touch=t.touch,a.simulate=!0,t.target.dispatchEvent(a),this._touchMoved=!0}this._stopPropagationIfTargetIsMe(t)}}}}),cc._RF.pop()},{NestableScrollView_Inner:"NestableScrollView_Inner"}],NetworkManager:[function(t,e,n){"use strict";cc._RF.push(e,"675ecUaI5hGIraXSBnlWOyg","NetworkManager"),Object.defineProperty(n,"__esModule",{value:!0}),n.net=void 0;var o=t("./SceneManager"),i=t("./PlatformManager"),r=t("./DataManager"),a=t("../utils/logger"),c=function(){function t(){this.DEBUG_URL_DEV=!0,this.VER_RES=""}return Object.defineProperty(t,"instance",{get:function(){return null==this.g_Instance&&(this.g_Instance=new t),this.g_Instance},enumerable:!1,configurable:!0}),t.prototype.Init=function(t){this.DEBUG_URL_DEV=t.DEBUG_URL_DEV,this.VER_RES=t.VER_RES,this.T_ldScene=this.T_ldScene},t.prototype.GetRequestParamter=function(t){var e="";return t.forEach(function(t,n){e+=""!=e?"&":"?",e+=n+"="+t}.bind(this)),e},t.prototype.HttpGet=function(t,e){var n=new XMLHttpRequest;n.timeout=8e3,n.ontimeout=function(){console.error("request ontimeout"),e(!1,null)},n.onerror=function(){console.error("request onerror"),e(!1,null)},n.onabort=function(){console.error("request onabort"),e(!1,null)},n.onreadystatechange=function(){if(4==this.readyState&&200==n.status){var t=n.responseText;console.log("http get response : "+t);var o=JSON.parse(t);e(!0,o)}};var o=t;console.log("begin request server "+o),n.open("GET",o,!0),n.send()},t.prototype._HttpPost=function(e,n){var o=new XMLHttpRequest;o.timeout=5e3,o.ontimeout=function(){console.error("request ontimeout"),n(!1,null),t.CONNECTIING=!1},o.onerror=function(){console.error("request onerror"),n(!1,null),t.CONNECTIING=!1},o.onabort=function(){console.error("request onabort"),n(!1,null),t.CONNECTIING=!1},o.onreadystatechange=function(){if(4==this.readyState&&200==o.status){var e=o.responseText;a.Logger.debug("http get response : "+e);var i=JSON.parse(e);n(!0,i),t.CONNECTIING=!0}};var i=e;a.Logger.debug("begin request server "+i),o.open("POST",i,!0),o.send()},Object.defineProperty(t.prototype,"baseUrl",{get:function(){return this.DEBUG_URL_DEV?t.DEBUGBASEURL:r.dm.gamesetting.reviewing?t.DEBUGBASEURL:r.dm.gamesetting.isServerModelRelease?t.BASEURL:t.DEBUGBASEURL},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"developmentUrl",{get:function(){return!!r.dm.gamesetting.reviewing||!r.dm.gamesetting.isServerModelRelease},enumerable:!1,configurable:!0}),t.prototype.Post=function(t,e,n){var r=this;a.Logger.debug("[NetworkManager post] method:",t," params:",e,"url:",this.baseUrl);var c=this.baseUrl+"/"+t;(e=e||{}).ver=this.VER_RES;var s="";if(e){for(var l in e)""!=s&&(s+="&"),s+=l+"="+encodeURIComponent(e[l]);s&&(c+="?"+s)}this._HttpPost(c,function(t,e){e&&1019==e.errcode?i.pm.showModal("Login expired","Login expired,Login again","\u786e\u5b9a",function(){i.pm.showToast("Login expired,Login again"),o.sm.switchScene(r.T_ldScene)}):(n(t,e),t&&e.errcode,e&&e.errcode)})},t.prototype.RequestBody=function(t,e,n){var r=this;a.Logger.debug("[NetworkManager post] method:",t," params:",e,"url:",this.baseUrl);var c=this.baseUrl+"/"+t;e=e||{};var s=JSON.stringify(e);this._HttpPostBody(c,s,function(t,e){e&&1019==e.errcode?i.pm.showModal("Login expired","Login expired,Login again","\u786e\u5b9a",function(){i.pm.showToast("Login expired,Login again"),o.sm.switchScene(r.T_ldScene)}):n(t,e)})},t.prototype._HttpPostBody=function(e,n,o){var i=new XMLHttpRequest;i.timeout=5e3,i.ontimeout=function(){console.error("request ontimeout"),o(!1,null),t.CONNECTIING=!1},i.onerror=function(){console.error("request onerror"),o(!1,null),t.CONNECTIING=!1},i.onabort=function(){console.error("request onabort"),o(!1,null),t.CONNECTIING=!1},i.onreadystatechange=function(){if(4==this.readyState&&200==i.status){var e=i.responseText;a.Logger.debug("http get response : "+e);var n=JSON.parse(e);o(!0,n),t.CONNECTIING=!0}};var r=e;a.Logger.debug("begin request server "+r),i.open("POST",r,!0),i.setRequestHeader("Content-Type","application/json"),i.send(n)},t.BASEURL="https://bhr.yudiangame.vip/hcfm",t.DEBUGBASEURL="https://bhr.yudiangame.vip/hcfm",t.CONNECTIING=!1,t.TIMES_RETRY=3,t.g_Instance=null,t}();n.default=c,n.net=c.instance,cc._RF.pop()},{"../utils/logger":"logger","./DataManager":"DataManager","./PlatformManager":"PlatformManager","./SceneManager":"SceneManager"}],NumberAction:[function(t,e,n){"use strict";cc._RF.push(e,"f2c5eaijRZLZqCq0MNMiprl","NumberAction");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../utils/Utils"),c=cc._decorator,s=c.ccclass,l=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.targetNumber=0,e.startNum=0,e.startTime=0,e.duration=0,e.playing=!1,e.colorBackup=null,e.scaleBackup=null,e.targetColor=null,e}var n;return i(e,t),n=e,e.prototype.onLoad=function(){},e.numberTo=function(t,e,o,i){if(void 0===o&&(o=300),t.getComponent(cc.Label)){var r=t.getComponent(n);r||(r=t.addComponent(n)),r.numberTo(e,o,i)}},e.prototype.numberTo=function(t,e,n){void 0===e&&(e=300),this.label||(this.label=this.node.getComponent(cc.Label),this.colorBackup=this.label.node.color,this.scaleBackup=cc.v2(this.label.node.scaleX,this.label.node.scaleY)),t!=~~this.label.string&&(this.targetNumber=t,this.duration=e,this.startNum=a.Utils.isNum(this.label.string)?Number(this.label.string):0,this.startTime=(new Date).getTime(),this.playing=!0,n&&(this.targetColor=n,this.label.node.color=n,this.label.node.scaleX=1.2*this.scaleBackup.x,this.label.node.scaleY=1.2*this.scaleBackup.y))},e.prototype.checkColor=function(t,e){return t.getA()==e.getA()&&t.getB()==e.getB()&&t.getG()==e.getG()&&t.getR()==e.getR()&&void 0},e.prototype.update=function(){if(this.label&&this.playing){var t=(new Date).getTime();if(t>=this.startTime+this.duration)return this.label.node.color=this.colorBackup,this.label.string=""+this.targetNumber,this.label.node.scaleX=this.scaleBackup.x,this.label.node.scaleY=this.scaleBackup.y,void(this.playing=!1);this.targetColor&&(this.label.node.color=this.targetColor);var e=(t-this.startTime)/this.duration,n=this.startNum+(this.targetNumber-this.startNum)*e;this.label.string=""+Math.floor(n)}},n=r([s],e)}(cc.Component));n.default=l,cc._RF.pop()},{"../../utils/Utils":"Utils"}],OneBeePanel:[function(t,e,n){"use strict";cc._RF.push(e,"12520ffCp9MH6xZeL0jT/fA","OneBeePanel");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../GameUtils"),c=t("../../common/UIManager"),s=t("../../../utils/Utils"),l=t("../../../utils/logger"),u=t("../../../utils/AniUtil"),p=t("../../../common/PlatformManager"),h=t("../../../common/DataManager"),f=t("../../../common/G"),d=t("../../../common/GlobalEvents"),g=cc._decorator,m=g.ccclass,y=g.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gp_content=null,e.next=null,e}var n;return i(e,t),n=e,e.show=function(t){return __awaiter(this,void 0,void 0,function(){var e,o;return __generator(this,function(i){switch(i.label){case 0:return[4,s.Utils.loadPefab(this.prefab_name)];case 1:return(e=i.sent())?((o=cc.instantiate(e)).getComponent(n).init(t),a.GameUtils.popView(o),[2]):(l.Logger.error("load oone_bee_panel error"),[2])}})})},e.prototype.init=function(t){u.AniUtil.aniWillShow(this.gp_content),this.next=t},e.prototype.onLoad=function(){u.AniUtil.aniShow(this.gp_content)},e.prototype.close=function(){this.node.removeFromParent(),this.node.destroy()},e.prototype.onBtnCloseClicked=function(){this.close()},e.prototype.onConfirmClicked=function(){var t=this;a.GameUtils.playSoundBtnClicked(),c.ui.showLoading(),p.pm.loadAndShowVideoAd(function(e){1==e?(c.ui.hideLoading(),f.GlobalEvent.dispatchEvent(new d.EventFourBee),t.close()):(l.Logger.error("video player error, revive"),c.ui.hideLoading())},h.dm.adids.AdInfo.Revive.adid)},e.prefab_name="prefab/game/panel/one_bee_panel",r([y(cc.Node)],e.prototype,"gp_content",void 0),n=r([m],e)}(cc.Component);n.default=v,cc._RF.pop()},{"../../../common/DataManager":"DataManager","../../../common/G":"G","../../../common/GlobalEvents":"GlobalEvents","../../../common/PlatformManager":"PlatformManager","../../../utils/AniUtil":"AniUtil","../../../utils/Utils":"Utils","../../../utils/logger":"logger","../../GameUtils":"GameUtils","../../common/UIManager":"UIManager"}],PartData:[function(t,e,n){"use strict";cc._RF.push(e,"76240FiEyJHdbYzrVF+fuI4","PartData"),Object.defineProperty(n,"__esModule",{value:!0}),n.PartData=n.WordFragment=n.TileData=void 0;var o=t("../../GameUtils"),i=t("../../../utils/Utils"),r=t("../../../utils/logger"),a=function(){function t(t){this.idxOfStack=-1,this.removed=!1,this.locking=!1,this.upper=[],this.coin=1,this.isWrong=!1,this.x=t.x,this.y=t.y,this.sid=Number.parseInt(t.sid)-2,this.z=t.z}return Object.defineProperty(t.prototype,"isInStack",{get:function(){return this.idxOfStack>=0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isBright",{get:function(){return 0==this.numUpper},enumerable:!1,configurable:!0}),t.prototype.addUpper=function(t,e){void 0===e&&(e=!1),e&&t.isMyUpper(this)||this.upper.push(t)},Object.defineProperty(t.prototype,"numUpper",{get:function(){return this.upper.length},enumerable:!1,configurable:!0}),t.prototype.clearUpper=function(){this.upper=[]},t.prototype.isMyUpper=function(t){return this.upper.includes(t)},t.prototype.tryPopUpper=function(t){if(!this.isMyUpper(t))return!1;var e=this.upper.findIndex(function(e){return e===t});return e>=0&&this.upper.splice(e,1),!0},t}();n.TileData=a;var c=function(){function t(t){this.left=void 0,this.right=void 0,this.str=void 0,this.picked=!1,this.str=t}return t.wordBreak=function(e){var n=Math.floor(e.length/2),o=new t(e.substring(0,n)),i=new t(e.substring(n));return o.right=i,i.left=o,[o,i]},t}();n.WordFragment=c;var s=function(){function t(t,e){this.tiles=[],this.tileNum=0,this.idx=0,this.refreshData(t,e)}return t.load=function(t,e){return __awaiter(this,void 0,void 0,function(){var n;return __generator(this,function(i){switch(i.label){case 0:return n="config/levels/"+t+"_"+e,r.Logger.debug("[PardData load] url:",n),[4,o.GameUtils.loadConfigFromAli(n)];case 1:return[2,i.sent()]}})})},Object.defineProperty(t.prototype,"wordList",{get:function(){if(!this._wordList){r.Logger.debug("words:",this.words),this._wordList=this.words.split(",");var t=this._wordList.length-this.tileNum/2;t>0?this._wordList.splice(this.tileNum/2,t):t<0&&r.Logger.error("[PardData wordList] \u5173\u5361\u8bcd\u6570\u5c11\u4e8e\u683c\u5b50\u5bf9\u6570")}return this._wordList},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"strFragment",{get:function(){if(!this._strFragment){for(var t=[],e=0;e<this.wordList.length;e++){var n=this.wordList[e];t.push.apply(t,c.wordBreak(n))}this._strFragment=t}return this._strFragment},enumerable:!1,configurable:!0}),t.prototype.refreshData=function(t,e){this._wordList=void 0,this._strFragment=void 0,this.words=e.words,this.width=t.width,this.height=t.height,this.tilewidth=t.tilewidth,this.tileheight=t.tileheight,this.tileNum=2*Math.floor(t.tiles.length/2),t.tiles.length%2!=0&&r.Logger.error("tiles.len:",t.tiles.length),r.Logger.debug("[PartData refreshData] coin:",e.coin,"/",this.tileNum),this.tiles=[];for(var n=0;n<this.tileNum;n++){var o=new a(t.tiles[n]);o.id=n;var c=i.Utils.randomInt(0,this.tileNum);o.coin=c<=e.coin?1:0,this.tiles.push(o)}this.refreshLayer(),this.refreshWord(),r.Logger.debug("[PartData]:",t)},t.prototype.popUpper=function(t){for(var e=0;e<this.tiles.length;e++){var n=this.tiles[e];n.removed||n.idxOfStack>=0||n.tryPopUpper(t)}},t.prototype.refreshWord_easy=function(){for(var t=[],e=[],n=0;n<this.tiles.length;n++){var o=this.tiles[n];o.removed||o.idxOfStack>=0||o.isBright&&(o.wordFragment?t.push(o):e.push(o))}if(0!=e.length)for(n=0;n<e.length;n++)e[n].wordFragment=this.strFragment[this.idx],this.idx++},t.prototype.refreshWord=function(){for(var t=[],e=[],n=0;n<this.tiles.length;n++){var o=this.tiles[n];o.removed||o.idxOfStack>=0||o.isBright&&(o.wordFragment?t.push(o):e.push(o))}if(0!=e.length){var a=[];for(n=0;n<this.strFragment.length;n++)(c=this.strFragment[n]).picked||a.push(c);for(0==a.length&&r.Logger.error("[PardData refreshWord] ffree.len == 0,\u53ef\u80fd\u662f\u5173\u5361\u8bcd\u6761\u5c11\u4e8e\u683c\u5b50\u6570\u91cf"),n=0;n<e.length-1;n++){var c=e[n],s=a[l=i.Utils.randomInt(0,a.length)];c.wordFragment=s,s.picked=!0,r.Logger.debug("pick ",s.str),a.splice(l,1),t.push(c)}var l,u=e.pop(),p=!1;for(n=0;n<t.length;n++){var h=(c=t[n]).wordFragment.left,f=c.wordFragment.right;if(h&&!h.picked){u.wordFragment=h,h.picked=!0,r.Logger.debug("pick ",h.str),p=!0;break}if(f&&!f.picked){u.wordFragment=f,f.picked=!0,r.Logger.debug("pick ",f.str),p=!0;break}}p||(r.Logger.debug("[PardData refreshWord] \u6ca1\u6709\u4e3a\u672c\u8f6e\u6700\u540e\u4e00\u4e2a\u683c\u5b50\u627e\u5230\u5339\u914d\u5bf9\u50cf\uff1a"),s=a[l=i.Utils.randomInt(0,a.length)],u.wordFragment=s,s.picked=!0)}},t.prototype.resetTiles=function(){for(var t=0;t<this.tiles.length;t++){var e=this.tiles[t];e.removed||e.isInStack||e.isBright&&(e.locking=!1,e.wordFragment.picked=!1,e.wordFragment=void 0)}this.refreshWord()},t.prototype.checkDeadlock=function(){for(var t=[],e=0;e<this.tiles.length;e++){var n=this.tiles[e];n.removed||n.isInStack||n.isBright&&t.push(n)}if(0!=t.length){if(1==t.length)return r.Logger.warn("[PartData cehckDeadlock] \u73b0\u573a\u53ea\u6709\u4e00\u4e2a\u9ad8\u4eae\u7684\u8bcd\u6761\uff0c\u65e0\u6cd5\u5b8c\u6210\u7684\u4efb\u52a1!!!"),{isMapResetd:!0};var o=!1;for(e=0;e<t.length;e++){for(var i=t[e],a=e+1;a<t.length;a++){var c=t[a],s=i.wordFragment.str+c.wordFragment.str;if(this.checkWordHit(s)>=0){o=!0;break}if(s=c.wordFragment.str+i.wordFragment.str,this.checkWordHit(s)>=0){o=!0;break}}if(o)break}if(!o)return r.Logger.warn("[PartData cehckDeadlock] \u73b0\u573a\u6ca1\u6709\u53ef\u914d\u5bf9\u7684\u8bcd\u6761,\u5077\u5077\u91cd\u7f6e"),this.resetTiles(),{isTilesResetd:!0}}else r.Logger.warn("[PartData cehckDeadlock] \u73b0\u573a\u6ca1\u6709\u9ad8\u4eae\u7684tile\uff0c\u5173\u5361\u7ed3\u675f\u4e86")},t.prototype.checkWordHit=function(t){for(var e=0;e<this.wordList.length;e++)if(t==this.wordList[e])return e;return-1},t.prototype.refreshLayer=function(){for(var t=0;t<this.tiles.length;t++){var e=this.tiles[t];if(!(e.removed||e.idxOfStack>=0)){e.clearUpper();for(var n=0;n<this.tiles.length;n++)if(t!=n){var o=this.tiles[n];o.removed||o.idxOfStack>=0||o.z<e.z||Math.abs(e.x-o.x)<this.tilewidth&&Math.abs(e.y-o.y)<this.tileheight&&(e.z==o.z?e.y==o.y?e.x<=o.x&&e.addUpper(o,e.x==o.x):e.y>o.y&&e.addUpper(o):e.z<o.z&&e.addUpper(o))}}}},t.prototype.findCouple=function(){for(var t=[],e=0;e<this.tiles.length;e++){var n=this.tiles[e];n.removed||n.isInStack||n.isBright&&t.push(n)}if(1!=t.length){var o=[];for(e=0;e<t.length;e++){for(var i=t[e],a=e+1;a<t.length;a++){var c=t[a],s=i.wordFragment.str+c.wordFragment.str;if(this.checkWordHit(s)>=0){o=[i,c];break}if(s=c.wordFragment.str+i.wordFragment.str,this.checkWordHit(s)>=0){o=[c,i];break}}if(o.length>0)break}return o}r.Logger.error("[PartData findCouple] \u73b0\u573a\u53ea\u6709\u4e00\u4e2a\u9ad8\u4eae\u7684\u8bcd\u6761\uff0c\u65e0\u6cd5\u5b8c\u6210\u7684\u4efb\u52a1!!!")},t}();n.PartData=s,cc._RF.pop()},{"../../../utils/Utils":"Utils","../../../utils/logger":"logger","../../GameUtils":"GameUtils"}],PlatformManager:[function(t,e,n){"use strict";cc._RF.push(e,"7260cu9V+5Cq7ckUIyOyk/H","PlatformManager"),Object.defineProperty(n,"__esModule",{value:!0}),n.pm=n.PlatformWeb=n.TRACK_EVENT_NAME=void 0;var o=t("./DataManager"),i=t("./NetworkManager"),r=t("../game/consts/GameConfig"),a=t("./consts/GlobalDefines"),c=t("../utils/logger"),s=t("./PlatformMiniGame"),l=t("../hagoSdk/FBManager");(function(t){t.GAME_INIT="GAME_INIT",t.ITEM_RESET_COIN_CLICKED="ITEM_RESET_COIN_CLICKED",t.ITEM_RESET_AD_CLICKED="ITEM_RESET_AD_CLICKED",t.ITEM_TIP_COIN_CLICKED="ITEM_TIP_COIN_CLICKED",t.ITEM_TIP_AD_CLICKED="ITEM_TIP_AD_CLICKED",t.BTN_CHALLENGE_CLICKED="BTN_CHALLENGE_CLICKED",t.STAGE_WIN="STAGE_WIN",t.CHALLENGE_WIN="CHALLENGE_WIN",t.RESULT_X="RESULT_X"})(n.TRACK_EVENT_NAME||(n.TRACK_EVENT_NAME={}));var u=function(){function t(){}return Object.defineProperty(t,"platform",{get:function(){return this._platform||(this.iswxGame?this._platform=new s.default:this._platform=new p),this._platform},enumerable:!1,configurable:!0}),Object.defineProperty(t,"iswxGame",{get:function(){return cc.sys.platform==cc.sys.WECHAT_GAME},enumerable:!1,configurable:!0}),Object.defineProperty(t,"isH5",{get:function(){return cc.sys.isBrowser},enumerable:!1,configurable:!0}),t}();n.default=u;var p=function(){function t(){}return t.prototype.tryShowWxButton=function(){},t.prototype.getLaunchOptionsSync=function(){},t.prototype.onLoad=function(){this.InitSysInfo()},t.prototype.InitSysInfo=function(){a.GlobalDefines.isIos=!1},t.prototype.LoadSubPackage=function(){return new Promise(function(t){t()}).catch(function(t){c.Logger.warn("[PlatformWeb LoadSubPackage] reason",t)})},t.prototype.Login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return[2,new Promise(function(t,e){i.net.Post("login",{token:"10001"},function(n,i){console.log("login return ",i),n&&0==i.errcode?(o.dm.player.token=i.token,o.dm.player.avatar=i.avatar,o.dm.player.name=i.name,t(null)):e(null)})})]})})},t.prototype.weakLogin=function(){return new Promise(function(t){t({encryptCombUser:"xDCEoVldXFG9Dl/vcXZV6mxOQ4DS7v7r5e2Ln2T8h2duKiD8322vBIDE3pNZjFZ7S/G/lzX0m1d67G2axHLAOu2WoR3SU99HQCJU00fIrIXOp8f09g9vmKCctwHCF4M6pdbDjucdRsz1+rNwhKoZDaKCjMJ9Y/Veal3eaMJT+qGNeeuQ5ioVHWnUtlKqTFlB0F000VxGWPvqJzK72Q9tFk+QZXuJTKL5NewEPQEomHAvsohCYMtQrFa7VBRcxN7wROAsBEPsYr1YxnjegknUjQ46iaxZlDuDHQ+4zrS92RLYunW+fRN41VLSnLkvZhB1RR7W+xP5nJtIPyQtaINKStWpkNSH3XBbPmAuXpVfKyF85J0G6pvhWA3sHM65iezMCR3iGPqgcTQo/hiuaoKXqpIrZeoF91vFgsOcbuN25h9VJNwpbFj1pRstWO6Vpz6h5YyH/d+8xH+RboCrkIl6Mp7+7rlGVxMTMnMEK2ZkNCyLTj+BnLG3O7p72BPm62VC18ZBOw33zaolFeo35bBRtGB0U4SAFsmiG8wMlXapQ6o=",sign:"483f15227d983e64b908fd98a32f8020",timestamp:1648455580})})},t.prototype.HotLogin=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return[2]})})},t.prototype.Get=function(t){var e=cc.sys.localStorage.getItem(t);return JSON.parse(e)},t.prototype.Set=function(t,e){cc.sys.localStorage.setItem(t,JSON.stringify(e))},t.prototype.preLoadVideoAd=function(t,e){c.Logger.debug("[PlatformManager preLoadVideoAd] adUnitId:",e),t&&t(!0)},t.prototype.showVideoAd=function(t){cc.audioEngine.pauseAll(),l.default.Instance.showRewardedVideo(function(){cc.audioEngine.resumeAll(),t&&t(!0)},function(){t&&t(!1)})},t.prototype.loadAndShowVideoAd=function(t){cc.audioEngine.pauseAll(),l.default.Instance.showRewardedVideo(function(){cc.audioEngine.resumeAll(),t&&t(!0)},function(){t&&t(!1)})},t.prototype.SetUserScore=function(t){cc.sys.localStorage.setItem("scoreData",JSON.stringify(t))},t.prototype.GetUserScore=function(){var t=cc.sys.localStorage.getItem("scoreData");return null==JSON.parse(t)?0:JSON.parse(t)},t.prototype.postMessage=function(){},t.prototype.OnShow=function(){},t.prototype.OnHide=function(){},t.prototype.Share=function(t,e,n,o,i){i&&i(3e3)},t.prototype.showLoading=function(){},t.prototype.hideLoading=function(){},t.prototype.getUpdateManager=function(){},t.prototype.showModal=function(t,e,n,o,i,r){1==confirm(t)?o&&o():r&&r()},t.prototype.showToast=function(){},t.prototype.aldStageOnStart=function(){},t.prototype.aldStageOnEnd=function(){},t.prototype.initPlayerInfoBtn=function(){},t.prototype.exitMiniProgram=function(){},t.prototype.VerifyMessage=function(){},t.prototype.onShareMessageToFriend=function(t){t&&t()},t.prototype.getMenuButtonBoundingClientRect=function(){return{width:174,height:64,top:52,right:355,bottom:104,left:530}},t.prototype.vibrateShort=function(t){c.Logger.debug("[\u77ed\u9707\u52a8]"),t&&t.complete&&t.complete()},t.prototype.vibrateLong=function(t){c.Logger.debug("[\u957f\u9707\u52a8]"),t&&t.complete&&t.complete()},t.prototype.isUseLowResource=function(){return!1},t.prototype.goCustomer=function(){c.Logger.debug("[\u547c\u53eb\u5ba2\u670d]")},t.prototype.setKeepScreenOn=function(){},t.prototype.preloadInterstitialAds=function(t,e){e&&e(!0,void 0)},t.prototype.loadAndShowInsertAd=function(t,e){e&&e(!0,void 0)},t.prototype.ShowInsertAd=function(t,e){e&&e(!0,void 0)},t.prototype.destroyInterstitialAd=function(){},t.prototype.triggerGC=function(){},t.prototype.showCustomAd=function(){},t.prototype.getExptInfoSync=function(t){var e={};return t.forEach(function(t){e[t]="0"}),e},t.prototype.HideAllAD=function(){},t.prototype.ShowBannnerBySize=function(){return __awaiter(this,void 0,Promise,function(){return __generator(this,function(){return[2,new Promise(function(t){t(!1)})]})})},t.prototype.GetBannerHeight=function(){},t.prototype.initReport=function(){},t.prototype.ShowBannerBySizePolling=function(t,e,n){return __awaiter(this,void 0,void 0,function(){var o,i;return __generator(this,function(r){switch(r.label){case 0:o=0,r.label=1;case 1:return o<t.length?(i=o,[4,this.ShowBannnerBySize(t[i],e)]):[3,4];case 2:if(r.sent())return n&&n(!0),[2];r.label=3;case 3:return o++,[3,1];case 4:return n&&n(!1),[2]}})})},t.prototype.ShowX=function(t,e){e&&e(!1)},t.prototype.trackEventPost=function(){},t.prototype.getTasks=function(t){r.GameConfig.OSS_URL_BASE,t&&t({taskList:[],banner:void 0})},t.prototype.logOpenTaskPanel=function(){},t.prototype.goTask=function(t,e){e&&e({})},t.prototype.getAward=function(t,e){e&&e({})},t.prototype.getSwitchData=function(){return!0},t}();n.PlatformWeb=p,n.pm=u.platform,cc._RF.pop()},{"../game/consts/GameConfig":"GameConfig","../hagoSdk/FBManager":"FBManager","../utils/logger":"logger","./DataManager":"DataManager","./NetworkManager":"NetworkManager","./PlatformMiniGame":"PlatformMiniGame","./consts/GlobalDefines":"GlobalDefines"}],PlatformMiniGame:[function(t,e,n){"use strict";cc._RF.push(e,"dd9318FdVBD5ZiYAR17u0zD","PlatformMiniGame"),Object.defineProperty(n,"__esModule",{value:!0}),n.WXSDK_TYPE=void 0;var o,i=t("./framework/WXSdk"),r=t("./framework/KongDaoSdk"),a=t("./framework/HortorSdkV2"),c=t("./framework/HortorSdk"),s=t("./consts/GlobalDefines"),l=t("./ABTestManager"),u=t("../utils/logger"),p=t("../game/data/ABTestConfig");(function(t){t[t.NONE=0]="NONE",t[t.HORTOR=1]="HORTOR",t[t.KONGDAO=2]="KONGDAO",t[t.HORTOR_V2=3]="HORTOR_V2"})(o=n.WXSDK_TYPE||(n.WXSDK_TYPE={}));var h=function(){function t(){this._wxsdk=void 0,this.onShow=void 0,this.systemInfo=void 0,this.lowResource=void 0,this._customAd=void 0}return Object.defineProperty(t.prototype,"wxsdk",{get:function(){if(!this._wxsdk)switch(s.GlobalDefines.CHANNEL){case o.NONE:this._wxsdk=new i.WXSdk;break;case o.HORTOR:this._wxsdk=new c.HortorSdk;break;case o.KONGDAO:this._wxsdk=new r.KongDaoSdk;break;case o.HORTOR_V2:this._wxsdk=new a.HortorSdkV2}return this._wxsdk},enumerable:!1,configurable:!0}),t.prototype.getLaunchOptionsSync=function(){return wx.getLaunchOptionsSync()},t.prototype.tryShowWxButton=function(){this.wxsdk.initPlayerInfoBtn()},t.prototype.onLoad=function(t){wx.showShareMenu({}),this.InitSysInfo(),this._wxsdk.init(t),this.wxsdk.onShareAppMessage(t.shareData.title,t.shareData.imageUrl),wx.onShow(function(e){t.onShow&&t.onShow(e)}),wx.onHide(function(){t.onHide&&t.onHide()}),wx.onShareMessageToFriend&&wx.onShareMessageToFriend(function(e){t.onShareMessageToFriend&&t.onShareMessageToFriend(e)})},t.prototype.LoadSubPackage=function(t){wx.loadSubpackage({name:"subpackage",success:function(){t()},fail:function(){u.Logger.debug("load subpackage fail")},complete:function(){u.Logger.debug("load subpackage complete")}})},t.prototype.InitSysInfo=function(){var t=wx.getSystemInfoSync();this.systemInfo=t,s.GlobalDefines.SDKVersion=t.SDKVersion,s.GlobalDefines.PixelRatio=t.pixelRatio,s.GlobalDefines.WindowHeight=t.windowHeight,s.GlobalDefines.WindowWidth=t.windowWidth,s.GlobalDefines.isIos=t.system.indexOf("iOS")>=0,s.GlobalDefines.platform=t.platform;var e=this.getMenuButtonBoundingClientRect(),n=750/s.GlobalDefines.WindowWidth;s.GlobalDefines.MenuButtonLogic={width:e.width*n,height:e.height*n,top:e.top*n,right:e.right*n,bottom:e.bottom*n,left:e.left*n},u.Logger.debug("GameDefines.platform",t.platform,",MenuButton:",s.GlobalDefines.MenuButtonLogic)},t.prototype.Login=function(){return __awaiter(this,void 0,void 0,function(){var t=this;return __generator(this,function(){return[2,new Promise(function(e,n){t.wxsdk.sdkLogin(function(t){t?e(t):n("\u767b\u5f55\u5931\u8d25\uff01")})})]})})},t.prototype.weakLogin=function(){var t=this;return new Promise(function(e,n){t.wxsdk.weakLogin(function(t){t?e(t):n("\u767b\u5f55\u5931\u8d25\uff01")})})},t.prototype.HotLogin=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return[2]})})},t.prototype.Get=function(t){return this._wxsdk.Get(t)},t.prototype.Set=function(t,e){this._wxsdk.Set(t,e)},t.prototype.preLoadVideoAd=function(t,e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){switch(n.label){case 0:return[4,this.wxsdk.checkVideoAd(t,e)];case 1:return n.sent(),[2]}})})},t.prototype.loadAndShowVideoAd=function(t,e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return this.wxsdk.showVideoAd(function(e){t(e)},e),[2]})})},t.prototype.preloadInterstitialAds=function(t,e){this.wxsdk.preloadInterstitialAds(t,function(t){e&&e(t)})},t.prototype.checkVideoAd=function(){},t.prototype.loadAndShowInsertAd=function(t,e){var n=this;this.wxsdk.preloadInterstitialAds([t],function(){n.wxsdk.showInterstitialAd(t,function(t){e&&e(t)})})},t.prototype.ShowInsertAd=function(t,e){this.wxsdk.showInterstitialAd(t,function(t){e&&e(t)})},t.prototype.destroyInterstitialAd=function(){this.wxsdk.destroyInterstitialAd()},t.prototype.OnShow=function(t){wx.onShow(function(e){t&&t(e)})},t.prototype.OnHide=function(t){wx.onHide(function(){t&&t()})},t.prototype.Share=function(t,e,n,o,i){var r=this,a=(new Date).getTime();u.Logger.debug("[MiniGame Share] query:",o),this.onShow&&wx.offShow(this.onShow),this.onShow=function(){var t=(new Date).getTime();i&&i(t-a),r.onShow&&wx.offShow(r.onShow)},wx.onShow(this.onShow),wx.shareAppMessage({title:t,imageUrl:e,ald_desc:n,query:o||""})},t.prototype.SetUserScore=function(t){this.wxsdk.SetUserScore(t)},t.prototype.postMessage=function(t){wx.postMessage(t)},t.prototype.showLoading=function(t,e){this.wxsdk.showLoading(t,e)},t.prototype.hideLoading=function(){this.wxsdk.hideLoading()},t.prototype.showModal=function(t,e,n,o,i,r){wx.showModal({title:t,content:e,confirmText:n||"\u786e\u5b9a",showCancel:!!r,cancelText:i,success:function(t){t.confirm?o&&o():r&&r()}})},t.prototype.showToast=function(t,e,n){this.wxsdk.showToast({title:t,duration:Math.max(~~e,2e3),complete:n})},t.prototype.getUpdateManager=function(){if(wx.getUpdateManager)return wx.getUpdateManager()},t.prototype.aldStageOnStart=function(){},t.prototype.aldStageOnEnd=function(){},t.prototype.initPlayerInfoBtn=function(){this.wxsdk.initPlayerInfoBtn()},t.prototype.exitMiniProgram=function(t){wx.exitMiniProgram(t)},t.prototype.VerifyMessage=function(t){var e=this,n=[];"ok"!=this.Get("isVerifyBox")&&n.push(c.VERIFY.BOX),"ok"!=this.Get("isVerifyNewVersion")&&n.push(c.VERIFY.NEWVERSION),"ok"!=this.Get("isVerifyOffline")&&n.push(c.VERIFY.OFFONLINE),0!=n.length?wx.requestSubscribeMessage({tmplIds:n,success:function(t){"accept"==t[c.VERIFY.BOX]&&(c.VERIFY.BOX,e.Set("isVerifyBox","ok")),"accept"==t[c.VERIFY.NEWVERSION]&&(c.VERIFY.NEWVERSION,e.Set("isVerifyNewVersion","ok")),"accept"==t[c.VERIFY.OFFONLINE]&&(c.VERIFY.OFFONLINE,e.Set("isVerifyOffline","ok"))},fail:function(t){console.log("requestSubscribeMessage fail === ",t)},complete:function(){t&&t()}}):t&&t()},t.prototype.onShareMessageToFriend=function(t){wx.onShareMessageToFriend(t)},t.prototype.getMenuButtonBoundingClientRect=function(){return this.wxsdk.getMenuButtonBoundingClientRect()},t.prototype.vibrateShort=function(t){u.Logger.debug("[\u77ed\u9707\u52a8]"),wx.vibrateShort(t)},t.prototype.vibrateLong=function(t){u.Logger.debug("[\u957f\u9707\u52a8]"),wx.vibrateLong(t)},t.prototype.isUseLowResource=function(){return void 0===this.lowResource&&(this.lowResource=this.systemInfo.model.startsWith("iPhone 6")||this.systemInfo.model.startsWith("iPhone 7")),this.lowResource},t.prototype.goCustomer=function(t,e){var n=this;this.wxsdk.goCustomer(t,e,function(){n.wxsdk.openCustomerServiceConversation()})},t.prototype.setKeepScreenOn=function(t){wx.setKeepScreenOn({keepScreenOn:t})},t.prototype.triggerGC=function(){this.wxsdk.triggerGC()},t.prototype.showVideoAd=function(){u.Logger.error("\u5e9f\u5f03")},t.prototype.showCustomAd=function(t){if(l.ab.IsABTestOpen(p.ABTestType.SingleGrid)){this._customAd&&(this._customAd.destroy(),this._customAd=void 0);var e=750/s.GlobalDefines.WindowWidth,n=100/e,o=s.GlobalDefines.MenuButtonLogic.right/e-n,i=s.GlobalDefines.MenuButtonLogic.bottom/e;this._customAd=wx.createCustomAd({adUnitId:t,style:{left:o,top:i,width:n,fixed:!0}}),this._customAd.show()}},t.prototype.getExptInfoSync=function(t){return wx.getExptInfoSync(t)},t.prototype.HideAllAD=function(){this.wxsdk.HideAllAD()},t.prototype.ShowBannnerBySize=function(t,e){return this.wxsdk.ShowBannnerBySize(t,e)},t.prototype.GetBannerHeight=function(){return this.wxsdk.GetBannerHeight()},t.prototype.initReport=function(){this.wxsdk.initReport()},t.prototype.ShowBannerBySizePolling=function(t,e,n){this.wxsdk.ShowBannerBySizePolling(t,e,n)},t.prototype.ShowX=function(t,e){this.wxsdk.ShowX(t,e)},t.prototype.trackEventPost=function(t,e){this.wxsdk.trackEventPost(t,e)},t.prototype.getTasks=function(t){this.wxsdk.getTasks(t)},t.prototype.logOpenTaskPanel=function(){this.wxsdk.logOpenTaskPanel()},t.prototype.goTask=function(t,e){this.wxsdk.goTask(t,e)},t.prototype.getAward=function(t,e){this.wxsdk.getAward(t,e)},t.prototype.getSwitchData=function(t){return this.wxsdk.getSwitchData(t)},t}();n.default=h,cc._RF.pop()},{"../game/data/ABTestConfig":"ABTestConfig","../utils/logger":"logger","./ABTestManager":"ABTestManager","./consts/GlobalDefines":"GlobalDefines","./framework/HortorSdk":"HortorSdk","./framework/HortorSdkV2":"HortorSdkV2","./framework/KongDaoSdk":"KongDaoSdk","./framework/WXSdk":"WXSdk"}],PlatformUtil:[function(t,e,n){"use strict";cc._RF.push(e,"507bbCIMGRKe4v+anZk9TKY","PlatformUtil"),Object.defineProperty(n,"__esModule",{value:!0}),n.PlatformUtil=void 0;var o=t("./PlatformManager"),i=function(){function t(){}return Object.defineProperty(t,"NEED_LOAD_GAMESETTING",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t,"NEED_LOGIN",{get:function(){return o.default.iswxGame||o.default.isH5||cc.sys.os==cc.sys.OS_ANDROID},enumerable:!1,configurable:!0}),Object.defineProperty(t,"NEED_TIME_CHECK",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t,"NEED_DATA_UPLOAD",{get:function(){return o.default.iswxGame||o.default.isH5||cc.sys.os==cc.sys.OS_ANDROID},enumerable:!1,configurable:!0}),t}();n.PlatformUtil=i,cc._RF.pop()},{"./PlatformManager":"PlatformManager"}],PlayerInfo:[function(t,e,n){"use strict";cc._RF.push(e,"f206eTwtyNFC4OyXlCMRs/t","PlayerInfo");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=t("./SaveDataConfig"),a=t("../consts/GameConfig"),c=t("../../utils/Utils"),s=t("../../common/SaveData"),l=t("../../common/GlobalEvents"),u=t("../../common/G"),p=function(t){function e(){return t.call(this,r.SaveKey[r.SaveKey.Player],e.Config)||this}return i(e,t),Object.defineProperty(e.prototype,"beeTip",{get:function(){return this.getValue(e.Config.beeTip.key)},set:function(t){this.setValue(e.Config.beeTip.key,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"totalBottle",{get:function(){return this.getValue(e.Config.totalBottle.key)},set:function(t){this.setValue(e.Config.totalBottle.key,t)},enumerable:!1,configurable:!0}),e.prototype.getWillUnlockKey=function(){for(var t=this.getFlower(),e=-1,n=-1,o=0;o<t.length;o++){for(var i=t[o],r=[],a=0;a<i.length;a++)i[a]<=0&&r.push(a);if(r.length>0){e=o,n=r[c.Utils.randomInt(0,r.length)];break}}return new cc.Vec2(e,n)},e.prototype.getFlower=function(){return this.getValue(e.Config.flower.key)},e.prototype.unlockFlower=function(t,n){var o=this.bottle,i=this.getFlower();i[t][n]=1,this.setValue(e.Config.flower.key,i),o==this.bottle||u.GlobalEvent.dispatchEvent(new l.EventBottleLevelUp(t))},Object.defineProperty(e.prototype,"refresh",{get:function(){return this.getValue(e.Config.refresh.key)},set:function(t){this.setValue(e.Config.refresh.key,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"magic",{get:function(){return this.getValue(e.Config.magic.key)},set:function(t){this.setValue(e.Config.magic.key,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottle",{get:function(){for(var t=this.getFlower(),e=-1,n=0;n<t.length;n++){for(var o=t[n],i=[],r=0;r<o.length;r++)o[r]<=0&&i.push(r);i.length<=0&&(e=n)}return e+1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxBottle",{get:function(){return this.getValue(e.Config.maxBottle.key)},set:function(t){this.setValue(e.Config.maxBottle.key,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxScore",{get:function(){return this.getValue(e.Config.maxScore.key)},set:function(t){this.setValue(e.Config.maxScore.key,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return this.getValue(e.Config.level.key)},set:function(t){this.setValue(e.Config.level.key,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"token",{get:function(){return this.getValue(e.Config.token.key)},set:function(t){this.setValue(e.Config.token.key,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"avatar",{get:function(){return this.getValue(e.Config.avatar.key)},set:function(t){this.setValue(e.Config.avatar.key,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.getValue(e.Config.name.key)},set:function(t){this.setValue(e.Config.name.key,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"initTimes",{get:function(){return this.getValue(e.Config.initTimes.key)},set:function(t){this.setValue(e.Config.initTimes.key,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"timeGameStart",{get:function(){return this.getValue(e.Config.timeGameStart.key)},set:function(t){var n=e.Config.timeGameStart.key;0==this.getValue(n)&&this.setValue(n,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"settingShake",{get:function(){return this.getValue(e.Config.settingShake.key)},set:function(t){this.setValue(e.Config.settingShake.key,t)},enumerable:!1,configurable:!0}),e.prototype.isFristDay=function(){return c.Utils.isToday(this.timeGameStart)},e.prototype.init=function(){t.prototype.init.call(this),this.initTimes++,a.GameConfig.DEBUG_STAGE},e.Config={initTimes:new s.SaveNodeConfig("initTimes",0,!1),timeGameStart:new s.SaveNodeConfig("timeGameStart",0,!1),settingShake:new s.SaveNodeConfig("settingShake",!0,!1),token:new s.SaveNodeConfig("token",void 0,!1),avatar:new s.SaveNodeConfig("avatar",void 0,!1),name:new s.SaveNodeConfig("name",void 0,!1),level:new s.SaveNodeConfig("level",0,!1),maxScore:new s.SaveNodeConfig("maxScore",0,!1),maxBottle:new s.SaveNodeConfig("maxBottle",0,!1),magic:new s.SaveNodeConfig("magic",0,!1),beeTip:new s.SaveNodeConfig("beeTip",0,!1),refresh:new s.SaveNodeConfig("refresh",0,!1),flower:new s.SaveNodeConfig("flower",[[1,1,1,1,1],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0]],!1),totalBottle:new s.SaveNodeConfig("totalBottle",0,!1)},e}(s.default);n.default=p,cc._RF.pop()},{"../../common/G":"G","../../common/GlobalEvents":"GlobalEvents","../../common/SaveData":"SaveData","../../utils/Utils":"Utils","../consts/GameConfig":"GameConfig","./SaveDataConfig":"SaveDataConfig"}],RankCell:[function(t,e,n){"use strict";cc._RF.push(e,"633aatDG+dPUZmNGGB0v+RJ","RankCell");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./RankUtils"),c=t("../SwitchNode"),s=t("../../../utils/Utils"),l=cc._decorator,u=l.ccclass,p=l.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gp_content=null,e.switch_idx=null,e.node_frame=null,e.node_avatar=null,e.lb_name=null,e.lb_idx=null,e.lb_bottle=null,e.lb_score=null,e.bg=null,e}var n;return i(e,t),n=e,e.create=function(t){return __awaiter(this,void 0,Promise,function(){var e,o;return __generator(this,function(i){switch(i.label){case 0:return[4,a.RankUtils.loadPefab(this.Prefab_Name)];case 1:return e=i.sent(),(o=cc.instantiate(e)).position=cc.v2(0,0),o.getComponent(n).refreshView(t),[2,o]}})})},e.prototype.refreshView=function(t){this.data=t,this.switch_idx.showIndex=Math.min(3,t.idx),this.lb_idx.string=t.idx+1+"",this.lb_name.string=t.itsMe?"\u6211":a.RankUtils.solveString(t.name,12)||"\u65e0\u540d",this.lb_bottle.string=~~t.bottle+"",this.lb_score.string=~~t.score+"",a.RankUtils.updateNodeSpriteFrame(t.avatar,this.node_avatar,!0),t.itsMe&&(this.bg.active=!1,this.lb_name.node.color=(new cc.Color).fromHEX("#FFFFFF"),this.lb_idx.node.color=(new cc.Color).fromHEX("#FFFFFF"),this.lb_score.node.color=(new cc.Color).fromHEX("#FFFFFF"),s.Utils.updateNodeSpriteFrame("images/mask_head_myself",this.node_frame)),(t.idx+1)%2==0&&(this.bg.color=(new cc.Color).fromHEX("#FAFAD5"),s.Utils.updateNodeSpriteFrame("images/mask_head_light",this.node_frame))},e.Prefab_Name="prefab/common/rank/rank_cell",r([p(cc.Node)],e.prototype,"gp_content",void 0),r([p(c.default)],e.prototype,"switch_idx",void 0),r([p(cc.Node)],e.prototype,"node_frame",void 0),r([p(cc.Node)],e.prototype,"node_avatar",void 0),r([p(cc.Label)],e.prototype,"lb_name",void 0),r([p(cc.Label)],e.prototype,"lb_idx",void 0),r([p(cc.Label)],e.prototype,"lb_bottle",void 0),r([p(cc.Label)],e.prototype,"lb_score",void 0),r([p(cc.Node)],e.prototype,"bg",void 0),n=r([u],e)}(cc.Component);n.default=h,cc._RF.pop()},{"../../../utils/Utils":"Utils","../SwitchNode":"SwitchNode","./RankUtils":"RankUtils"}],RankPanel:[function(t,e,n){"use strict";cc._RF.push(e,"fa87eW5nypICb3z0c/jU0kk","RankPanel");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./WorldView"),c=t("./RankUtils"),s=t("../SwitchNode"),l=t("../../DataManager"),u=t("../../consts/GlobalDefines"),p=t("../../../game/GameUtils"),h=cc._decorator,f=h.ccclass,d=h.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gp_content=null,e.switch_view=null,e.btn_back=null,e.worldRank=null,e.prefab_cell=null,e}var n;return i(e,t),n=e,e.show=function(t){return __awaiter(this,void 0,void 0,function(){var e,o;return __generator(this,function(i){switch(i.label){case 0:return t.popLayer.getComponentInChildren(n)?[2]:[4,c.RankUtils.loadPefab(this.Prefab_Name)];case 1:return e=i.sent(),(o=cc.instantiate(e)).getComponent(n).init(t),c.RankUtils.PopView(o,t.popLayer),[2]}})})},e.prototype.init=function(t){this.rankOpt=t,this.gp_content.opacity=0},e.prototype.start=function(){this.worldRank.init(this.rankOpt.worldData)},e.prototype.initBackBtn=function(){if(this.btn_back){var t=u.GlobalDefines.MenuButtonLogic.top,e=u.GlobalDefines.MenuButtonLogic.height;this.btn_back.y=u.GlobalDefines.ScreenHeight/2-t-e/2,this.btn_back.x=-330,cc.tween(this.btn_back).to(.3,{scale:1},{easing:cc.easing.backOut}).start()}},e.prototype.onLoad=function(){p.GameUtils.ShowX(l.dm.adids.XAdInfo.RankPanel.xid),cc.tween(this.gp_content).to(.3,{opacity:255},{easing:cc.easing.sineOut}).start()},e.prototype.onTapbtnClicked=function(t){p.GameUtils.playSoundBtnClicked();var e=t.node.getSiblingIndex();this.switch_view.showIndex=e},e.prototype.worldRankClicked=function(){p.GameUtils.playSoundBtnClicked(),this.switch_view.showIndex=0},e.prototype.friendRankClicked=function(){this.switch_view.showIndex=1},e.prototype.close=function(){this.rankOpt.onClosed&&this.rankOpt.onClosed(),this.node.removeFromParent(),this.node.destroy()},e.prototype.onBtnBackClicked=function(){p.GameUtils.playSoundBtnClicked(),this.close()},e.Prefab_Name="prefab/common/rank/rank_panel",r([d(cc.Node)],e.prototype,"gp_content",void 0),r([d(s.default)],e.prototype,"switch_view",void 0),r([d(cc.Node)],e.prototype,"btn_back",void 0),r([d(a.default)],e.prototype,"worldRank",void 0),r([d(cc.Prefab)],e.prototype,"prefab_cell",void 0),n=r([f],e)}(cc.Component);n.default=g,cc._RF.pop()},{"../../../game/GameUtils":"GameUtils","../../DataManager":"DataManager","../../consts/GlobalDefines":"GlobalDefines","../SwitchNode":"SwitchNode","./RankUtils":"RankUtils","./WorldView":"WorldView"}],RankUtils:[function(t,e,n){"use strict";cc._RF.push(e,"2cc91uxwQRASZR+ZTxrXlL3","RankUtils"),Object.defineProperty(n,"__esModule",{value:!0}),n.RankUtils=void 0;var o=function(){function t(){}return t.Init=function(){},t.updateNodeSpriteFrame=function(t,e,n,o,i){void 0===n&&(n=!1),void 0===o&&(o=void 0),void 0===i&&(i="png"),t&&t.startsWith("https://")&&cc.assetManager.loadRemote(t,{ext:"."+i},function(n,i){if(n)console.error("[YDWallManager updateNodeSpriteFrame isFromNet] url:",t,"/err:",n);else if(cc.isValid(e)){var r=new cc.SpriteFrame(i),a=e.getComponent(cc.Sprite);a&&(a.spriteFrame=r),o&&o(r)}})},t.loadPefab=function(t,e){return void 0===e&&(e=!1),__awaiter(this,void 0,Promise,function(){var e=this;return __generator(this,function(){return[2,new Promise(function(n,o){return __awaiter(e,void 0,void 0,function(){var e,i,r=this;return __generator(this,function(a){switch(a.label){case 0:e=function(){return __awaiter(r,void 0,void 0,function(){return __generator(this,function(){return[2,new Promise(function(e,n){var o=setTimeout(function(){n("oadPefab \u8fde\u63a5\u8d85\u65f6"+t)},1e4);cc.resources.load(t,function(t,i){clearTimeout(o),t?n(t):e(i)})})]})})},i=3,a.label=1;case 1:return i>0?[4,e().then(function(t){i=0,n(t)}).catch(function(t){--i<=0&&o(t)})]:[3,3];case 2:return a.sent(),[3,1];case 3:return[2]}})})})]})})},t.aniWillShow=function(t){t.opacity=0,t.scale=.7},t.aniShow=function(t,e){t.stopAllActions(),cc.tween(t).to(.3,{opacity:255,scale:1},{easing:cc.easing.sineOut}).call(function(){e&&e()}).start()},t.solveString=function(t,e){if(!t)return"";for(var n=0,o="",i=0;i<t.length;i++){if(t.charCodeAt(i)>127||94==t.charCodeAt(i)?n+=2:n++,n>e)return o+"...";o+=t.charAt(i)}return o},t.PopView=function(t,e){t.x=0,t.y=0,t.width=e.width,t.height=e.height,t.parent=e},t.postMessage=function(t){wx.postMessage(t)},t.OpenDataContextCommands={kInitSubContext:"init-sub-context",kShowGlobalRank:"show-global-rank",kHideGlobalFriendRankLayer:"hide-global-rank"},t}();n.RankUtils=o,cc._RF.pop()},{}],RankWxView:[function(t,e,n){"use strict";cc._RF.push(e,"ba699NtiX5D/7NTbr4NRDOv","RankWxView");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../common/comp/rank/RankUtils"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.subContextView=null,e}return i(e,t),e.prototype.onEnable=function(){var t={event:a.RankUtils.OpenDataContextCommands.kInitSubContext,data:{stageWidth:this.subContextView.node.width,stageHeight:this.subContextView.node.height}};a.RankUtils.postMessage(t),setTimeout(function(){a.RankUtils.postMessage({event:a.RankUtils.OpenDataContextCommands.kShowGlobalRank,data:{}})},0)},e.prototype.onDisable=function(){this.hideWXList()},e.prototype.hideWXList=function(){a.RankUtils.postMessage({event:a.RankUtils.OpenDataContextCommands.kHideGlobalFriendRankLayer,data:{}})},r([l(cc.SubContextView)],e.prototype,"subContextView",void 0),r([s],e)}(cc.Component);n.default=u,cc._RF.pop()},{"../../common/comp/rank/RankUtils":"RankUtils"}],RedDotManager:[function(t,e,n){"use strict";cc._RF.push(e,"84e7a5v3WxExJlJs2SuwPnx","RedDotManager");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.DotBase=n.red=n.RedDotManager=n.EventRedDotChanged=n.RedDotType=void 0;var r,a=t("../../common/G");(function(t){t[t.count=0]="count"})(r=n.RedDotType||(n.RedDotType={}));var c=function(t){function e(){var n=t.call(this,e.NAME,!0)||this;return n.dotType=0,n}return i(e,t),e.NAME="EventRedDotChanged",e}(cc.Event.EventCustom);n.EventRedDotChanged=c;var s=function(){function t(){this.all={}}return Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t)},enumerable:!1,configurable:!0}),t.prototype.onInit=function(){for(var t=0;t<r.count;t++)this.createDot(t)},t.prototype.createDot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},t.prototype.dispatchAll=function(){for(var t in this.all){var e=this.all[t];e.refresh(),e.dispatch()}},t.prototype.dispatchMask=function(t){for(var e=0;e<t.length;e++){var n=this.all[t[e]];n.refresh(),n.dispatch()}},t.prototype.getDotNum=function(t){var e=0;for(var n in this.all){var o=this.all[n];0!=(1<<o.dotType&t)&&(e+=o.num)}return e},t.prototype.addNum=function(t,e){var n=this.all[""+t];n&&n.addNum(e)},t.prototype.clearDotNum=function(t){var e=this.all[""+t];e&&e.clear()},t.prototype.refreshDot=function(t){var e=this.all[""+t];e&&e.refresh()},t._instance=null,t}();n.RedDotManager=s,n.red=s.instance;var l=function(){function t(t){this.dotType=0,this._num=0,this.dotType=t}return Object.defineProperty(t.prototype,"num",{get:function(){return this._num},set:function(t){this._num=t,this.dispatch()},enumerable:!1,configurable:!0}),t.prototype.dispatch=function(){var t=new c;t.dotType=this.dotType,a.GlobalEvent.dispatchEvent(t)},t.prototype.addNum=function(t){t<=0||(this.num=this._num+t)},t.prototype.clear=function(){this.num=0},t.prototype.refresh=function(){},t}();n.DotBase=l,cc._RF.pop()},{"../../common/G":"G"}],RedDot:[function(t,e,n){"use strict";cc._RF.push(e,"c55feX6o2dBkZRIvHqQlzoY","RedDot");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./RedDotManager"),c=t("../../common/G"),s=cc._decorator,l=s.ccclass,u=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.content=null,e.isRoom=!1,e.isStyle=!1,e.isWheel=!1,e.mark=0,e}return i(e,t),e.prototype.onLoad=function(){this.content.active=!1,this.initMark()},e.prototype.initMark=function(){this.mark=0},e.prototype.onEnable=function(){c.GlobalEvent.on(a.EventRedDotChanged.NAME,this.onEventRedDotChanged,this),this.content.active=a.red.getDotNum(this.mark)>0},e.prototype.onDisable=function(){c.GlobalEvent.off(a.EventRedDotChanged.NAME,this.onEventRedDotChanged,this)},e.prototype.onEventRedDotChanged=function(t){if(0!=(1<<t.dotType&this.mark)){var e=a.red.getDotNum(this.mark);this.content.active=e>0;var n=this.content.getComponentInChildren(cc.Label);n&&(n.string=e+"")}},r([u(cc.Node)],e.prototype,"content",void 0),r([u(cc.Boolean)],e.prototype,"isRoom",void 0),r([u(cc.Boolean)],e.prototype,"isStyle",void 0),r([u(cc.Boolean)],e.prototype,"isWheel",void 0),r([l],e)}(cc.Component);n.default=p,cc._RF.pop()},{"../../common/G":"G","./RedDotManager":"RedDotManager"}],ResultPanel:[function(t,e,n){"use strict";cc._RF.push(e,"caea7jeXw5MQYd11ZOEiAlu","ResultPanel");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../GameUtils"),c=t("../../common/UIManager"),s=t("../../../utils/Utils"),l=t("../../../utils/logger"),u=t("../../../utils/AniUtil"),p=t("../../../common/PlatformManager"),h=t("../../../common/GlobalEvents"),f=t("../../../common/GameManager"),d=t("../../../common/G"),g=t("../../../common/DataManager"),m=t("../../../common/consts/GlobalDefines"),y=t("../../../hagoSdk/HagoSdk"),v=cc._decorator,_=v.ccclass,b=v.property,w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gp_content=null,e.honeyCountLabel=null,e.bottleParent1=null,e.bottleParent2=null,e.allBottles=null,e.progress=null,e.box=null,e.awardCount=null,e.itemParent=null,e.item1=null,e.item1Label=null,e.item2=null,e.item2Label=null,e.videoBtn=null,e.normalBtn=null,e.awardTitle=null,e.confirmButton=null,e.bottleCount=0,e.refreshCount=0,e.magicCount=0,e}var n;return i(e,t),n=e,e.show=function(t){return __awaiter(this,void 0,void 0,function(){var e,o;return __generator(this,function(i){switch(i.label){case 0:return[4,s.Utils.loadPefab(this.prefab_name)];case 1:return(e=i.sent())?(o=cc.instantiate(e),a.GameUtils.popView(o),o.getComponent(n).init(t),[2]):(l.Logger.error("load result panel error"),[2])}})})},e.prototype.init=function(t){u.AniUtil.aniWillShow(this.gp_content),this.honeyCountLabel.string=y.default.instance.txt("47")+t,this.bottleCount=t},e.prototype.start=function(){a.GameUtils.ShowX(g.dm.adids.XAdInfo.GameEnd.xid),u.AniUtil.aniShow(this.gp_content),this.showNext(0);var t=g.dm.player.totalBottle,e=f.default.instance.resList.getNextLimit(t),n=t+this.bottleCount,o=n/e;o>1&&(o=1),this.progress.progress=t/e,cc.tween(this.progress).to(.3,{progress:o},{easing:cc.easing.backIn}).start(),g.dm.player.totalBottle=n,o>=1&&this.boxAction()},e.prototype.testAction=function(){this.boxAction()},e.prototype.boxAction=function(){var t=this;this.confirmButton.enabled=!1;var e=Math.random();e<=.4?(s.Utils.updateNodeSpriteFrame("/images/ico_magic_big",this.item1),this.item1Label.string=y.default.instance.txt("48"),this.magicCount+=1):this.refreshCount+=1,(e=Math.random())<=.4?(s.Utils.updateNodeSpriteFrame("/images/ico_magic_big",this.item2),this.item2Label.string=y.default.instance.txt("48"),this.magicCount+=1):this.refreshCount+=1,cc.tween(this.box).by(2*m.GlobalDefines.oneTm,{x:-5}).by(2*m.GlobalDefines.oneTm,{x:10}).by(2*m.GlobalDefines.oneTm,{x:-10}).by(2*m.GlobalDefines.oneTm,{x:10}).by(2*m.GlobalDefines.oneTm,{x:-10}).by(2*m.GlobalDefines.oneTm,{x:10}).by(2*m.GlobalDefines.oneTm,{x:-10}).by(2*m.GlobalDefines.oneTm,{x:10}).by(2*m.GlobalDefines.oneTm,{x:-10}).by(2*m.GlobalDefines.oneTm,{x:5}).delay(5*m.GlobalDefines.oneTm).call(function(){cc.tween(t.awardCount).to(15*m.GlobalDefines.oneTm,{opacity:0}).call(function(){t.awardTitle.active=!0,t.awardTitle.opacity=0,cc.tween(t.awardTitle).to(15*m.GlobalDefines.oneTm,{opacity:255}).start()}).start()}).by(10*m.GlobalDefines.oneTm,{y:190,scale:.7}).by(10*m.GlobalDefines.oneTm,{y:-420,scale:1}).delay(25*m.GlobalDefines.oneTm).to(5*m.GlobalDefines.oneTm,{scale:.2,opacity:127}).to(5*m.GlobalDefines.oneTm,{scale:3,opacity:0}).call(function(){t.itemParent.active=!0,t.item1.active=!0,t.item2.active=!0,t.item1.scale=0,t.item2.scale=0,cc.tween(t.item1).to(5*m.GlobalDefines.oneTm,{scale:1.2}).to(5*m.GlobalDefines.oneTm,{scale:1}).start(),cc.tween(t.item2).to(5*m.GlobalDefines.oneTm,{scale:1.2}).to(5*m.GlobalDefines.oneTm,{scale:1}).delay(20*m.GlobalDefines.oneTm).call(function(){t.videoBtn.active=!0,t.videoBtn.scale=0,cc.tween(t.videoBtn).to(5*m.GlobalDefines.oneTm,{scale:1.2}).to(5*m.GlobalDefines.oneTm,{scale:1}).delay(30*m.GlobalDefines.oneTm).call(function(){t.normalBtn.active=!0,t.normalBtn.scale=0,cc.tween(t.normalBtn).to(5*m.GlobalDefines.oneTm,{scale:1.2}).to(5*m.GlobalDefines.oneTm,{scale:1}).start()}).start()}).start()}).start()},e.prototype.showNext=function(t){for(var e=this,n=[],o=0;o<8;o++){if(t+o>=this.bottleCount)return;if(o<4){var i=this.addBottle(this.bottleParent1,o,t+o);n.push(i)}else i=this.addBottle(this.bottleParent2,o,t+o),n.push(i)}Promise.all(n).then(function(){t+8>=e.bottleCount||e.moveBottles().then(function(){e.showNext(t+=8)})}).catch(function(t){l.Logger.error("show bottle error = ",t)})},e.prototype.moveBottles=function(){var t=this;return new Promise(function(e){return __awaiter(t,void 0,void 0,function(){var t=this;return __generator(this,function(){return this.bottleParent1.childrenCount<=0&&e(null),cc.tween(this.allBottles).by(.4,{opacity:-255,x:-750},{easing:cc.easing.cubicOut}).call(function(){t.bottleParent1.removeAllChildren(),t.bottleParent2.removeAllChildren(),t.allBottles.opacity=255,t.allBottles.x+=750,e(null)}).start(),[2]})})})},e.prototype.addBottle=function(t,e,n){return __awaiter(this,void 0,void 0,function(){var o=this;return __generator(this,function(){return[2,new Promise(function(i){return __awaiter(o,void 0,void 0,function(){var o,r;return __generator(this,function(a){switch(a.label){case 0:return[4,s.Utils.loadPefab("prefab/game/ui/\u74f6\u5b50_1")];case 1:return(o=a.sent())?((r=cc.instantiate(o)).y=-r.height/2,t.addChild(r),r.scale=.4,r.opacity=0,r.getChildByName("index").getComponent(cc.Label).string=n+1+"",cc.tween(r).delay(.15*(e+1)).call(function(){r.opacity=255}).to(.25,{scale:1},{easing:cc.easing.backOut}).call(function(){i(null)}).start(),[2]):(l.Logger.error("load bottle prefab fail"),[2])}})})})]})})},e.prototype.close=function(){this.node.removeFromParent(),this.node.destroy()},e.prototype.onBtnCloseClicked=function(){a.GameUtils.playSoundBtnClicked(),d.GlobalEvent.dispatchEvent(new h.EventRestart(this.bottleCount)),g.dm.player.magic=g.dm.player.magic+this.magicCount,g.dm.player.refresh=g.dm.player.refresh+this.refreshCount,d.GlobalEvent.dispatchEvent(new h.EventTipChange),this.close()},e.prototype.doubleClicked=function(){var t=this;a.GameUtils.playSoundBtnClicked(),c.ui.showLoading(),p.pm.loadAndShowVideoAd(function(e){d.GlobalEvent.dispatchEvent(new h.EventRestart(t.bottleCount)),1==e?(g.dm.player.magic=g.dm.player.magic+2*t.magicCount,g.dm.player.refresh=g.dm.player.refresh+2*t.refreshCount,d.GlobalEvent.dispatchEvent(new h.EventTipChange),c.ui.hideLoading(),t.close()):(l.Logger.error("video player error, use bee tip"),c.ui.hideLoading())},g.dm.adids.AdInfo.DoubleAward.adid)},e.prototype.onConfirmClicked=function(){a.GameUtils.playSoundBtnClicked(),d.GlobalEvent.dispatchEvent(new h.EventRestart(this.bottleCount)),this.close()},e.prefab_name="prefab/game/panel/result_panel",r([b(cc.Node)],e.prototype,"gp_content",void 0),r([b(cc.Label)],e.prototype,"honeyCountLabel",void 0),r([b(cc.Node)],e.prototype,"bottleParent1",void 0),r([b(cc.Node)],e.prototype,"bottleParent2",void 0),r([b(cc.Node)],e.prototype,"allBottles",void 0),r([b(cc.ProgressBar)],e.prototype,"progress",void 0),r([b(cc.Node)],e.prototype,"box",void 0),r([b(cc.Node)],e.prototype,"awardCount",void 0),r([b(cc.Node)],e.prototype,"itemParent",void 0),r([b(cc.Node)],e.prototype,"item1",void 0),r([b(cc.Label)],e.prototype,"item1Label",void 0),r([b(cc.Node)],e.prototype,"item2",void 0),r([b(cc.Label)],e.prototype,"item2Label",void 0),r([b(cc.Node)],e.prototype,"videoBtn",void 0),r([b(cc.Node)],e.prototype,"normalBtn",void 0),r([b(cc.Node)],e.prototype,"awardTitle",void 0),r([b(cc.Button)],e.prototype,"confirmButton",void 0),n=r([_],e)}(cc.Component);n.default=w,cc._RF.pop()},{"../../../common/DataManager":"DataManager","../../../common/G":"G","../../../common/GameManager":"GameManager","../../../common/GlobalEvents":"GlobalEvents","../../../common/PlatformManager":"PlatformManager","../../../common/consts/GlobalDefines":"GlobalDefines","../../../hagoSdk/HagoSdk":"HagoSdk","../../../utils/AniUtil":"AniUtil","../../../utils/Utils":"Utils","../../../utils/logger":"logger","../../GameUtils":"GameUtils","../../common/UIManager":"UIManager"}],RevivePanel:[function(t,e,n){"use strict";cc._RF.push(e,"53b0ddXZwBGda7nKP0rsBDi","RevivePanel");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./ResultPanel"),c=t("../../GameUtils"),s=t("../../common/UIManager"),l=t("../../../utils/Utils"),u=t("../../../utils/logger"),p=t("../../../utils/AniUtil"),h=t("../../../common/PlatformManager"),f=t("../../../common/GlobalEvents"),d=t("../../../common/G"),g=t("../../../common/DataManager"),m=cc._decorator,y=m.ccclass,v=m.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gp_content=null,e.beeAni=null,e.honeyCount=0,e}var n;return i(e,t),n=e,e.show=function(t){return __awaiter(this,void 0,void 0,function(){var e,o;return __generator(this,function(i){switch(i.label){case 0:return[4,l.Utils.loadPefab(this.prefab_name)];case 1:return(e=i.sent())?((o=cc.instantiate(e)).getComponent(n).init(t),c.GameUtils.popView(o),[2]):(u.Logger.error("load "),[2])}})})},e.prototype.init=function(t){p.AniUtil.aniWillShow(this.gp_content),this.honeyCount=t},e.prototype.onLoad=function(){p.AniUtil.aniShow(this.gp_content)},e.prototype.start=function(){this.beeAni.play("\u590d\u6d3b\u914d\u56fe")},e.prototype.close=function(){this.node.removeFromParent(),this.node.destroy()},e.prototype.onBtnCloseClicked=function(){c.GameUtils.playSoundBtnClicked(),a.default.show(this.honeyCount),this.close()},e.prototype.onConfirmClicked=function(){var t=this;c.GameUtils.playSoundBtnClicked(),s.ui.showLoading(),h.pm.loadAndShowVideoAd(function(e){1==e?(s.ui.hideLoading(),d.GlobalEvent.dispatchEvent(new f.EventFourBee),t.close()):(u.Logger.error("video player error, revive"),s.ui.hideLoading())},g.dm.adids.AdInfo.Revive.adid)},e.prefab_name="prefab/game/panel/revive_panel",r([v(cc.Node)],e.prototype,"gp_content",void 0),r([v(cc.Animation)],e.prototype,"beeAni",void 0),n=r([y],e)}(cc.Component);n.default=_,cc._RF.pop()},{"../../../common/DataManager":"DataManager","../../../common/G":"G","../../../common/GlobalEvents":"GlobalEvents","../../../common/PlatformManager":"PlatformManager","../../../utils/AniUtil":"AniUtil","../../../utils/Utils":"Utils","../../../utils/logger":"logger","../../GameUtils":"GameUtils","../../common/UIManager":"UIManager","./ResultPanel":"ResultPanel"}],RewardTargeter:[function(t,e,n){"use strict";cc._RF.push(e,"8cb37A8cilI2b5BOji+nt3j","RewardTargeter");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../utils/AniUtil"),c=t("../../common/GlobalEvents"),s=t("../../common/G"),l=cc._decorator,u=l.ccclass,p=l.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.node_flush=null,e.type=-1,e}return i(e,t),e.prototype.onEnable=function(){s.GlobalEvent.on(c.EventOnGameBtnGetItem.NAME,this.onEventOnGameBtnGetItem,this)},e.prototype.onDisable=function(){s.GlobalEvent.off(c.EventOnGameBtnGetItem.NAME,this.onEventOnGameBtnGetItem,this)},e.prototype.onEventOnGameBtnGetItem=function(t){var e=this;if(!(this.type>=0&&t.rewardType!=this.type)){var n=this.node.convertToWorldSpaceAR(cc.v2(0,0));a.AniUtil.JumpTo2(t.ico,n,300,2,1,!0),setTimeout(function(){e.aniDou(e.node)},600)}},e.prototype.aniDou=function(t){var e=this;cc.tween(t).call(function(){e.node_flush.opacity=255,e.node_flush.active=!0}).to(.1,{scaleX:1.05,scaleY:.9},{easing:cc.easing.sineOut}).call(function(){cc.tween(e.node_flush).to(.3,{opacity:0},{easing:cc.easing.sineOut}).call(function(){e.node_flush.active=!1}).start()}).to(.1,{scaleX:.95,scaleY:1.05},{easing:cc.easing.sineOut}).to(.1,{scaleX:1.05,scaleY:.95},{easing:cc.easing.sineOut}).to(.1,{scaleX:1,scaleY:1},{easing:cc.easing.sineOut}).start()},r([p(cc.Node)],e.prototype,"node_flush",void 0),r([p(cc.Integer)],e.prototype,"type",void 0),r([u],e)}(cc.Component);n.default=h,cc._RF.pop()},{"../../common/G":"G","../../common/GlobalEvents":"GlobalEvents","../../utils/AniUtil":"AniUtil"}],RoteteForever:[function(t,e,n){"use strict";cc._RF.push(e,"747a6uHUupDQ4CEMHl0gSbS","RoteteForever");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spd=4,e.dir=!0,e}return i(e,t),e.prototype.init=function(t,e){this.spd=t,this.dir=e},e.prototype.begin=function(){var t=cc.repeatForever(cc.sequence(cc.rotateTo(this.spd/2,this.dir?180:-180),cc.rotateTo(this.spd/2,this.dir?360:-360),cc.rotateTo(0,0)));this.node.runAction(t)},e.prototype.pause=function(){this.node.pauseAllActions()},e.prototype.resume=function(){this.node.resumeAllActions()},e.prototype.onDisable=function(){this.node.stopAllActions()},r([s(cc.Float)],e.prototype,"spd",void 0),r([s(cc.Boolean)],e.prototype,"dir",void 0),r([c],e)}(cc.Component);n.default=l,cc._RF.pop()},{}],SaveDataConfig:[function(t,e,n){"use strict";cc._RF.push(e,"e0e7aHyrfJC14idHPK8H8+Q","SaveDataConfig"),Object.defineProperty(n,"__esModule",{value:!0}),n.SaveKey=void 0,function(t){t[t.Player=0]="Player",t[t.Challenge=1]="Challenge",t[t.Room=2]="Room",t[t.Style=3]="Style",t[t.Wheel=4]="Wheel"}(n.SaveKey||(n.SaveKey={})),cc._RF.pop()},{}],SaveData:[function(t,e,n){"use strict";cc._RF.push(e,"51228mM2o1E3bWLFSn4rcnl","SaveData"),Object.defineProperty(n,"__esModule",{value:!0}),n.SaveNodeConfig=n.DataNode=void 0;var o=t("./PlatformManager"),i=t("./GlobalEvents"),r=t("./G"),a=t("../utils/Utils"),c=t("../game/consts/GameConfig"),s=function(){function t(t,e){this.list=new Map,this.nodeConfig={},this._saveKey=t,this.nodeConfig=e}return Object.defineProperty(t.prototype,"saveKey",{get:function(){return this._saveKey+"_"+c.GameConfig.GAME_MODEL},enumerable:!1,configurable:!0}),t.prototype.init=function(){var t=o.pm.Get(this.saveKey),e=t?JSON.parse(t):{};for(var n in this.nodeConfig){var i=this.nodeConfig[n],r=new l(i,e);this.addNode(r)}},t.prototype.save=function(){var t={};this.list.forEach(function(e){var n=e.saveObj;t[e.key]=n}),o.pm.Set(this.saveKey,JSON.stringify(t))},t.prototype.addNode=function(t){this.list.set(t.key,t)},t.prototype.getNode=function(t){return this.list.get(t)},t.prototype.getValue=function(t){return this.getNode(t).value},t.prototype.setValue=function(t,e,n){void 0===n&&(n=!0);var o=this.getNode(t);o.value=e,r.GlobalEvent.dispatchEvent(new i.EventOnDataChange({model:this.saveKey,key:t,value:o.value})),n&&this.save()},t}();n.default=s;var l=function(){function t(t,e){if(this.key=t.key,this.normal=t.normal,this.daily=t.daily,e&&e[this.key]){var n=e[this.key];this._value=null==n.v?this.normal:n.v,this.saveTime=n.t||0}else this._value=this.normal}return Object.defineProperty(t.prototype,"value",{get:function(){if(this.daily){var t=a.Utils.getCurTime();a.Utils.isToday(this.saveTime)||(this._value=this.normal,this.saveTime=t)}return this._value},set:function(t){this._value=t,this.daily&&(this.saveTime=a.Utils.getCurTime())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"saveObj",{get:function(){var t={};return t.v=this._value,this.daily&&(t.t=this.saveTime),t},enumerable:!1,configurable:!0}),t}();n.DataNode=l,n.SaveNodeConfig=function(t,e,n){this.key=t,this.normal=e,this.daily=n},cc._RF.pop()},{"../game/consts/GameConfig":"GameConfig","../utils/Utils":"Utils","./G":"G","./GlobalEvents":"GlobalEvents","./PlatformManager":"PlatformManager"}],SceneLoadingUI:[function(t,e,n){"use strict";cc._RF.push(e,"0b1ee4nC1RJ04zPXxmIDzn4","SceneLoadingUI");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../utils/Utils"),c=t("../../utils/logger"),s=t("../../game/GameUtils"),l=cc._decorator,u=l.ccclass,p=l.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.title=null,e.progressNode=null,e}var n;return i(e,t),n=e,e.hide=function(){this._curUI&&(a.Utils.removeNode(this._curUI.node),this._curUI=void 0)},e.show=function(){this._curUI||(cc.instantiate(n.prefab).parent=s.GameUtils.loadingLayer)},e.preLoad=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return t=n,[4,a.Utils.loadPefab(n.Prefab_Name).catch(function(t){throw t})];case 1:return t.prefab=e.sent(),[2]}})})},e.setProgress=function(t){this._curUI&&(c.Logger.debug("[SceneLoadingUI setProgress] value:",t),this._curUI._setPorgress(t))},e.prototype.init=function(){n._curUI&&a.Utils.removeNode(n._curUI.node),n._curUI=this},e.prototype._setPorgress=function(t){t=Math.min(t,1),this.progressNode.getComponent(cc.Sprite).fillRange=t,this.title.string=100*t+"%",t>=1&&n.hide()},e.prototype.onLoad=function(){n._curUI||(n._curUI=this,this._setPorgress(0),this.title.string="11%")},e._curUI=null,e.prefab=null,e.Prefab_Name="prefab/common/SceneLoadingUI",r([p(cc.Label)],e.prototype,"title",void 0),r([p(cc.Node)],e.prototype,"progressNode",void 0),n=r([u],e)}(cc.Component);n.default=h,cc._RF.pop()},{"../../game/GameUtils":"GameUtils","../../utils/Utils":"Utils","../../utils/logger":"logger"}],SceneManager:[function(t,e,n){"use strict";cc._RF.push(e,"c7af9IpI15AlZWMO5S/sdlw","SceneManager");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.sm=n.GameScene=n.SceneType=void 0;var a=t("./GlobalEvents"),c=t("./G"),s=t("./comp/SceneLoadingUI"),l=t("../utils/Utils"),u=t("../utils/logger"),p=t("../game/common/UIManager");(function(t){t[t.Loading=0]="Loading",t[t.Main=1]="Main",t[t.StageBattle=2]="StageBattle"})(n.SceneType||(n.SceneType={}));var h=cc._decorator,f=h.ccclass,d=(h.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.initScene=function(t){void 0===t&&(t=void 0)},e.prototype.removeScene=function(){},e.prototype.getNode=function(){},e.prototype.getType=function(){return-1},r([f],e)}(cc.Component));n.GameScene=d;var g=function(){function e(){}return Object.defineProperty(e,"ins",{get:function(){return this._ins||new e},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(t){this.node=t},e.prototype.switchScene=function(e,n,o){return"LoadingScene"==e?e=t("LoadingScene").default:"MainScene"==e&&(e=t("MainScene").default),void 0===n&&(n=void 0),void 0===o&&(o=!1),__awaiter(this,void 0,void 0,function(){var t,i,r,l;return __generator(this,function(h){switch(h.label){case 0:return this.isSceneLoading=!0,t=e.GetType(),this.nextSceneType=t,u.Logger.debug("[GameManager swtichScene]>>>>>>>>>",t),(i=this.curScene)&&(p.ui.onSwitchScene(),i.removeScene()),r=this,[4,this.createScene(e)];case 1:return r.curScene=h.sent(),this.curScene&&(l=this.curScene.getNode(),this.node.destroyAllChildren(),this.node.addChild(l),c.GlobalEvent.dispatchEvent(new a.EventOnSwitchScene)),o&&s.default.setProgress(1),this.curScene?[4,this.curScene.initScene(n)]:[3,3];case 2:h.sent(),h.label=3;case 3:return this.lastSceneType=this.nextSceneType,this.isSceneLoading=!1,[2]}})})},e.prototype.createScene=function(t){return __awaiter(this,void 0,Promise,function(){var e,n,o,i;return __generator(this,function(r){switch(r.label){case 0:return[4,l.Utils.loadPefab(t.Prefab_Name)];case 1:for(e=r.sent(),(n=cc.instantiate(e)).width=this.node.width,n.height=this.node.height,n.x=0,n.y=0,o=n.getComponentsInChildren(cc.Component),i=0;i<o.length;i++)if(o[i]instanceof d)return[2,o[i]];return[2,void 0]}})})},e}();n.default=g,n.sm=g.ins,cc._RF.pop()},{"../game/common/UIManager":"UIManager","../utils/Utils":"Utils","../utils/logger":"logger","./G":"G","./GlobalEvents":"GlobalEvents","./comp/SceneLoadingUI":"SceneLoadingUI",LoadingScene:"LoadingScene",MainScene:"MainScene"}],ScoreView:[function(t,e,n){"use strict";cc._RF.push(e,"4bfcabV1F9KXoN3EhnFm5mx","ScoreView");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../common/topres/TopResSubViewBase"),c=t("../../common/PlatformManager"),s=t("../../common/GlobalEvents"),l=t("../../common/G"),u=t("../../common/DataManager"),p=cc._decorator,h=p.ccclass,f=p.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.curScoreLabel=null,e.maxScoreLabel=null,e.curScore=0,e.isScoreNodeBusy=!1,e}return i(e,t),e.prototype.onEnable=function(){l.GlobalEvent.on(s.EventScoreChange.NAME,this.addCurScore,this),l.GlobalEvent.on(s.EventRestart.NAME,this.gameEnd,this)},e.prototype.onDisable=function(){l.GlobalEvent.off(s.EventScoreChange.NAME,this.addCurScore,this),l.GlobalEvent.off(s.EventRestart.NAME,this.gameEnd,this)},e.prototype.onLoad=function(){this.curScoreLabel.string="0",this.maxScoreLabel.string=u.dm.player.maxScore+""},e.prototype.showNode=function(){},e.prototype.addCurScore=function(t){var e=this;this.curScore=t.score,this.curScoreLabel.string=""+this.curScore,this.isScoreNodeBusy||(this.isScoreNodeBusy=!0,cc.tween(this.curScoreLabel.node).to(.2,{scale:1.3},{easing:cc.easing.bounceInOut}).to(.1,{scale:1},{easing:cc.easing.bounceInOut}).call(function(){e.isScoreNodeBusy=!1}).start())},e.prototype.gameEnd=function(t){this.curScoreLabel.string="0",(this.curScore>u.dm.player.maxScore||t.bottleCount>u.dm.player.maxBottle)&&(this.maxScoreLabel.string=this.curScore+"",u.dm.player.token,this.curScore,t.bottleCount,u.dm.player.maxScore=this.curScore,u.dm.player.maxBottle=t.bottleCount,c.pm.SetUserScore(u.dm.player.maxScore),this.maxScoreLabel.string=u.dm.player.maxScore+"",this.curScore=0)},r([f(cc.Label)],e.prototype,"curScoreLabel",void 0),r([f(cc.Label)],e.prototype,"maxScoreLabel",void 0),r([h],e)}(a.default);n.default=d,cc._RF.pop()},{"../../common/DataManager":"DataManager","../../common/G":"G","../../common/GlobalEvents":"GlobalEvents","../../common/PlatformManager":"PlatformManager","../common/topres/TopResSubViewBase":"TopResSubViewBase"}],ScrollViewItemBase:[function(t,e,n){"use strict";cc._RF.push(e,"febb19EzidH4Kr2Xc/PwNZk","ScrollViewItemBase");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.data=null,e.index=-1,e}return i(e,t),e.prototype.onRefreshData=function(t,e){return this.data!=t&&(this.data=t,this.index=e,this.refreshView(),!0)},e.prototype.refreshView=function(){},r([c],e)}(cc.Component));n.default=s,cc._RF.pop()},{}],ScrollViewMagneticH:[function(t,e,n){"use strict";cc._RF.push(e,"978acm6SMhHtJJSYq8atXxt","ScrollViewMagneticH");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../utils/Utils"),c=t("./ScrollViewItemBase"),s=cc._decorator,l=s.ccclass,u=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.node_content=null,e.itemPrefab=null,e.space_left=0,e.space_right=0,e.itemWidth=0,e.itemHeight=0,e.callback_onScrolling=null,e.callback_onPageChanged=null,e.scrollView=null,e.ctx=0,e._dataList=[],e.numNull=0,e.preItemCount=0,e._pageIndex=0,e}return i(e,t),Object.defineProperty(e.prototype,"pageIndex",{get:function(){return this._pageIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"content",{get:function(){return this.scrollView.content},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){},e.prototype.setup=function(){if(!this.scrollView)if(this.scrollView=this.addComponent(cc.ScrollView),this.scrollView.horizontal=!0,this.scrollView.vertical=!1,this.scrollView.elastic=!1,this.node_content)this.node_content.width=this.node.width,this.node_content.height=this.node.height,this.node_content.x=0,this.node_content.y=0,this.scrollView.content=this.node_content;else{var t=new cc.Node("content");t.anchorX=0,t.width=this.node.width,t.height=this.node.height,this.node.addChild(t),this.scrollView.content=t}},e.prototype.onEnable=function(){this.registerEvent()},e.prototype.registerEvent=function(){this.scrollView.node.on("scrolling",this.onScrolling,this),this.scrollView.node.on("scroll-ended",this.scroll_ended,this)},e.prototype.onDisable=function(){this.callback_onScrolling=void 0,this.scrollView.scrollEvents.pop(),this.scrollView.node.off("scroll-ended",this.scroll_ended,this),this.scrollView.node.off("scrolling",this.onScrolling,this)},e.prototype.setting=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=-1);var o=Math.ceil(this.node.width/this.itemWidth);this.numNull=n<0?Math.floor(o/2):n,this.preItemCount=o+2,this.preItemCount=Math.min(t.length,this.preItemCount),this._pageIndex=e,this._dataList=t,a.Utils.removeAllChildren(this.scrollView.content);for(var i=[],r=0,c=0;c<this.preItemCount;c++)i.push(r++);for(var s=0;s<i.length;s++){c=i[s];var l=cc.instantiate(this.itemPrefab);l.name+=c,l.y=0;var u=c+e;l.x=u*this.itemWidth,l.width=this.itemWidth,l.height=this.itemHeight,this.scrollView.content.addChild(l),this.refreshItemData(l)}this.scrollView.content.width=this._dataList.length*this.itemWidth;var p=this.scrollView.getMaxScrollOffset();this.scrollView.content.x=Math.max(-p.x,-e*this.itemWidth+this.itemWidth*this.numNull)},e.prototype.update=function(){if(this.ctx=this.scrollView.content.x,this.scrollView.isAutoScrolling()){var t=this.ctx-this.ltx;!this.isPaging&&Math.abs(t)<5&&this.fixFocus(t>0)}this.ltx=this.ctx},e.prototype.fixFocus=function(t){var e=this;if(!this.backingOnTrack){this.backingOnTrack=!0,this.scrollView.stopAutoScroll();var n=Math.abs(this.ctx%this.itemWidth);if(0!=n){null==t&&(t=n>this.itemWidth/2);var o=Math.floor(this.scrollView.content.x/this.itemWidth)*this.itemWidth+(t?0:this.itemWidth),i=Math.abs(o)/this.scrollView.getMaxScrollOffset().x;this.calcPageNum(o),this.scrollView.scrollTo(cc.v2(i,0),.4),setTimeout(function(){e.backingOnTrack=!1,e.scrollView.stopAutoScroll()},400)}}},e.prototype.onScrolling=function(){if(this.scrollView.content.x-this.ctx>0)for(var t=0;t<this.preItemCount;t++)(e=this.scrollView.content.children[t]).x+this.scrollView.content.x>this.node.width+1.2*this.itemWidth&&(e.x=e.x-this.itemWidth*this.preItemCount,this.refreshItemData(e));else for(t=this.preItemCount-1;t>=0;t--){var e;(e=this.scrollView.content.children[t]).x+this.scrollView.content.x<1.2*-this.itemWidth&&(e.x=e.x+this.itemWidth*this.preItemCount,this.refreshItemData(e))}this.callback_onScrolling&&this.callback_onScrolling(this.scrollView.content.position)},e.prototype.scroll_ended=function(){},e.prototype.calcPageNum=function(t){var e=-Math.floor(t/this.itemWidth);this._pageIndex=e+this.numNull,console.log("pagenum:",this._pageIndex)},e.prototype.onTouchStart=function(t){this.xOnStart=t.touch.getLocationX(),this.isPaging=!1},e.prototype.onTouchEnd=function(t){t.touch.getLocationX(),this.scrollView.isAutoScrolling()||this.fixFocus()},e.prototype.pageNext=function(){var t=Math.min(this._dataList.length-1-this.numNull,this._pageIndex+1);this.pageToIndex(t)},e.prototype.pageLast=function(){var t=Math.max(this.numNull,this._pageIndex-1);this.pageToIndex(t)},e.prototype.pageToIndex=function(t){this.isPaging=!0,null!=t&&(this._pageIndex=t);var e=this.scrollView.getMaxScrollOffset().x,n=(this._pageIndex-this.numNull)*this.itemWidth/e;this.scrollView.scrollTo(cc.v2(n,0),.4),this.callback_onPageChanged&&this.callback_onPageChanged()},e.prototype.refreshItemData=function(t){var e=Math.floor(t.x/this.itemWidth);e<0||e>=this._dataList.length?t.active=!1:(t.active=!0,t.getComponent(c.default).onRefreshData(this._dataList[e],e))},r([u(cc.Node)],e.prototype,"node_content",void 0),r([u(cc.Prefab)],e.prototype,"itemPrefab",void 0),r([u(cc.Integer)],e.prototype,"space_left",void 0),r([u(cc.Integer)],e.prototype,"space_right",void 0),r([u(cc.Integer)],e.prototype,"itemWidth",void 0),r([u(cc.Integer)],e.prototype,"itemHeight",void 0),r([l],e)}(cc.Component);n.default=p,cc._RF.pop()},{"../../utils/Utils":"Utils","./ScrollViewItemBase":"ScrollViewItemBase"}],ScrollViewPartnerH:[function(t,e,n){"use strict";cc._RF.push(e,"36a369x7v5OnLaZFUHuXfBg","ScrollViewPartnerH");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../utils/Utils"),c=t("../../utils/logger"),s=t("./ScrollViewItemBase"),l=cc._decorator,u=l.ccclass,p=l.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.node_content=null,e.itemPrefab=null,e.pageModel=!1,e.space_left=0,e.space_right=0,e.itemWidth=0,e.itemHeight=0,e.callback_onScrolling=null,e.callback_onPageChanged=null,e.scrollView=null,e.cty=0,e._dataList=[],e.preItemCount=0,e._pageIndex=0,e}return i(e,t),Object.defineProperty(e.prototype,"pageIndex",{get:function(){return this._pageIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"content",{get:function(){return this.scrollView.content},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){},e.prototype.setup=function(){if(!this.scrollView){if(this.scrollView=this.addComponent(cc.ScrollView),this.scrollView.horizontal=!0,this.scrollView.vertical=!1,this.scrollView.elastic=!1,this.node_content)this.node_content.width=this.node.width,this.node_content.height=this.node.height,this.node_content.x=0,this.node_content.y=0,this.scrollView.content=this.node_content;else{var t=new cc.Node("content");t.anchorX=0,t.width=this.node.width,t.height=this.node.height,this.node.addChild(t),this.scrollView.content=t}this.getComponent(cc.Sprite)?c.Logger.debug("[ScrollViewPartnerH onLoad] \u70b9\u51fb\u5b58\u5728sprite\u7ec4\u4ef6\u5bfc\u81f4mask\u6dfb\u52a0\u5931\u8d25"):this.node.addComponent(cc.Mask).type=cc.Mask.Type.RECT}},e.prototype.onEnable=function(){this.registerEvent()},e.prototype.registerEvent=function(){var t=new cc.Component.EventHandler;t.target=this.node,t.handler="onScrolling",t.component="ScrollViewPartnerH",this.scrollView.scrollEvents.push(t),this.pageModel&&(this.scrollView.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this,!1),this.scrollView.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this,!1),this.scrollView.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this,!1))},e.prototype.onDisable=function(){this.callback_onScrolling=void 0,this.scrollView.scrollEvents.pop(),this.pageModel&&(this.scrollView.node.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this,!1),this.scrollView.node.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this,!1),this.scrollView.node.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this,!1))},e.prototype.setting=function(t,e){void 0===e&&(e=0),this._pageIndex=e,this._dataList=t,this.scrollView.content.x=-e*this.itemWidth,a.Utils.removeAllChildren(this.scrollView.content),this.preItemCount=Math.ceil(this.node.width/this.itemWidth)+2,this.preItemCount=Math.min(this._dataList.length,this.preItemCount);for(var n=[],o=0;o<this.preItemCount;o++)n.push(o);this.preItemCount>1&&(n[0]=1,n[1]=0);for(var i=0;i<n.length;i++){o=n[i];var r=cc.instantiate(this.itemPrefab);r.name+=o,r.y=0;var c=o+e;r.x=c*this.itemWidth,r.width=this.itemWidth,r.height=this.content.height,this.scrollView.content.addChild(r),this.refreshItemData(r)}this.scrollView.content.width=this._dataList.length*this.itemWidth},e.prototype.update=function(){this.cty=this.scrollView.content.x},e.prototype.onScrolling=function(){if(this.scrollView.content.x-this.cty>0)for(var t=0;t<this.preItemCount;t++)(e=this.scrollView.content.children[t]).x+this.scrollView.content.x>this.node.width+1.2*this.itemWidth&&(e.x=e.x-this.itemWidth*this.preItemCount,this.refreshItemData(e));else for(t=this.preItemCount-1;t>=0;t--){var e;(e=this.scrollView.content.children[t]).x+this.scrollView.content.x<1.2*-this.itemWidth&&(e.x=e.x+this.itemWidth*this.preItemCount,this.refreshItemData(e))}this.callback_onScrolling&&this.callback_onScrolling(this.scrollView.content.position)},e.prototype.onTouchStart=function(t){this.xOnStart=t.touch.getLocationX()},e.prototype.onTouchEnd=function(t){var e=t.touch.getLocationX()-this.xOnStart;this.xOnStart=void 0,e<-100?this.pageNext():e>100?this.pageLast():this.pageToIndex()},e.prototype.pageNext=function(){this._pageIndex=Math.min(this._dataList.length-1,++this._pageIndex),this.pageToIndex()},e.prototype.pageLast=function(){this._pageIndex=Math.max(0,--this._pageIndex),this.pageToIndex()},e.prototype.pageToIndex=function(t){null!=t&&(this._pageIndex=t);var e=this._pageIndex/(this._dataList.length-1);this.scrollView.scrollTo(cc.v2(e,0),.4),this.callback_onPageChanged&&this.callback_onPageChanged()},e.prototype.refreshItemData=function(t){var e=Math.floor(t.x/this.itemWidth);e<0||e>=this._dataList.length?t.active=!1:(t.active=!0,t.getComponent(s.default).onRefreshData(this._dataList[e],e))},r([p(cc.Node)],e.prototype,"node_content",void 0),r([p(cc.Prefab)],e.prototype,"itemPrefab",void 0),r([p(cc.Boolean)],e.prototype,"pageModel",void 0),r([p(cc.Integer)],e.prototype,"space_left",void 0),r([p(cc.Integer)],e.prototype,"space_right",void 0),r([p(cc.Integer)],e.prototype,"itemWidth",void 0),r([p(cc.Integer)],e.prototype,"itemHeight",void 0),r([u],e)}(cc.Component);n.default=h,cc._RF.pop()},{"../../utils/Utils":"Utils","../../utils/logger":"logger","./ScrollViewItemBase":"ScrollViewItemBase"}],ScrollViewPartner:[function(t,e,n){"use strict";cc._RF.push(e,"54737xRrkRGb5e1rkgeZoqe","ScrollViewPartner");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../utils/Utils"),c=t("./ScrollViewItemBase"),s=cc._decorator,l=s.ccclass,u=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.itemPrefab=null,e.scrollView=null,e.cty=0,e._dataList=[],e.preItemCount=0,e.itemHeight=0,e}return i(e,t),e.prototype.getScrollView=function(){return this.scrollView},e.prototype.onLoad=function(){if(this.node.anchorY=1,!this.scrollView){this.itemHeight=Math.floor(this.itemPrefab.height),this.itemPrefab.removeFromParent(),this.itemPrefab.anchorY=1,this.itemPrefab.anchorX=.5,this.itemPrefab.height=this.itemHeight,this.scrollView=this.addComponent(cc.ScrollView),this.scrollView.horizontal=!1,this.scrollView.vertical=!0;var t=new cc.Node("content");t.anchorY=1,t.width=this.node.width,t.height=0,this.node.addChild(t),this.scrollView.content=t,this.node.addComponent(cc.Mask).type=cc.Mask.Type.RECT;var e=new cc.Component.EventHandler;e.target=this.node,e.handler="onScrolling",e.component="ScrollViewPartner",this.scrollView.scrollEvents.push(e)}},e.prototype.onDisable=function(){},Object.defineProperty(e.prototype,"dataList",{get:function(){return this._dataList},set:function(t){var e=this;this._dataList=t,setTimeout(function(){e.scrollView.content.y=0,a.Utils.removeAllChildren(e.scrollView.content),e.preItemCount=Math.ceil(e.node.height/e.itemHeight)+2,e.preItemCount=Math.min(e._dataList.length,e.preItemCount);for(var t=0;t<e.preItemCount;t++){var n=cc.instantiate(e.itemPrefab);n.x=0,n.y=-t*e.itemHeight,e.scrollView.content.addChild(n),e.refreshItemData(n)}e.scrollView.content.height=e._dataList.length*e.itemHeight},0)},enumerable:!1,configurable:!0}),e.prototype.setDataListToBottom=function(t){var e=this;this._dataList=t,setTimeout(function(){e.scrollView.content.y=0,a.Utils.removeAllChildren(e.scrollView.content),e.preItemCount=Math.ceil(e.node.height/e.itemHeight)+2,e.preItemCount=Math.min(e._dataList.length,e.preItemCount);for(var t=0;t<e.preItemCount;t++){var n=cc.instantiate(e.itemPrefab);n.x=0,n.y=-t*e.itemHeight,e.scrollView.content.addChild(n),e.refreshItemData(n)}e.scrollView.content.height=e._dataList.length*e.itemHeight,e.scrollView.scrollToBottom(0),e.onScrolling(void 0)},0)},e.prototype.update=function(){this.cty=this.scrollView.content.y},e.prototype.onScrolling=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(this.scrollView.content.y-this.cty>0)for(var n=0;n<this.preItemCount;n++)(o=this.scrollView.content.children[n]).y+this.scrollView.content.y>this.itemHeight&&(o.y=o.y-this.itemHeight*this.preItemCount,this.refreshItemData(o));else for(n=this.preItemCount-1;n>=0;n--){var o;(o=this.scrollView.content.children[n]).y+this.scrollView.content.y<-this.node.height&&(o.y=o.y+this.itemHeight*this.preItemCount,this.refreshItemData(o))}},e.prototype.refreshItemData=function(t){var e=-Math.ceil(t.y/this.itemHeight);e<0||e>=this._dataList.length?t.active=!1:(t.active=!0,t.getComponent(c.default).onRefreshData(this._dataList[e]))},e.prototype.scrollToIndexItem=function(t){var e=t/(this._dataList.length-1);console.log("ScrollViewPartner scrollToIndexItem",t,e,this._dataList.length),this.scrollView.scrollTo(cc.v2(0,-e),.25)},Object.defineProperty(e.prototype,"children",{get:function(){return this.scrollView.content.children},enumerable:!1,configurable:!0}),r([u(cc.Node)],e.prototype,"itemPrefab",void 0),r([l],e)}(cc.Component);n.default=p,cc._RF.pop()},{"../../utils/Utils":"Utils","./ScrollViewItemBase":"ScrollViewItemBase"}],Shakeshake:[function(t,e,n){"use strict";cc._RF.push(e,"d7a4cJAwGhO7aoGE/rzvxcV","Shakeshake");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../utils/Utils"),c=cc._decorator,s=c.ccclass,l=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.timeout=void 0,e.standPos=void 0,e.range=2,e.cyc=2,e.removed=!1,e.timer=0,e}var n;return i(e,t),n=e,e.begin=function(t,e,o,i){void 0===e&&(e=300),void 0===o&&(o=2),void 0===i&&(i=2);var r=t.getComponent(n);r&&t.removeComponent(n),(r=t.addComponent(n))._begin(e,o,i)},e.remove=function(t){t&&t.removeComponent(n)},e.prototype._begin=function(t,e,n){var o=this;this.range=e,this.standPos=this.node.position,this.cyc=n,t>0&&(this.timeout=setTimeout(function(){o._end()},t))},e.prototype._end=function(){this.removed=!0},e.prototype.update=function(){if(this.removed)this.node.removeComponent(n);else{if(this.timer%this.cyc==0){var t=a.Utils.randomIntInclusive(-this.range,this.range),e=a.Utils.randomIntInclusive(-this.range,this.range);this.node.position=cc.v2(this.standPos.x+t,this.standPos.y+e)}this.timer++}},e.prototype.onDisable=function(){this.node.position=this.standPos,clearTimeout(this.timeout)},n=r([s],e)}(cc.Component));n.default=l,cc._RF.pop()},{"../../utils/Utils":"Utils"}],ShareUtil:[function(t,e,n){"use strict";cc._RF.push(e,"d6eff6eUlZHa6h6KJwHx94J","ShareUtil"),Object.defineProperty(n,"__esModule",{value:!0}),n.ShareUtil=void 0;var o=t("../consts/GameConfig"),i=t("../../utils/Utils"),r=t("../../common/PlatformManager"),a=function(){function t(){}return t.getShareParam=function(t){var e=[],n=function(n){var i=o.shareData[n],r=t.filter(function(t){return t==i.name});r&&r.length>0&&e.push(i)},o=this;for(var r in this.shareData)n(r);0==e.length&&e.push(this.shareData[1]);var a=i.Utils.randomInt(0,e.length),c=e[a],s=this.getShareImage(c.image,this.Share_ImgNum[""+c.image]),l=c.imageUrlId,u=c.imageUrl;return{title:c.title,imgUrl:s,type:c.name,imageUrlId:l,imageUrl:u}},t.getShareParamInAll=function(){var t=i.Utils.randomIntInclusive(1,this.Share_Obj_Num),e=this.shareData[t+""],n=this.getShareImage(e.image,this.Share_ImgNum[""+e.image]),o=e.imageUrlId,r=e.imageUrl;return{title:e.title,imgUrl:n,type:e.name,imageUrlId:o,imageUrl:r}},t.getShareImage=function(e,n){return void 0===e&&(e="fenxiangtu"),void 0===n&&(n=5),~~t.Share_ImgNum[e]>0&&(1==n?e+="_1":e=e+"_"+i.Utils.randomIntInclusive(1,n)),o.GameConfig.OSS_URL_BASE+"image/"+e+".png"},t.Share_Waitting_Time=2300,t.Share_Point_3Point="\u70b9\u70b9",t.Share_Point_Xuan="\u70ab\u8000",t.Share_Obj_Num=1,t.Share_ImgNum={},t.shareData={1:{index:1,name:"\u70b9\u70b9\u70b9",title:"\u4f60\u77e5\u9053\u8702\u871c\u662f\u600e\u4e48\u5f62\u6210\u7684\u5417\uff1f\u5feb\u6765\u770b\u770b\u5427\uff01",imageUrl:"",image:"fx"}},t.share=function(t,e){return void 0===e&&(e=""),__awaiter(this,void 0,Promise,function(){var n=this;return __generator(this,function(){return[2,new Promise(function(o,i){var a=n.getShareParam(t);r.pm.Share(a.title,a.imgUrl,a.type,e,function(t){t>n.Share_Waitting_Time?o():i()})})]})})},t}();n.ShareUtil=a,cc._RF.pop()},{"../../common/PlatformManager":"PlatformManager","../../utils/Utils":"Utils","../consts/GameConfig":"GameConfig"}],SmallBottle:[function(t,e,n){"use strict";cc._RF.push(e,"293daskKlhMNoMjNLnPxh/x","SmallBottle");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../utils/Utils"),c=t("../../common/GlobalEvents"),s=t("../../common/G"),l=t("../../common/DataManager"),u=t("../../common/consts/GlobalDefines"),p=cc._decorator,h=p.ccclass,f=p.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e}return i(e,t),e.prototype.init=function(t){this.label.string=""+t,this.refreshBottle()},e.prototype.onEnable=function(){s.GlobalEvent.on(c.EventBottleLevelUp.NAME,this.refreshBottle,this)},e.prototype.onDisable=function(){s.GlobalEvent.off(c.EventBottleLevelUp.NAME,this.refreshBottle,this)},e.prototype.refreshBottle=function(){var t=l.dm.player.bottle;if(!(t<=1)){var e="prefab/game/ui/bottle_"+t+"s";a.Utils.updateNodeSpriteFrame(e,this.node)}},e.prototype.updateLabel=function(t){if(t>u.GlobalDefines.MaxSmallBottle){var e=t-u.GlobalDefines.MaxSmallBottle+1;this.label.string="+"+e}else this.label.string=""+t},r([f(cc.Label)],e.prototype,"label",void 0),r([h],e)}(cc.Component);n.default=d,cc._RF.pop()},{"../../common/DataManager":"DataManager","../../common/G":"G","../../common/GlobalEvents":"GlobalEvents","../../common/consts/GlobalDefines":"GlobalDefines","../../utils/Utils":"Utils"}],SpriteToHome:[function(t,e,n){"use strict";cc._RF.push(e,"00aa0VsCDNB16TtWnSYVj10","SpriteToHome");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../utils/Utils"),c=t("../../game/GameUtils"),s=cc._decorator,l=s.ccclass,u=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e.withRotation=!1,e.endEffectPos=void 0,e.spdx=30,e.spdy=10,e.groundNum=0,e.center=void 0,e.status=!0,e.next=void 0,e.toScale=1,e.aniBackOut=!0,e}var n;return i(e,t),n=e,e.createVehicle=function(t,e,o,i,r){return __awaiter(this,void 0,void 0,function(){var a,s,l;return __generator(this,function(){return(a=new cc.Node).width=t.width,a.height=t.height,a.position=e,(s=cc.instantiate(t)).removeComponent(cc.Widget),s.x=0,s.y=0,s.parent=a,(l=a.addComponent(n)).next=r,l.withRotation=i,l.endEffectPos=c.GameUtils.effectLayer.convertToNodeSpaceAR(o),l.icon=s,c.GameUtils.addEffectAR(a),[2]})})},e.create=function(t,e,o,i,r,a){return void 0===a&&(a=1),__awaiter(this,void 0,void 0,function(){var s,l,u,p;return __generator(this,function(){return s=new cc.Node,l=new cc.Node,s.addChild(l),u=l.addComponent(cc.Sprite),l.scale=a,u.sizeMode=cc.Sprite.SizeMode.RAW,u.spriteFrame=t,(p=s.addComponent(n)).withRotation=i,p.next=r,s.position=e,p.endEffectPos=c.GameUtils.effectLayer.convertToNodeSpaceAR(o),c.GameUtils.addEffectAR(s),[2]})})},e.createNode=function(t,e,o,i,r,a,s){return void 0===a&&(a=1),void 0===s&&(s=!0),__awaiter(this,void 0,void 0,function(){var l,u;return __generator(this,function(){return l=new cc.Node("effectNode"),t.parent=l,t.position=cc.v2(0,0),l.position=e,(u=l.addComponent(n)).withRotation=i,u.endEffectPos=c.GameUtils.effectLayer.convertToNodeSpaceAR(o),u.next=r,u.toScale=a,u.aniBackOut=s,c.GameUtils.addEffectAR(l),[2]})})},e.prototype.onLoad=function(){var t=this;this.icon=this.node.children[0],this.node.scale=a.Utils.randomFloat(.9,1.1),cc.tween(this.node).to(.8,{position:this.endEffectPos,scale:this.toScale},{easing:cc.easing.sineIn}).call(function(){cc.tween(t.node).to(.2,{opacity:0,scale:1.4},{easing:cc.easing.sineOut}).call(function(){t.icon.stopAllActions(),t.node.stopAllActions(),a.Utils.removeNode(t.node)}).start(),t.next&&t.next()}).start(),this.withRotation&&(this.icon.angle=180),this.aniBackOut&&cc.tween(this.icon).to(.24,{y:-200},{easing:cc.easing.sineInOut}).to(.8*.7,{y:0},{easing:cc.easing.sineIn}).start()},n=r([l],e)}(cc.Component));n.default=u,cc._RF.pop()},{"../../game/GameUtils":"GameUtils","../../utils/Utils":"Utils"}],StageScene:[function(t,e,n){"use strict";cc._RF.push(e,"5fa746JJS1OOLzKrOZCnNE+","StageScene");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./BattleLogic"),c=t("./BattleEvents"),s=t("../GameUtils"),l=t("../common/RedDotManager"),u=t("../../common/SceneManager"),p=t("../../common/PlatformManager"),h=t("../../common/GlobalEvents"),f=t("../../common/G"),d=cc._decorator,g=d.ccclass,m=d.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.battleLogic=null,e.gp_banner=null,e}var n;return i(e,t),n=e,e.GetType=function(){return u.SceneType.StageBattle},e.prototype.getType=function(){return n.GetType()},e.prototype.getNode=function(){return this.node},e.prototype.initScene=function(t){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(n){switch(n.label){case 0:return f.GlobalEvent.dispatchEvent(new c.EventOnBattleEnter),[4,s.GameUtils.showTopresGame()];case 1:return n.sent(),e=t?t.level:-1,[4,this.battleLogic.refreshLevel(e)];case 2:return n.sent(),l.red.dispatchAll(),[2]}})})},e.prototype.removeScene=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return s.GameUtils.ClearCustomBanner(),p.pm.HideAllAD(),f.GlobalEvent.dispatchEvent(new c.EventOnBattleOut),[2]})})},e.prototype.onEnable=function(){f.GlobalEvent.on(c.EventOnBattleStart.NAME,this.onEventOnBattleStart,this),f.GlobalEvent.on(h.EventOnShow.NAME,this.onEventWXOnShow,this)},e.prototype.onDisable=function(){f.GlobalEvent.off(c.EventOnBattleStart.NAME,this.onEventOnBattleStart,this),f.GlobalEvent.off(h.EventOnShow.NAME,this.onEventWXOnShow,this)},e.prototype.onEventOnBattleStart=function(){setTimeout(function(){},0)},e.prototype.onEventWXOnShow=function(){s.GameUtils.ShowX()},e.Prefab_Name="prefab/game/scene/stage_battle_scene",r([m(a.default)],e.prototype,"battleLogic",void 0),r([m(cc.Node)],e.prototype,"gp_banner",void 0),n=r([g],e)}(u.GameScene);n.default=y,cc._RF.pop()},{"../../common/G":"G","../../common/GlobalEvents":"GlobalEvents","../../common/PlatformManager":"PlatformManager","../../common/SceneManager":"SceneManager","../GameUtils":"GameUtils","../common/RedDotManager":"RedDotManager","./BattleEvents":"BattleEvents","./BattleLogic":"BattleLogic"}],SwitchNode:[function(t,e,n){"use strict";cc._RF.push(e,"a0034GzL91D87/6VkbzRyXp","SwitchNode");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ani=!1,e._showIndex=0,e}return i(e,t),e.prototype.onLoad=function(){if(this.ani)for(var t=0;t<this.node.childrenCount;t++)this.node.children[t].active=!1},Object.defineProperty(e.prototype,"showIndex",{get:function(){return this._showIndex},set:function(t){if(this.ani)for(var e=function(e){var o=n.node.children[e];o.active?e!=t&&(o.stopAllActions(),cc.tween(o).to(.2,{scale:0},{easing:cc.easing.sineIn}).call(function(){o.active=!1}).start()):e==t&&(o.stopAllActions(),o.active=!0,o.scale=0,cc.tween(o).to(.2,{scale:1},{easing:cc.easing.sineInOut}).start())},n=this,o=0;o<this.node.childrenCount;o++)e(o);else for(o=0;o<this.node.childrenCount;o++)this.node.children[o].active=o==t;this._showIndex=t},enumerable:!1,configurable:!0}),r([s(cc.Boolean)],e.prototype,"ani",void 0),r([c],e)}(cc.Component);n.default=l,cc._RF.pop()},{}],TableItem:[function(t,e,n){"use strict";cc._RF.push(e,"2b7e5qADI5D8LNrgPjjjhdb","TableItem");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../GameUtils"),c=t("../../../utils/Utils"),s=t("../../../utils/logger"),l=t("../../../common/GlobalEvents"),u=t("../../../common/GameManager"),p=t("../../../common/G"),h=t("../../../common/DataManager"),f=t("../../../hagoSdk/HagoSdk"),d=cc._decorator,g=d.ccclass,m=d.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tipLabel=null,e.items=[],e.select=null,e.index=-1,e.awardIndex=-1,e.awardNode=null,e}return i(e,t),e.prototype.onEnable=function(){p.GlobalEvent.on(l.EventAwardJumpEnd.NAME,this.newGet,this),p.GlobalEvent.on(l.EventBottleLevelUp.NAME,this.bottleLevelUp,this)},e.prototype.onDisable=function(){p.GlobalEvent.off(l.EventAwardJumpEnd.NAME,this.newGet,this),p.GlobalEvent.off(l.EventBottleLevelUp.NAME,this.bottleLevelUp,this)},e.prototype.bottleLevelUp=function(t){this.select.active=!1,this.index==t.flowerSeriesIndex&&(this.select.active=!0)},e.prototype.initAwardNode=function(){if(-1!=this.awardIndex){var t=this.items[this.awardIndex],e="images/gird/"+(this.index+1)+"_"+(this.awardIndex+1);4==this.awardIndex&&(e="images/gird/"+(this.index+1)),null==this.awardNode&&(this.awardNode=new cc.Node,this.awardNode.addComponent(cc.Sprite)),this.awardNode.anchorY=t.anchorY,this.awardNode.parent=t.parent,this.awardNode.position=t.position,c.Utils.updateNodeSpriteFrame(e,this.awardNode,!1),this.awardNode.opacity=0}},e.prototype.newGet=function(){if(-1!=this.awardIndex){var t=this.items[this.awardIndex];this.index,this.awardIndex,4==this.awardIndex&&this.index,t.opacity=0,this.awardNode.opacity=255,t.scale=.2,cc.tween(this.awardNode).to(1/30*5,{scale:1.5}).to(1/30*5,{scale:.9}).to(1/30*5,{scale:1.2}).to(1/30*5,{scale:1}).start(),h.dm.player.unlockFlower(this.index,this.awardIndex),a.GameUtils.playSFX("\u65b0\u82b1\u653e\u5230\u82b1\u67b6\u5b50")}},e.prototype.initByData=function(t,e,n){var o=this;if(this.index=t,e&&(this.select.active=!0),this.initLabel(t),t>=4)this.initAftertimeItem();else{var i=h.dm.player.getFlower();if(t>=i.length||t<0)s.Logger.error("bottle index error ",t);else{for(var r=i[t],a=function(e){if(u.items[e].active=!0,r[e]>0){var n="images/gird/"+(t+1)+"_"+(e+1);4==e&&(n="images/gird/"+(t+1)),u.items[e].opacity=0,u.items[e].scale=.4,c.Utils.updateNodeSpriteFrame(n,u.items[e],!1,function(){cc.tween(o.items[e]).delay(.07*e).to(.2,{opacity:255,scale:1},{easing:cc.easing.backInOut}).start()})}else c.Utils.updateNodeSpriteFrame("images/flower/"+(t+1)+"_"+(e+1)+"_unlock",u.items[e])},u=this,f=0;f<r.length;f++)a(f);-1!=n&&(this.awardIndex=n,this.initAwardNode(),setTimeout(function(){var t=o.items[n].convertToWorldSpaceAR(cc.v2(0,o.items[n].height/2));p.GlobalEvent.dispatchEvent(new l.EventAwardPos(t))},50))}}},e.prototype.initLabel=function(t){switch(t){case 0:var e=u.default.instance.resList.honeyScore[0];this.tipLabel.string=f.default.instance.txt("42",e);break;case 1:e=u.default.instance.resList.honeyScore[1],this.tipLabel.string=f.default.instance.txt("43",e);break;case 2:e=u.default.instance.resList.honeyScore[2],this.tipLabel.string=f.default.instance.txt("44",e);break;case 3:e=u.default.instance.resList.honeyScore[3],this.tipLabel.string=f.default.instance.txt("45",e);break;case 4:this.tipLabel.string=f.default.instance.txt("46")}},e.prototype.initAftertimeItem=function(){for(var t=this,e=function(e){c.Utils.updateNodeSpriteFrame("images/flower/unknown",n.items[e],!1,function(){t.items[e].active=!0}),n.items[e].y+=20},n=this,o=0;o<5;o++)e(o)},r([m(cc.Label)],e.prototype,"tipLabel",void 0),r([m([cc.Node])],e.prototype,"items",void 0),r([m(cc.Node)],e.prototype,"select",void 0),r([g],e)}(cc.Component);n.default=y,cc._RF.pop()},{"../../../common/DataManager":"DataManager","../../../common/G":"G","../../../common/GameManager":"GameManager","../../../common/GlobalEvents":"GlobalEvents","../../../hagoSdk/HagoSdk":"HagoSdk","../../../utils/Utils":"Utils","../../../utils/logger":"logger","../../GameUtils":"GameUtils"}],TablePanel:[function(t,e,n){"use strict";cc._RF.push(e,"55dbbZvp21ILaKuxA2UeQkH","TablePanel");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./TableItem"),c=t("../../GameUtils"),s=t("../../../utils/Utils"),l=t("../../../utils/logger"),u=t("../../../utils/AniUtil"),p=t("../../../common/DataManager"),h=cc._decorator,f=h.ccclass,d=h.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gp_content=null,e.scrollView=null,e.itemContent=null,e.triangle=null,e.selectIndex=0,e.seriesIndex=0,e.flowIndex=0,e}var n;return i(e,t),n=e,e.show=function(t,e,o){return __awaiter(this,void 0,void 0,function(){var i,r;return __generator(this,function(a){switch(a.label){case 0:return[4,s.Utils.loadPefab(this.prefab_name)];case 1:return(i=a.sent())?((r=cc.instantiate(i)).getComponent(n).init(t,e,o),c.GameUtils.popView(r),[2]):(l.Logger.error("load table panel fail"),[2])}})})},e.prototype.onLoad=function(){var t=this;u.AniUtil.aniShow(this.gp_content),this.initSelectd(),this.initItems(),this.scrollView.node.on("scroll-to-top",function(){t.triangle.angle=0}),this.scrollView.node.on("scroll-to-bottom",function(){t.triangle.angle=180}),c.GameUtils.ShowX(p.dm.adids.XAdInfo.FlowerPanel.xid)},e.prototype.initSelectd=function(){for(var t=p.dm.player.getFlower(),e=0;e<t.length;e++){for(var n=t[e],o=!0,i=0;i<n.length;i++)n[i]<=0&&(o=!1);o&&(this.selectIndex=e)}},e.prototype.onDisable=function(){this.scrollView.node.off("scroll-to-top"),this.scrollView.node.off("scroll-to-bottom")},e.prototype.initItems=function(){return __awaiter(this,void 0,void 0,function(){var t,e,n,o,i;return __generator(this,function(r){switch(r.label){case 0:t=0,r.label=1;case 1:return t<5?[4,s.Utils.loadPefab("prefab/game/main/table_item")]:[3,4];case 2:if(!(e=r.sent()))return l.Logger.error("bomb prefab fail"),[3,3];n=cc.instantiate(e),o=!1,t==this.selectIndex&&(o=!0),i=-1,this.seriesIndex==t&&(i=this.flowIndex),this.itemContent.addChild(n),n.getComponent(a.default).initByData(t,o,i),r.label=3;case 3:return t++,[3,1];case 4:return[2]}})})},e.prototype.init=function(t,e,n){n&&u.AniUtil.aniWillShow(this.gp_content),this.seriesIndex=t,this.flowIndex=e},e.prototype.start=function(){},e.prototype.onCloseClicked=function(){console.log("dianjiguanbi"),c.GameUtils.playSoundBtnClicked(),this.close()},e.prototype.close=function(){this.node.removeFromParent(),this.node.destroy()},e.prefab_name="prefab/game/panel/table_panel",r([d(cc.Node)],e.prototype,"gp_content",void 0),r([d(cc.ScrollView)],e.prototype,"scrollView",void 0),r([d(cc.Node)],e.prototype,"itemContent",void 0),r([d(cc.Node)],e.prototype,"triangle",void 0),n=r([f],e)}(cc.Component);n.default=g,cc._RF.pop()},{"../../../common/DataManager":"DataManager","../../../utils/AniUtil":"AniUtil","../../../utils/Utils":"Utils","../../../utils/logger":"logger","../../GameUtils":"GameUtils","./TableItem":"TableItem"}],Toast:[function(t,e,n){"use strict";cc._RF.push(e,"04618h+zA9E9aaM/WVzDh17","Toast");var o,i,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.TipIco=void 0,function(t){t[t.NetErr=0]="NetErr",t[t.Error=1]="Error",t[t.Tip=2]="Tip",t[t.Flower=3]="Flower"}(i=n.TipIco||(n.TipIco={}));var c=cc._decorator,s=c.ccclass,l=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon_frames=[],e.lb_msg=null,e.img_icon=null,e.lb_num=null,e}var n;return r(e,t),n=e,e.preLoad=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return t=n,[4,n.loadPefab(n.Prefab_Name).catch(function(t){throw t})];case 1:return t.prefab=e.sent(),[2]}})})},e.showNum=function(t,e,n){this._show(t,e,i.Tip,n+"")},e.show=function(t,e,n){void 0===n&&(n=i.Tip),this._show(t,e,n,void 0,2)},e._show=function(t,e,o,i,r){return void 0===r&&(r=2),__awaiter(this,void 0,void 0,function(){var a;return __generator(this,function(c){switch(c.label){case 0:return this.prefab?[3,2]:[4,this.preLoad()];case 1:c.sent(),c.label=2;case 2:return(a=cc.instantiate(n.prefab)).getComponent(n)._show(e,o,i,r),a.parent=t,[2,a]}})})},e.loadPefab=function(t,e){return void 0===e&&(e=!1),__awaiter(this,void 0,Promise,function(){var e=this;return __generator(this,function(){return[2,new Promise(function(n,o){return __awaiter(e,void 0,void 0,function(){var e,i,r=this;return __generator(this,function(a){switch(a.label){case 0:e=function(){return __awaiter(r,void 0,void 0,function(){return __generator(this,function(){return[2,new Promise(function(e,n){var o=setTimeout(function(){n("oadPefab \u8fde\u63a5\u8d85\u65f6"+t)},1e4);cc.resources.load(t,function(t,i){clearTimeout(o),t?n(t):e(i)})})]})})},i=3,a.label=1;case 1:return i>0?[4,e().then(function(t){i=0,n(t)}).catch(function(t){--i<=0&&o(t)})]:[3,3];case 2:return a.sent(),[3,1];case 3:return[2]}})})})]})})},e.prototype._show=function(t,e,n,o){void 0===o&&(o=2),this.iconIndex=e,this.startTime=(new Date).getTime(),e<0?(this.img_icon.node.active=!1,this.node.width=354):(this.img_icon.node.active=!0,this.img_icon.spriteFrame=this.icon_frames[e],this.node.width=400),n?(this.lb_num.node.active=!0,this.lb_num.string=n,this.node.height=154):(this.lb_num.node.active=!1,this.node.height=84),this.duration=o,this.lb_msg.string=t,this.node.y=-50,this.node.opacity=0},e.prototype.onLoad=function(){var t=this;cc.tween(this.node).to(.3,{y:0,opacity:255},{easing:cc.easing.sineOut}).start(),this.timer=setTimeout(function(){cc.tween(t.node).to(.3,{y:t.node.y+50,opacity:0},{easing:cc.easing.sineOut}).call(function(){t.node.removeFromParent(),t.node.destroy()}).start()},1e3*this.duration)},e.prototype.onDestroy=function(){clearTimeout(this.timer)},e.Prefab_Name="prefab/common/toast/toast",e.prefab=null,a([l([cc.SpriteFrame])],e.prototype,"icon_frames",void 0),a([l(cc.Label)],e.prototype,"lb_msg",void 0),a([l(cc.Sprite)],e.prototype,"img_icon",void 0),a([l(cc.Label)],e.prototype,"lb_num",void 0),n=a([s],e)}(cc.Component);n.default=u,cc._RF.pop()},{}],TopResSubViewBase:[function(t,e,n){"use strict";cc._RF.push(e,"c328a+B+3REWKKpG0rQXMut","TopResSubViewBase");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../GameUtils"),c=t("../../consts/BattleConfig"),s=t("../../../utils/Utils"),l=t("../../../utils/AniUtil"),u=t("../../../common/effect/SpriteToHome"),p=t("../../../common/effect/Shakeshake"),h=cc._decorator,f=h.ccclass,d=h.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=-1,e.node_icon=null,e.node_icon_flush=null,e}return i(e,t),e.prototype.onShow=function(){},e.prototype.onHide=function(){},e.prototype.createIco=function(){},e.prototype.jumpFrom=function(t,e){var n=this;void 0===e&&(e=10),(e=Math.min(e,10))>=2&&(e=s.Utils.randomIntInclusive(Math.floor(e/2),e)),l.AniUtil.createEffectSpriteHome(t,this.node_icon,[this.node_icon.getComponent(cc.Sprite).spriteFrame],function(){var t=cc.instantiate(n.node_icon_flush);t.position=n.node_icon_flush.convertToWorldSpaceAR(cc.v2(0,0)),a.GameUtils.addEffectAR(t),t.active=!0,t.opacity=255,cc.tween(t).to(.6,{opacity:0},{easing:cc.easing.sineOut}).call(function(){s.Utils.removeNode(t)}).start(),p.default.begin(n.node)},e,this.node_icon.scaleX)},e.prototype.nodeJumpFrom=function(t,e){var n=this;if(void 0===e&&(e=10),t&&cc.isValid(t)){(e=Math.min(e,10))>=2&&(e=s.Utils.randomIntInclusive(Math.floor(e/2),e));for(var o=t.convertToWorldSpaceAR(cc.v2(0,0)),i=this.node_icon.convertToWorldSpaceAR(cc.v2(0,0)),r=[],c=0;c<e;c++){var l=cc.instantiate(t);l.active=!0,l.position=o,a.GameUtils.addEffectAR(l),r.push(l)}var h=function(t){var e=r[t];setTimeout(function(){u.default.createNode(e,o,i,!1,function(){var t=cc.instantiate(n.node_icon_flush);t.position=n.node_icon_flush.convertToWorldSpaceAR(cc.v2(0,0)),a.GameUtils.addEffectAR(t),t.active=!0,t.opacity=255,cc.tween(t).to(.6,{opacity:0},{easing:cc.easing.sineOut}).call(function(){s.Utils.removeNode(t)}).start(),p.default.begin(n.node)},.7)},200*t)};for(c=0;c<r.length;c++)h(c)}},r([d({type:cc.Enum(c.TopresSubType),serializable:!0,displayName:"\u7c7b\u578b"})],e.prototype,"type",void 0),r([d(cc.Node)],e.prototype,"node_icon",void 0),r([d(cc.Node)],e.prototype,"node_icon_flush",void 0),r([f],e)}(cc.Component);n.default=g,cc._RF.pop()},{"../../../common/effect/Shakeshake":"Shakeshake","../../../common/effect/SpriteToHome":"SpriteToHome","../../../utils/AniUtil":"AniUtil","../../../utils/Utils":"Utils","../../GameUtils":"GameUtils","../../consts/BattleConfig":"BattleConfig"}],TopResView:[function(t,e,n){"use strict";cc._RF.push(e,"0b4adzj9etPiK6LcU5K92Jx","TopResView");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./TopResSubViewBase"),c=t("../../consts/BattleConfig"),s=t("../../../utils/Utils"),l=t("../../../utils/logger"),u=t("../../../common/consts/GlobalDefines"),p=cc._decorator,h=p.ccclass,f=p.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gp_widget=null,e.gp_content=null,e}var n;return i(e,t),n=e,e.create=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(o){switch(o.label){case 0:return[4,s.Utils.loadPefab(this.prefab_name)];case 1:return(t=o.sent())?((e=cc.instantiate(t)).getComponent(n).init(),[2,e]):[2,void 0]}})})},e.prototype.init=function(){var t=u.GlobalDefines.MenuButtonLogic.height;this.gp_widget.height=t,this.gp_content.height=t;for(var e=this.gp_content.getComponentsInChildren(a.default),n=0;n<e.length;n++){var o=e[n];o.standWidth=o.node.width,o.node.width=0,o.node.children[0].scale=0}},e.prototype._aniShow=function(t){this.gp_content.stopAllActions(),cc.tween(this.gp_content).to(.3,{y:0},{easing:cc.easing.sineOut}).start();var e=this.gp_content.getComponentsInChildren(a.default);e.sort(function(t,e){return t.type-e.type});for(var n=function(n){var i=e[n],r=i.type,a=t.findIndex(function(t){return t==r});a>=0?(i.onShow(),l.Logger.debug("[TopResView _aniShow] type:",r,"/idx:",a),o.gp_content.children[a].setSiblingIndex(i.node.getSiblingIndex()),i.node.setSiblingIndex(a),cc.tween(i.node).to(.2,{width:i.standWidth},{easing:cc.easing.sineOut}).start(),cc.tween(i.node.children[0]).to(.2,{scale:1},{easing:cc.easing.sineOut}).start()):(i.node.setSiblingIndex(e.length-1),i.onHide(),cc.tween(i.node).to(.2,{width:0},{easing:cc.easing.sineOut}).start(),cc.tween(i.node.children[0]).to(.2,{scale:0},{easing:cc.easing.sineOut}).start())},o=this,i=0;i<e.length;i++)n(i)},e.prototype.aniShowGame=function(){var t=[c.TopresSubType.Coin];this._aniShow(t),this.lastList=t},e.prototype.aniShowResult=function(){var t=[c.TopresSubType.Coin];this._aniShow(t),this.lastList=t},e.prototype.aniShowResultStyle=function(){var t=[c.TopresSubType.Coin];this._aniShow(t),this.lastList=t},e.prototype.aniShowWheel=function(){var t=[c.TopresSubType.Coin];this._aniShow(t),this.lastList=t},e.prototype.aniShowBack=function(){var t=this.lastList;this._aniShow(t)},e.prototype.aniShowMain=function(){var t=[c.TopresSubType.Score];this._aniShow(t),this.lastList=t},e.prototype.aniHide=function(){this.gp_content.stopAllActions(),cc.tween(this.gp_content).to(.3,{y:200},{easing:cc.easing.sineOut}).start()},e.prototype.getSubView=function(t){return this.node.getComponentsInChildren(a.default).find(function(e){return e.type==t})},e.prefab_name="prefab/game/ui/topres",r([f(cc.Node)],e.prototype,"gp_widget",void 0),r([f(cc.Node)],e.prototype,"gp_content",void 0),n=r([h],e)}(cc.Component);n.default=d,cc._RF.pop()},{"../../../common/consts/GlobalDefines":"GlobalDefines","../../../utils/Utils":"Utils","../../../utils/logger":"logger","../../consts/BattleConfig":"BattleConfig","./TopResSubViewBase":"TopResSubViewBase"}],UIController:[function(t,e,n){"use strict";cc._RF.push(e,"11268f946JOL4F71Ay/pQeF","UIController");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./panel/TablePanel"),c=t("./panel/OneBeePanel"),s=t("./MainController"),l=t("../GameUtils"),u=t("../common/UIManager"),p=t("../../utils/logger"),h=t("../../common/PlatformManager"),f=t("../../common/GlobalEvents"),d=t("../../common/G"),g=t("../../common/DataManager"),m=t("../../common/consts/GlobalDefines"),y=t("../../common/comp/toast/Toast"),v=t("../../hagoSdk/HagoSdk"),_=cc._decorator,b=_.ccclass,w=_.property,S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bee=null,e.magic=null,e.magicInfo=null,e.magicVideo=null,e.magicLabel=null,e.refreshVideo=null,e.refreshLabel=null,e.beeInfo=null,e.otherParent=null,e.controller=null,e.beeTipVideo=null,e.beeTipLabel=null,e.plane=null,e.isScoreNodeBusy=!1,e.isBeeTipReady=!1,e}return i(e,t),e.prototype.onLoad=function(){g.dm.player.beeTip=0,this.bee.active=!1,this.refresh()},e.prototype.refresh=function(){g.dm.player.magic>0?(this.magicLabel.node.active=!0,this.magicVideo.active=!1,this.magicLabel.string=g.dm.player.magic+""):(this.magicLabel.node.active=!1,this.magicVideo.active=!0),g.dm.player.refresh>0?(this.refreshLabel.node.active=!0,this.refreshVideo.active=!1,this.refreshLabel.string=g.dm.player.refresh+""):(this.refreshLabel.node.active=!1,this.refreshVideo.active=!0)},e.prototype.onEnable=function(){d.GlobalEvent.on(f.EventTipEnd.NAME,this.closeSelect,this),d.GlobalEvent.on(f.EventBeeTipBegin.NAME,this.beeTipVideoEnd,this),d.GlobalEvent.on(f.EventTipChange.NAME,this.refresh,this)},e.prototype.onDisable=function(){d.GlobalEvent.off(f.EventTipEnd.NAME,this.closeSelect,this),d.GlobalEvent.off(f.EventBeeTipBegin.NAME,this.beeTipVideoEnd,this),d.GlobalEvent.off(f.EventTipChange.NAME,this.refresh,this)},e.prototype.onMagicClicked=function(){var t=this;l.GameUtils.playSoundBtnClicked(),this.controller.isCanTip()?g.dm.player.magic>0?this.useMagic():(u.ui.showLoading(),h.pm.loadAndShowVideoAd(function(e){1==e?(g.dm.player.magic+=1,t.refresh(),t.useMagic(),u.ui.hideLoading()):(p.Logger.error("video player error, use magic"),u.ui.hideLoading())},g.dm.adids.AdInfo.Magic.adid)):y.default.show(u.ui.getLayer(u.UILayer.Tip),v.default.instance.txt("38"))},e.prototype.useMagic=function(){this.controller.tryTip(m.TipType.Magic)?(this.magic.setParent(this.otherParent),this.otherParent.active=!0,this.magicInfo.active=!0,h.pm.HideAllAD()):y.default.show(u.ui.getLayer(u.UILayer.Tip),v.default.instance.txt("38"))},e.prototype.onBeeClicked=function(){l.GameUtils.playSoundBtnClicked(),this.controller.isCanTip()?g.dm.player.beeTip>0?(this.beeTipVideoEnd(),this.isBeeTipReady=!1):c.default.show(this.beeTipVideoEnd.bind(this)):y.default.show(u.ui.getLayer(u.UILayer.Tip),v.default.instance.txt("38"))},e.prototype.beeTipVideoEnd=function(){l.GameUtils.playSoundBtnClicked(),this.controller.isCanTip()?this.controller.tryTip(m.TipType.Bee)?(this.isBeeTipReady=!0,this.bee.setParent(this.otherParent),this.otherParent.active=!0,this.beeInfo.active=!0,h.pm.HideAllAD()):y.default.show(u.ui.getLayer(u.UILayer.Tip),v.default.instance.txt("38")+", "+this.controller.gameType):y.default.show(u.ui.getLayer(u.UILayer.Tip),v.default.instance.txt("38"))},e.prototype.onRefreshClicked=function(){var t=this;l.GameUtils.playSoundBtnClicked(),this.controller.isCanTip()?(g.dm.player.refresh>0?(g.dm.player.refresh-=1,this.refresh(),this.useRefresh()):(u.ui.showLoading(),h.pm.loadAndShowVideoAd(function(e){1==e?(t.useRefresh(),u.ui.hideLoading()):(p.Logger.error("video player error, use refresh"),u.ui.hideLoading())},g.dm.adids.AdInfo.Refresh.adid)),l.GameUtils.playSFX("\u4f7f\u7528\u91cd\u65b0\u5e03\u5c40")):y.default.show(u.ui.getLayer(u.UILayer.Tip),v.default.instance.txt("38"))},e.prototype.useRefresh=function(){this.controller.tryTip(m.TipType.Refresh)||y.default.show(u.ui.getLayer(u.UILayer.Tip),v.default.instance.txt("38"))},e.prototype.hideBeeTip=function(){this.bee.active=!1},e.prototype.isBeeTipShow=function(){return this.bee.active},e.prototype.showBeeTip=function(){this.bee.active=!0,this.beeTipVideo.active=!0},e.prototype.closeBtnClicked=function(){l.GameUtils.playSoundBtnClicked(),this.isBeeTipReady&&(g.dm.player.beeTip+=1,this.beeTipVideo.active=!1,this.bee.active=!0),this.closeSelect()},e.prototype.closeSelect=function(){this.otherParent.active=!1,this.magic.setParent(this.node),this.bee.setParent(this.node),this.magicInfo.active=!1,this.beeInfo.active=!1,this.controller.closeTip(),d.GlobalEvent.dispatchEvent(new f.EventShowBanner)},e.prototype.onSettingClicked=function(){var t=this;l.GameUtils.playSoundBtnClicked(),console.log("\u70b9\u51fb"),cc.resources.load("prefab/game/panel/setting_panel",function(e,n){var o=cc.instantiate(n);t.plane.addChild(o),o.x=0,o.y=0})},e.prototype.onTableClicked=function(){l.GameUtils.playSoundBtnClicked(),a.default.show(0,0,!0)},e.prototype.onTaskClicked=function(){},r([w(cc.Node)],e.prototype,"bee",void 0),r([w(cc.Node)],e.prototype,"magic",void 0),r([w(cc.Node)],e.prototype,"magicInfo",void 0),r([w(cc.Node)],e.prototype,"magicVideo",void 0),r([w(cc.Label)],e.prototype,"magicLabel",void 0),r([w(cc.Node)],e.prototype,"refreshVideo",void 0),r([w(cc.Label)],e.prototype,"refreshLabel",void 0),r([w(cc.Node)],e.prototype,"beeInfo",void 0),r([w(cc.Node)],e.prototype,"otherParent",void 0),r([w(s.default)],e.prototype,"controller",void 0),r([w(cc.Node)],e.prototype,"beeTipVideo",void 0),r([w(cc.Label)],e.prototype,"beeTipLabel",void 0),r([w(cc.Node)],e.prototype,"plane",void 0),r([b],e)}(cc.Component);n.default=S,cc._RF.pop()},{"../../common/DataManager":"DataManager","../../common/G":"G","../../common/GlobalEvents":"GlobalEvents","../../common/PlatformManager":"PlatformManager","../../common/comp/toast/Toast":"Toast","../../common/consts/GlobalDefines":"GlobalDefines","../../hagoSdk/HagoSdk":"HagoSdk","../../utils/logger":"logger","../GameUtils":"GameUtils","../common/UIManager":"UIManager","./MainController":"MainController","./panel/OneBeePanel":"OneBeePanel","./panel/TablePanel":"TablePanel"}],UIManager:[function(t,e,n){"use strict";cc._RF.push(e,"5f081sv0sRBb5bZnC2mvPxi","UIManager"),Object.defineProperty(n,"__esModule",{value:!0}),n.ui=n.UILayer=void 0;var o,i=t("../../utils/Utils"),r=t("../../utils/logger"),a=t("../../common/consts/GlobalDefines");(function(t){t[t.Topres=0]="Topres",t[t.Panel=1]="Panel",t[t.LoadingBar=2]="LoadingBar",t[t.MessageBox=3]="MessageBox",t[t.Guide=4]="Guide",t[t.Banner=5]="Banner",t[t.X=6]="X",t[t.Tip=7]="Tip",t[t.Effect=8]="Effect",t[t.Effect2=9]="Effect2"})(o=n.UILayer||(n.UILayer={}));var c=function(){function t(){this.hurryLoading=null}return Object.defineProperty(t,"ins",{get:function(){return this._ins||(this._ins=new t),this._ins},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(t,e){this.node=t,this.hurryLoading=e},t.prototype.onInit=function(){this.hideLoading()},t.prototype.showLoading=function(){this.hurryLoading.show()},t.prototype.hideLoading=function(){this.hurryLoading.hide()},t.prototype.checkNode=function(){for(var t in r.Logger.warn("[UIManager checkNode] width:",this.node.width,"/height:",this.node.height),o)isNaN(t)&&this.addNullNode(this.node,t)},t.prototype.addNullNode=function(t,e){if(t){var n=t.getChildByName(e);if(n)return console.warn("[UIManager addNullNode] \u8282\u70b9"+e+"\u5df2\u7ecf\u5b58\u5728"),n;var o=new cc.Node(e);return t.addChild(o),o.width=o.parent.width,o.height=o.parent.height,o.x=0,o.y=0,o}console.warn("[UIManager addNullNode] "+t+"\u4e0d\u5b58\u5728")},t.prototype.getLayer=function(t){var e=o[t];return this.node.getChildByName(e)},t.prototype.addGuide=function(t){t.x=0,t.y=0,t.width=a.GlobalDefines.ScreenWidth,t.height=a.GlobalDefines.ScreenHeight,this.getLayer(o.Guide).addChild(t)},t.prototype.popView=function(t,e){void 0===e&&(e=!1),t.x=0,t.y=0,t.width=a.GlobalDefines.ScreenWidth,t.height=a.GlobalDefines.ScreenHeight,e?this.getLayer(o.Panel).insertChild(t,0):t.parent=this.getLayer(o.Panel)},t.prototype.popMessageBox=function(t){t.x=0,t.y=0,t.width=a.GlobalDefines.ScreenWidth,t.height=a.GlobalDefines.ScreenHeight,t.parent=this.getLayer(o.MessageBox)},t.prototype.tip=function(t){t.parent=this.getLayer(o.Tip)},t.prototype.layerClear=function(t){i.Utils.removeAllChildren(this.getLayer(t))},t.prototype.addEffect=function(t){this.getLayer(o.Effect).childrenCount>=200&&i.Utils.removeNode(this.getLayer(o.Effect).children[0]),t.parent=this.getLayer(o.Effect)},t.prototype.addEffectAR=function(t){var e=this.getLayer(o.Effect).convertToNodeSpaceAR(t.position);t.position=e,this.addEffect(t)},t.prototype.onSwitchScene=function(){this.layerClear(o.Panel),this.layerClear(o.Tip)},Object.defineProperty(t.prototype,"safeAreaTop",{get:function(){return a.GlobalDefines.MenuButtonLogic.top+a.GlobalDefines.MenuButtonLogic.height+(100-a.GlobalDefines.MenuButtonLogic.height)/2},enumerable:!1,configurable:!0}),t.prototype.alignmentToMenu=function(t){var e=a.GlobalDefines.MenuButtonLogic.top,n=a.GlobalDefines.MenuButtonLogic.height,o=a.GlobalDefines.ScreenHeight;t.y=o/2-e-n/2,r.Logger.debug("[BattleOptionWord alignmentToMenu] bar.y:",t.y,"ScreenHeight:",a.GlobalDefines.ScreenHeight)},t}();n.default=c,n.ui=c.ins,cc._RF.pop()},{"../../common/consts/GlobalDefines":"GlobalDefines","../../utils/Utils":"Utils","../../utils/logger":"logger"}],Utils:[function(t,e,n){"use strict";cc._RF.push(e,"783e77lPv5GY5nAK78sB1Zl","Utils"),Object.defineProperty(n,"__esModule",{value:!0}),n.Utils=void 0;var o=t("./logger"),i=t("../common/NetworkManager"),r=t("../common/consts/GlobalDefines"),a=function(){function t(){}return t.sleep=function(t,e){return __awaiter(this,void 0,void 0,function(){var n=this;return __generator(this,function(){return[2,new Promise(function(o){setTimeout(function(){n.invokeCallback(o)},t,e)}).catch(function(){})]})})},t.invokeCallback=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&"function"==typeof t&&t.apply(null,e)},t.safeCallFunc=function(t,e){t&&"function"==typeof t&&t.apply(e)},t.randomInt=function(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t))+t},t.randomIntInclusive=function(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t},t.randomFloat=function(t,e){return Math.random()*(e-t)+t},t.randomByList=function(t){t.map(function(t,e,n){return n[e]=~~n[e-1]+t});for(var e=this.randomIntInclusive(1,t[t.length-1]),n=t.length-1;n>=0;n--){var o=t[n];if(~~t[n-1]<e&&e<=o)return n}return-1},t.modByLimit=function(t,e){return(t-1)%e+1},t.isNullOrEmpty=function(t){return!t||""==t||"null"==t},t.qrSceneOption=function(t){if(!t)return{};for(var e={},n=0,o=decodeURIComponent(t).split("&");n<o.length;n++){var i=o[n].split("=");e[i[0]]=i[1]}return e},t.formatTimeExt=function(t,e){if(void 0===e&&(e=!1),~~t<=0)return e?"00\u65f600\u520600\u79d2":"00\u520600\u79d2";var n,o=Math.floor(t/3600).toString(),i=Math.floor(t%3600%60).toString(),r=e?Math.floor(t%3600/60):Math.floor(t/60).toString();return e?(n=[o,r,i].map(function(t){return(""+t)[1]?t:"0"+t}))[0]+"\u65f6"+n[1]+"\u5206"+n[2]+"\u79d2":(n=[r,i].map(function(t){return(""+t)[1]?t:"0"+t}))[0]+"\u5206"+n[1]+"\u79d2"},t.formatMilTime=function(t){if(t>0){var e=Math.ceil(1e3*t);return Math.floor(e/1e3)+"\u2033"+e%1e3}return"0\u2033000"},t.formatTime=function(t,e){if(void 0===e&&(e=!1),~~t<=0)return e?"00:00:00":"00:00";var n=Math.floor(t/3600).toString(),o=Math.floor(t%3600%60).toString(),i=e?Math.floor(t%3600/60):Math.floor(t/60).toString();return e?[n,i,o].map(function(t){return(""+t)[1]?t:"0"+t}).join(":"):[i,o].map(function(t){return(""+t)[1]?t:"0"+t}).join(":")},t.formatTime_Date=function(t,e){var n=new Date(1e3*t),o=(n.getMonth()+1).toString(),i=n.getDate();return e?[n.getFullYear().toString(),o,i].map(function(t){return(""+t)[1]?t:"0"+t}).join("."):[o,i].map(function(t){return(""+t)[1]?t:"0"+t}).join(".")},t.getWeekNumberNow=function(t){var e=new Date(t);return this.getWeekNumber(e)},t.getWeekNumber=function(t){(t=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()))).setUTCDate(t.getUTCDate()+4-(t.getUTCDay()||7));var e=new Date(Date.UTC(t.getUTCFullYear(),0,1));return Math.ceil(((t.getTime()-e.getTime())/864e5+1)/7)},t.getMonthM=function(t,e){return 4==e||6==e||9==e||11==e?30:2==e?t%4==0&&t%100!=0||t%400==0?29:28:31},t.getTimestamp=function(){return(new Date).getTime()},t.getOSSTime=function(t){if(this.isEmpty(t))return 0;var e=t.split(","),n=new Date(parseInt(e[0]),parseInt(e[1])-1,parseInt(e[2]),parseInt(e[3]),parseInt(e[4]),0);return Math.floor(n.getTime()/1e3)},t.solveString=function(t,e){if(!t)return"";for(var n=0,o="",i=0;i<t.length;i++){if(t.charCodeAt(i)>127||94==t.charCodeAt(i)?n+=2:n++,n>e)return o+"...";o+=t.charAt(i)}return o},t.mixedStrLen=function(t){for(var e=0,n=0;n<t.length;n++)t.substr(n,1).charCodeAt(0)>255?e+=2:e++;return e},t.angleToRadian=function(t){return t*Math.PI/180},t.updateNodeSpriteFrame=function(e,n,i,r,a){if(void 0===i&&(i=!1),void 0===r&&(r=void 0),void 0===a&&(a="png"),!t.isNullOrEmpty(e))if(i){if(!e.startsWith("https://"))return;cc.assetManager.loadRemote(e,{ext:"."+a},function(t,i){if(t)console.error("[Utils updateNodeSpriteFrame isFromNet] url:",e,"/err:",t);else if(cc.isValid(n)){o.Logger.debug("[Utils updateNodeSpriteFrame] texture:",i);var a=new cc.SpriteFrame(i),c=n.getComponent(cc.Sprite);c&&(c.spriteFrame=a),r&&r(a)}})}else cc.resources.load(e,cc.SpriteFrame,function(t,o){if(t)console.error("[Utils updateNodeSpriteFrame isNotFromNet] url:",e,"err:",t);else if(cc.isValid(n)){var i=n.getComponent(cc.Sprite);i&&(i.spriteFrame=o),r&&r(o)}})},t.loadSpine=function(t,e,n,i){cc.assetManager.loadRemote(t+".json",function(e,r){e?i&&i("\u52a0\u8f7djson\u5931\u8d25"):(o.Logger.debug("[\u52a0\u8f7dJson] date:",(new Date).getTime()),cc.assetManager.loadRemote(t+".atlas",function(e,a){e?i&&i("\u52a0\u8f7datlas\u5931\u8d25"):(o.Logger.debug("[\u52a0\u8f7datlas] date:",(new Date).getTime()),cc.assetManager.loadRemote(t+".png",function(e,c){if(e)i&&i("\u52a0\u8f7dpng\u5931\u8d25");else{o.Logger.debug("[\u52a0\u8f7dpng] date:",(new Date).getTime());var s={skeletonJson:r.json,atlasText:a.text,textures:[c],uuid:t+".json",textureNames:[name+".png"]};n&&n(s)}}))}))})},t.updateSpineRes=function(t,e,n){var o=e.getComponent(sp.Skeleton);o||(o=e.addComponent("sp.Skeleton"));var i=new sp.SkeletonData;i._uuid=n.uuid,i.skeletonJson=n.skeletonJson,i.atlasText=n.atlasText,i.textures=n.textures,i.textureNames=n.textureNames,o.skeletonData=i,o.setAnimation(0,t,!0)},t.secondsToClock=function(t){var e=(t=Number(t))%60,n=(t-e)/60,o=Math.floor(n/60);return o>0&&(n%=60),(o>9?o:"0"+o)+":"+(n>9?n:"0"+n)+":"+(e>9?e:"0"+e)},t.isEmpty=function(t){return null==t||""==t||null==t},t.loadSimpleBone=function(t,e,n){var i="bones/"+t+"/",r=[i+e+"_ske",i+e+"_atlas",i+e+"_tex"];cc.resources.load(r,function(i,r){i?o.Logger.debug("[Utils loadSimpleBone] \u52a0\u8f7d\u5931\u8d25:",t,"/",e):n(r[0],r[1])})},t.loadPlayerBone=function(t,e,n,i){var r="bones/finn/",a=[r+t+(e?"_ske":"_pk_ske"),r+t+(e?"_atlas":"_pk_atlas"),r+t+(e?"_tex":"_pk_tex")];cc.resources.load(a,function(e,r){if(e)return o.Logger.debug("[Utils loadSimpleBone] \u52a0\u8f7d\u5931\u8d25:",t),void(i&&i("\u52a0\u8f7d\u5931\u8d25 "+t));n(r[0],r[1],r[2])})},t.releaseRes=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return cc.assetManager.releaseAsset(t),[2]})})},t.loadPefab=function(t,e){return void 0===e&&(e=!1),__awaiter(this,void 0,Promise,function(){var e=this;return __generator(this,function(){return[2,new Promise(function(n,r){return __awaiter(e,void 0,void 0,function(){var e,a,c=this;return __generator(this,function(s){switch(s.label){case 0:e=function(){return __awaiter(c,void 0,void 0,function(){return __generator(this,function(){return[2,new Promise(function(e,n){var i=setTimeout(function(){o.Logger.debug("[Utils oadPefab] "+t+"\u52a0\u8f7d\u8d85\u65f6"),n("oadPefab \u8fde\u63a5\u8d85\u65f6"+t)},1e4);cc.resources.load(t,function(t,o){clearTimeout(i),t?n(t):e(o)})})]})})},a=i.default.TIMES_RETRY,s.label=1;case 1:return a>0?[4,e().then(function(t){a=0,n(t)}).catch(function(t){--a<=0&&r(t)})]:[3,3];case 2:return s.sent(),[3,1];case 3:return[2]}})})})]})})},t.loadConfigFromAli=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return[2,new Promise(function(e,n){cc.assetManager.loadRemote(t,function(i,r){if(i)return o.Logger.debug("[DataManager loadConfig["+t+"]] err:",i),void n("\u52a0\u8f7d\u5931\u8d25"+t);e(r.json)})})]})})},t.isNum=function(t){if("0"===t||null==t)return!0;var e=Number(t);return!isNaN(e)},t.getCurTime=function(){return Math.floor(this.getCurMillisecond()/1e3)},t.getCurMillisecond=function(){return(new Date).getTime()},t.getymd=function(t){var e=new Date(1e3*t),n=e.getMonth()+1,o=e.getDate();return{year:e.getFullYear(),month:n,date:o,hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds(),milliseconds:e.getMilliseconds()}},t.isToday=function(e){var n=this.getCurTime(),o=t.getymd(e),i=t.getymd(n);return o.year==i.year&&o.month==i.month&&o.date==i.date},t.getDayBeginTime=function(t){var e=new Date(t);return e.setHours(0),e.setSeconds(0),e.setMinutes(0),e.setMilliseconds(0),e.getTime()},t.waiting=function(t){return new Promise(function(e){setTimeout(function(){e()},t)})},t.prototype.secondsToClock=function(t){var e=(t=Number(t))%60,n=(t-e)/60,o=Math.floor(n/60);return o>0&&(n%=60),(o>9?o:"0"+o)+":"+(n>9?n:"0"+n)+":"+(e>9?e:"0"+e)},t.loadConfig=function(t){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(n){switch(n.label){case 0:e="config/"+t,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.LoadRes(e)];case 2:return[2,n.sent()];case 3:return n.sent(),[2,void 0];case 4:return[2]}})})},t.LoadRes=function(t){return new Promise(function(e,n){cc.resources.load(t,function(t,o){t?n(t.message||t):e(o)})})},t.btnLock=function(t){var e=this;return void 0===t&&(t=500),!!this._btnLock||(this._btnLock=!0,setTimeout(function(){e._btnLock=!1},t),!1)},t.removeNode=function(t){t&&t.parent&&(t.removeFromParent(),t.destroy())},t.removeAllChildren=function(t){t&&t.removeAllChildren()},t.toGrey=function(t){if(t){var e=cc.MaterialVariant.getBuiltinMaterial("2d-gray-sprite");t.setMaterial(0,e)}},t.toColor=function(t){if(t){var e=cc.MaterialVariant.getBuiltinMaterial("2d-sprite");t.setMaterial(0,e)}},t.toGreyNode=function(t){if(t)for(var e=t.getComponentsInChildren(cc.RenderComponent),n=0;n<e.length;n++){var o=e[n];this.toGrey(o)}},t.toColorNode=function(t){if(t)for(var e=t.getComponentsInChildren(cc.RenderComponent),n=0;n<e.length;n++){var o=e[n];this.toColor(o)}},t.shuffle=function(t){for(var e,n,o=t.length;o;)n=t[e=Math.floor(Math.random()*o--)],t[e]=t[o],t[o]=n;return t},t.ilterRepeatStr=function(t){return[].filter.call(t,function(t,e,n){return n.indexOf(t)==e}).join("").toString().replace(/,/g,"")},t.getValue=function(t,e){var n=e.split(".");try{for(var o=t[n[0]],i=1;i<n.length;i++)o=o[n[i]];return o}catch(r){return}},t.animationGotoStart=function(t,e){var n=e;"number"==typeof e&&(n=t.getClips()[e].name),t.play(String(n),0),t.sample(String(n)),t.stop()},t.animationGotoEnd=function(t,e){var n=e,o=e;if("string"==typeof e){for(var i in t.getClips())if(t.getClips()[i].name===e){n=i;break}}else"number"==typeof e&&(o=t.getClips()[e].name);var r=t.getClips()[n].duration;t.play(String(o),r)},t.GetZodiac=function(t,e){var n=[20,19,21,21,21,22,23,23,23,23,22,22],o=t-(e<n[t-1]?1:0),i=t-2<0?11:+(t-2),r=t+1>12?1:+(t+1);return{index:o=12==o?0:o,sZodiac:"\u9b54\u7faf\u6c34\u74f6\u53cc\u9c7c\u7261\u7f8a\u91d1\u725b\u53cc\u5b50\u5de8\u87f9\u72ee\u5b50\u5904\u5973\u5929\u79e4\u5929\u874e\u5c04\u624b\u9b54\u7faf".substr(2*o,2)+"\u5ea7",sBetween:(e<n[t-1]?i+1+"."+n[i]:t+"."+n[t-1])+"-"+(e<n[t-1]?t+"."+(n[o]-1):r+"."+(n[r-1]-1))}},t.getGameDay=function(e){e=t.getDayBeginTime(e);var n=(t.getDayBeginTime(t.getCurTime())-e)%(7*r.GlobalDefines.Second_Day);return Math.floor(n/r.GlobalDefines.Second_Day)+1},t.getWeek=function(e,n){return n=t.getDayBeginTime(n),e=t.getDayBeginTime(e),Math.floor((e-n)/(7e3*r.GlobalDefines.Second_Day))},t._btnLock=!1,t}();n.Utils=a,cc._RF.pop()},{"../common/NetworkManager":"NetworkManager","../common/consts/GlobalDefines":"GlobalDefines","./logger":"logger"}],WXSdk:[function(t,e,n){"use strict";cc._RF.push(e,"9beed0NGVNIOqCD7O8Ise74","WXSdk");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.WXSdk=n.EventGridNoAD=n.EventBannerSizeChanged=n.RewardAdStatus=void 0;var r,a=t("../G"),c=t("../consts/GlobalDefines"),s=t("../AudioManager"),l=t("../../utils/logger"),u=t("../../game/consts/GameConfig");(function(t){t[t.None=-1]="None",t[t.Fail=0]="Fail",t[t.Complete=1]="Complete"})(r=n.RewardAdStatus||(n.RewardAdStatus={}));var p=function(t){function e(){return t.call(this,e.NAME,!0)||this}return i(e,t),e.NAME="banner_size_changed",e}(cc.Event.EventCustom);n.EventBannerSizeChanged=p;var h=function(t){function e(){return t.call(this,e.NAME,!0)||this}return i(e,t),e.NAME="grid_no_ad",e}(cc.Event.EventCustom);n.EventGridNoAD=h;var f=function(){function t(){this.isWxPlatform=!1,this.bannerHigth=130,this.g_MemKeyValue={},this.g_CacheSaveKV={},this.g_IsDelaySave=!1,this.banner=void 0,this.interstitialAd=null,this.adIns=void 0,this.IsSyncSave=!1}return t.prototype.init=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.opt,this.isWxPlatform=cc.sys.platform==cc.sys.WECHAT_GAME},t.prototype.OpenApp=function(t,e,n){this.isWxPlatform?wx.navigateToMiniProgram({appId:t,path:e,envVersion:"release",success:function(){n&&n(!0)},fail:function(){n&&n(!1)}}):n&&n(!1)},t.prototype.SetUserScore=function(t){l.Logger.debug("report open data maxStageId",t);var e=[{key:"score",value:t.score+""},{key:"bottle",value:t.bottle+""}];wx.setUserCloudStorage({KVDataList:e,success:function(){},fail:function(){},complete:function(){}})},t.prototype.showLoading=function(t,e){wx.showLoading({title:t,mask:!0,complete:e})},t.prototype.hideLoading=function(){wx.hideLoading()},t.prototype.showModal=function(t){wx.showModal(t)},t.prototype.showToast=function(t){wx.showToast(t)},t.prototype.onShareAppMessage=function(t,e){wx.onShareAppMessage(function(){return{title:t,imageUrl:e}})},t.prototype.initPlayerInfoBtn=function(){var t=1*c.GlobalDefines.WindowHeight/10,e=c.GlobalDefines.WindowWidth,n=wx.createUserInfoButton({type:"image",text:"",image:u.GameConfig.OSS_URL_BASE+"user_info_btn/get_player_info_btn.png",style:{left:0,top:t,width:e,height:c.GlobalDefines.WindowHeight,lineHeight:40,textAlign:"center",fontSize:16,borderRadius:4}});n.onTap(function(t){t.errMsg.indexOf("ok"),n.hide()})},t.prototype.getMenuButtonBoundingClientRect=function(){var t=wx.getMenuButtonBoundingClientRect();return console.log("PixelRatio\uff1a",c.GlobalDefines.PixelRatio),console.log("WindowWidth",c.GlobalDefines.WindowWidth),console.log("WindowHeight",c.GlobalDefines.WindowHeight),console.log("\u83dc\u5355\u6309\u952e\u5bbd\u5ea6\uff1a",t.width),console.log("\u83dc\u5355\u6309\u952e\u9ad8\u5ea6\uff1a",t.height),console.log("\u83dc\u5355\u6309\u952e\u4e0a\u8fb9\u754c\u5750\u6807\uff1a",t.top),console.log("\u83dc\u5355\u6309\u952e\u53f3\u8fb9\u754c\u5750\u6807\uff1a",t.right),console.log("\u83dc\u5355\u6309\u952e\u4e0b\u8fb9\u754c\u5750\u6807\uff1a",t.bottom),console.log("\u83dc\u5355\u6309\u952e\u5de6\u8fb9\u754c\u5750\u6807\uff1a",t.left),t},t.prototype.openCustomerServiceConversation=function(){wx.openCustomerServiceConversation({success:function(){},fail:function(){},complete:function(){}})},t.prototype.triggerGC=function(){wx.triggerGC()},t.prototype.PauseGame=function(){s.sd.pauseAll(),cc.director.pause()},t.prototype.ResumeGame=function(){cc.director.resume(),s.sd.resumeAll()},t.prototype.HideAllAD=function(){this.banner&&this.banner.hide(),this.banner=void 0},t.prototype.ShowBannerBySizePolling=function(t,e,n){return __awaiter(this,void 0,void 0,function(){var o,i;return __generator(this,function(r){switch(r.label){case 0:o=0,r.label=1;case 1:return o<t.length?(i=o,[4,this.ShowBannnerBySize(t[i],e)]):[3,4];case 2:if(r.sent())return n&&n(!0),[2];r.label=3;case 3:return o++,[3,1];case 4:return n&&n(!1),[2]}})})},t.prototype.ShowBannnerBySize=function(t,e){var n=this;return new Promise(function(o){if(n.isWxPlatform){n.HideAllAD();var i=wx.createBannerAd({adUnitId:t,style:e});i.onError(function(t){console.log("banner show error:"+t.errMsg+"code:"+t.errCode),o(!1)}),i.onResize(function(t){console.log("\u5e7f\u544a\u5c3a\u5bf8\u53d8\u5316",t.width,t.height,c.GlobalDefines.WindowWidth),i.style.left=(c.GlobalDefines.WindowWidth-t.width)/2;var o=c.GlobalDefines.WindowHeight-t.height;e.top>o&&(i.style.top=o),n.bannerHigth=t.height,a.GlobalEvent.emit(p.NAME,t)}),i.onLoad(function(){i.show().then(function(){console.log("banner\u5c55\u793a\u6210\u529f"),o(!0)}).catch(function(t){console.log("banner\u5c55\u793a\u5931\u8d25 err:",t),o(!1)})}),n.banner=i}else o(!0)})},t.prototype.GetBannerHeight=function(){return cc.sys.isBrowser?this.bannerHigth:this.bannerHigth*cc.winSize.height/c.GlobalDefines.WindowHeight},t.prototype.initReport=function(){},t.prototype.ShowX=function(t,e){console.log("\u8c03\u7528\u663e\u793aX1"),cc.sys.isBrowser||(wx.createInterstitialAd&&(this.interstitialAd=wx.createInterstitialAd({adUnitId:t})),this.interstitialAd&&(console.log("\u8c03\u7528\u663e\u793aX2"),this.interstitialAd.show().then(function(){e&&e(!0)}).catch(function(t){console.error(t),e&&e(!1)})))},t.prototype.trackEventPost=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},t.prototype.checkVideoAd=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return t&&t(!0),[2]})})},t.prototype.showVideoAd=function(t,e){var n=this;this.isWxPlatform?(this.adIns=wx.createRewardedVideoAd({adUnitId:e,multiton:!1}),this.adIns.onLoad(function(){console.log("onLoad \u6fc0\u52b1\u89c6\u9891--\u52a0\u8f7d\u6210\u529f")}),this.adIns.onError(function(e){console.log("onError \u6fc0\u52b1\u89c6\u9891--\u62a5\u9519\uff1a",e),t&&t(r.Fail)}),this.adIns.onClose(function(e){e&&e.isEnded||void 0===e?t&&t(r.Complete):t&&t(r.Fail),n.ResumeGame(),n.adIns.offLoad(),n.adIns.offError(),n.adIns.offClose()}),this.adIns.load().then(function(){console.log("load.then() \u6fc0\u52b1\u89c6\u9891--\u52a0\u8f7d\u6210\u529f"),n.adIns.show().then(function(){console.log("show.then \u6fc0\u52b1\u89c6\u9891--\u5f00\u59cb\u64ad\u653e:"),n.PauseGame()}).catch(function(t){console.log("show.catch \u6fc0\u52b1\u89c6\u9891--\u64ad\u653e\u5931\u8d25 err:",t),n.ResumeGame()})}).catch(function(t){console.log("load.catch \u6fc0\u52b1\u89c6\u9891--\u52a0\u8f7d\u5931\u8d25 err:",t),n.ResumeGame()})):t(r.Complete)},t.prototype.preloadInterstitialAds=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},t.prototype.showInterstitialAd=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},t.prototype.destroyInterstitialAd=function(){},t.prototype.sdkLogin=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},t.prototype.weakLogin=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},t.prototype.goCustomer=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},t.prototype.getTrackEventName=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return""},t.prototype.getTasks=function(t){t&&t({})},t.prototype.logOpenTaskPanel=function(){},t.prototype.goTask=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},t.prototype.getAward=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},t.prototype.getSwitchData=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return __awaiter(this,void 0,Promise,function(){return __generator(this,function(){return[2,!0]})})},t.prototype.Get=function(t){if(null!=this.g_MemKeyValue[t])return this.g_MemKeyValue[t];var e=wx.getStorageSync(t);return this.IsEmpty(e)?e="":this.g_MemKeyValue[t]=e,e},t.prototype.Set=function(t,e){e||(e=""),e+="",this.g_MemKeyValue[t]=e,this.g_IsDelaySave?this.g_CacheSaveKV[t]=e:wx.setStorage({key:t,data:e})},t.prototype.IsEmpty=function(t){return null==t||""==t||null==t},Object.defineProperty(t.prototype,"IsDelaySave",{get:function(){return this.g_IsDelaySave},set:function(t){if(this.g_IsDelaySave=t,!this.g_IsDelaySave){for(var e in this.g_CacheSaveKV)try{var n=this.g_CacheSaveKV[e];this.IsSyncSave?wx.setStorageSync(e,n):wx.setStorage({key:e,data:n})}catch(o){console.error(o)}this.g_CacheSaveKV={},this.IsSyncSave=!1}},enumerable:!1,configurable:!0}),t.code="",t}();n.WXSdk=f,cc._RF.pop()},{"../../game/consts/GameConfig":"GameConfig","../../utils/logger":"logger","../AudioManager":"AudioManager","../G":"G","../consts/GlobalDefines":"GlobalDefines"}],WallBtn:[function(t,e,n){"use strict";cc._RF.push(e,"f015aRfZHVI0pEvlNRe3d7G","WallBtn");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./YDWallManager"),c=t("./WallPanel"),s=t("../toast/Toast"),l=t("../../GlobalEvents"),u=t("../../G"),p=t("../../DataManager"),h=t("../../../utils/Utils"),f=t("../../../game/GameUtils"),d=t("../../../game/common/UIManager"),g=cc._decorator,m=g.ccclass,y=g.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gp_content=null,e.node_ico=null,e}return i(e,t),e.prototype.init=function(t){this.param=t},e.prototype.onEnable=function(){u.GlobalEvent.on(a.EventOnGetTasks.NAME,this.onEventOnGetTasks,this)},e.prototype.onDisable=function(){u.GlobalEvent.off(a.EventOnGetTasks.NAME,this.onEventOnGetTasks,this)},e.prototype.onLoad=function(){a.wall.loadTask()},e.prototype.refreshview=function(){if(console.log("[WallBtn refreshview]-----wall.wallTasks.taskList:",a.wall.wallTasks.taskList),a.wall.wallTasks&&a.wall.wallTasks.taskList){var t=a.wall.wallTasks.taskList.find(function(t){return 2==t.status&&0==t.awareAccpetStatus});t||(t=a.wall.wallTasks.taskList.find(function(t){return t.status<=2})),t?(this.taskItem=t,this.gp_content.active=!0,a.YDWallManager.updateNodeSpriteFrame(t.icon,this.node_ico,!0)):this.gp_content.active=!1}else this.gp_content.active=!1},e.prototype.onEventOnGetTasks=function(){this.refreshview()},e.prototype.onBtnClicked=function(){h.Utils.btnLock()||(f.GameUtils.playSoundBtnClicked(),c.default.show(d.default.ins.getLayer(d.UILayer.Panel),this.onAward))},e.prototype.onAward=function(){p.dm.player.magic+=1,s.default.show(d.default.ins.getLayer(d.UILayer.MessageBox),"\u9b54\u6cd5\u68d2 +1"),u.GlobalEvent.dispatchEvent(new l.EventTipChange)},r([y(cc.Node)],e.prototype,"gp_content",void 0),r([y(cc.Node)],e.prototype,"node_ico",void 0),r([m],e)}(cc.Component);n.default=v,cc._RF.pop()},{"../../../game/GameUtils":"GameUtils","../../../game/common/UIManager":"UIManager","../../../utils/Utils":"Utils","../../DataManager":"DataManager","../../G":"G","../../GlobalEvents":"GlobalEvents","../toast/Toast":"Toast","./WallPanel":"WallPanel","./YDWallManager":"YDWallManager"}],WallCell:[function(t,e,n){"use strict";cc._RF.push(e,"de901CgvtRMIraMlo6kQvib","WallCell");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./YDWallTaskView"),c=t("../../../utils/Utils"),s=cc._decorator,l=s.ccclass,u=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gp_content=null,e.taskView=null,e}var n;return i(e,t),n=e,e.create=function(t){return __awaiter(this,void 0,Promise,function(){var e,o;return __generator(this,function(i){switch(i.label){case 0:return[4,c.Utils.loadPefab(this.Prefab_Name)];case 1:return e=i.sent(),(o=cc.instantiate(e)).position=cc.v2(0,0),o.getComponent(n).refreshView(t),[2,o]}})})},e.prototype.refreshView=function(t){this.data=t,this.taskView.init(this.data.item,this.onAward.bind(this))},e.prototype.onLoad=function(){this.taskView.loadIcos()},e.prototype.onAward=function(t){this.data.onAward(t)},e.Prefab_Name="prefab/common/yd_wall/wall_cell",r([u(cc.Node)],e.prototype,"gp_content",void 0),r([u(a.default)],e.prototype,"taskView",void 0),n=r([l],e)}(cc.Component);n.default=p,cc._RF.pop()},{"../../../utils/Utils":"Utils","./YDWallTaskView":"YDWallTaskView"}],WallPanel:[function(t,e,n){"use strict";cc._RF.push(e,"77dc8KTvu1BZYYHC1AKZ3nm","WallPanel");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./YDWallTaskView"),c=t("./YDWallManager"),s=t("./WallCell"),l=t("../CellFactory"),u=t("../../G"),p=t("../../framework/HSDK/platform"),h=cc._decorator,f=h.ccclass,d=h.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gp_content=null,e.scrollView=null,e.node_nodata=null,e}var n;return i(e,t),n=e,e.show=function(t,e){return __awaiter(this,void 0,void 0,function(){var o,i;return __generator(this,function(r){switch(r.label){case 0:return t.getComponentInChildren(n)?[2]:[4,c.YDWallManager.loadPefab(this.prefab_name)];case 1:return(o=r.sent())?((i=cc.instantiate(o)).getComponent(n).init(e),c.YDWallManager.PopView(i,t),[2]):[2]}})})},e.prototype.init=function(t){this.onAward=t,this.node_nodata.active=!1,p.default.wall.logOpenTaskPanel()},e.prototype.onLoad=function(){var t=this;c.wall.loadTask(function(e){e&&e.taskList&&0!=e.taskList.length?(t.node_nodata.active=!1,t.taskList=e.taskList,t.refreshView()):t.node_nodata.active=!0})},e.prototype.refreshView=function(){this.scrollView.content.removeAllChildren();for(var t=[],e=0;e<this.taskList.length;e++)t.push({item:this.taskList[e],onAward:this.onAward});for(t.sort(function(t,e){for(var n=[t,e],o=[0,0],i=0;i<n.length;i++){var r=n[i];o[i]+=r.status,2==r.status&&1==r.awareAccpetStatus&&(o[i]-=10)}return o[1]-o[0]}),e=0;e<t.length;e++){var n=t[e];n.idx=e;var o=l.default.createVCell(n,e,680,150,s.default);this.scrollView.content.addChild(o)}this.scrollView.content.height=150*t.length;var i=1-0/(this.scrollView.content.height-this.scrollView.node.height);this.scrollView.scrollTo(cc.v2(0,i),1)},e.prototype.onEnable=function(){u.GlobalEvent.on(a.EventOnWallTaskRefresh.NAME,this.onEventOnWallTaskRefresh,this)},e.prototype.onDisable=function(){u.GlobalEvent.off(a.EventOnWallTaskRefresh.NAME,this.onEventOnWallTaskRefresh,this)},e.prototype.onEventOnWallTaskRefresh=function(){this.refreshView()},e.prototype.close=function(){this.node.removeFromParent(),this.node.destroy()},e.prototype.onBtnBackClicked=function(){this.close()},Object.defineProperty(e.prototype,"testList",{get:function(){return[{awareAccpetStatus:0,status:0,taskId:"asdf",name:"aaaa",icon:"",desc:"aaa",actionType:1,actionValue:60,actionName:"\u8bd5\u73a9",awareType:0,awareId:"101",awareValue:100,awareDesc:"100\u91d1\u5e01"},{awareAccpetStatus:0,status:0,taskId:"asdf",name:"bbbb",icon:"",desc:"aaa",actionType:1,actionValue:60,actionName:"\u8bd5\u73a9",awareType:0,awareId:"101",awareValue:100,awareDesc:"100\u91d1\u5e01"},{awareAccpetStatus:0,status:2,taskId:"asdf",name:"cccc",icon:"",desc:"aaa",actionType:1,actionValue:60,actionName:"\u8bd5\u73a9",awareType:0,awareId:"101",awareValue:100,awareDesc:"100\u91d1\u5e01"},{awareAccpetStatus:0,status:0,taskId:"asdf",name:"dddd",icon:"",desc:"aaa",actionType:1,actionValue:60,actionName:"\u8bd5\u73a9",awareType:0,awareId:"101",awareValue:100,awareDesc:"100\u91d1\u5e01"},{awareAccpetStatus:0,status:0,taskId:"asdf",name:"eeee",icon:"",desc:"aaa",actionType:1,actionValue:60,actionName:"\u8bd5\u73a9",awareType:0,awareId:"101",awareValue:100,awareDesc:"100\u91d1\u5e01"},{awareAccpetStatus:0,status:0,taskId:"asdf",name:"ffff",icon:"",desc:"aaa",actionType:1,actionValue:60,actionName:"\u8bd5\u73a9",awareType:0,awareId:"101",awareValue:100,awareDesc:"100\u91d1\u5e01"}]},enumerable:!1,configurable:!0}),e.prefab_name="prefab/common/yd_wall/wall_panel",r([d(cc.Node)],e.prototype,"gp_content",void 0),r([d(cc.ScrollView)],e.prototype,"scrollView",void 0),r([d(cc.Node)],e.prototype,"node_nodata",void 0),n=r([f],e)}(cc.Component);n.default=g,cc._RF.pop()},{"../../G":"G","../../framework/HSDK/platform":"platform","../CellFactory":"CellFactory","./WallCell":"WallCell","./YDWallManager":"YDWallManager","./YDWallTaskView":"YDWallTaskView"}],WallResList:[function(t,e,n){"use strict";cc._RF.push(e,"e0e059poSlBSrcs5oc/asnw","WallResList");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.wall_res_list=[],e}return i(e,t),r([s([cc.Prefab])],e.prototype,"wall_res_list",void 0),r([c],e)}(cc.Component);n.default=l,cc._RF.pop()},{}],WorldView:[function(t,e,n){"use strict";cc._RF.push(e,"aa898ADuaJGx50mutsVa374","WorldView");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./RankCell"),c=t("../SwitchNode"),s=t("../CellFactory"),l=cc._decorator,u=l.ccclass,p=l.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.node_nodata=null,e.scrollview=null,e.slot_me=null,e.switch_logined=null,e}return i(e,t),e.prototype.init=function(t){this.opt=t,this.refreshView()},e.prototype.onLoad=function(){this.switch_logined.showIndex=0},e.prototype.refreshView=function(){return __awaiter(this,void 0,void 0,function(){var t,e,n,o,i,r,c,l;return __generator(this,function(u){switch(u.label){case 0:return t=640,e=100,this.switch_logined.showIndex=1,(n=this.opt.rankData)?[3,1]:(this.node_nodata.active=!0,[3,3]);case 1:for(this.node_nodata.active=!1,this.scrollview.content.removeAllChildren(),n.rank.sort(function(t,e){return e.bottle-t.bottle}),o=0;o<n.rank.length;o++)(i=n.rank[o]).idx=o,r=s.default.createVCell(i,o,t,e,a.default),this.scrollview.content.addChild(r);return this.scrollview.content.height=n.rank.length*e,c=1-0*e/(this.scrollview.content.height-this.scrollview.node.height),this.scrollview.scrollTo(cc.v2(0,c),1),l={idx:n.myRank,score:this.opt.myInfo.score,avatar:this.opt.myInfo.avatar,name:this.opt.myInfo.name,itsMe:!0,bottle:this.opt.myInfo.bottle},[4,a.default.create(l)];case 2:u.sent().parent=this.slot_me,u.label=3;case 3:return[2]}})})},e.prototype.onBtnLoginClicked=function(){},r([p(cc.Node)],e.prototype,"node_nodata",void 0),r([p(cc.ScrollView)],e.prototype,"scrollview",void 0),r([p(cc.Node)],e.prototype,"slot_me",void 0),r([p(c.default)],e.prototype,"switch_logined",void 0),r([u],e)}(cc.Component);n.default=h,cc._RF.pop()},{"../CellFactory":"CellFactory","../SwitchNode":"SwitchNode","./RankCell":"RankCell"}],YDBannerUtils:[function(t,e,n){"use strict";cc._RF.push(e,"17ff3GpnltIlohObSKBzh9C","YDBannerUtils"),Object.defineProperty(n,"__esModule",{value:!0}),n.YDBannerUtils=n.RewardType=void 0;var o,i=t("./YDBanner");(function(t){t[t.Bottle=0]="Bottle",t[t.Item1=1]="Item1",t[t.Item2=2]="Item2",t[t.Coin=3]="Coin"})(o=n.RewardType||(n.RewardType={}));var r=function(){function t(){}return t.Init=function(t){this.OSS_URL_BASE=t.OSS_URL_BASE},Object.defineProperty(t,"banner",{get:function(){return[{spine:1,reward:1},{spine:2,reward:2}]},enumerable:!1,configurable:!0}),t.showYDBanner=function(t){return __awaiter(this,void 0,void 0,function(){var e,n;return __generator(this,function(o){switch(o.label){case 0:return[4,i.default.show(t.onCloseReward)];case 1:return(e=o.sent())?(n=t.gp_banner.convertToWorldSpaceAR(cc.v2(0,0)),e.position=t.bannerLayer.convertToNodeSpaceAR(n),e.width=t.screenWidth,e.height=Math.min(this.YDBanner_Height_Max,t.screenHeight/2+e.y),e.y-=e.height/2,e.parent=t.bannerLayer,[2]):[2]}})})},t.loadPefab=function(t,e){return void 0===e&&(e=!1),__awaiter(this,void 0,Promise,function(){var e=this;return __generator(this,function(){return[2,new Promise(function(n,o){return __awaiter(e,void 0,void 0,function(){var e,i,r=this;return __generator(this,function(a){switch(a.label){case 0:e=function(){return __awaiter(r,void 0,void 0,function(){return __generator(this,function(){return[2,new Promise(function(e,n){var o=setTimeout(function(){n("oadPefab \u8fde\u63a5\u8d85\u65f6"+t)},1e4);cc.resources.load(t,function(t,i){clearTimeout(o),t?n(t):e(i)})})]})})},i=3,a.label=1;case 1:return i>0?[4,e().then(function(t){i=0,n(t)}).catch(function(t){--i<=0&&o(t)})]:[3,3];case 2:return a.sent(),[3,1];case 3:return[2]}})})})]})})},t.updateSpineRes=function(t,e,n){var o=e.getComponent(sp.Skeleton);o||(o=e.addComponent("sp.Skeleton"));var i=new sp.SkeletonData;i._uuid=n.uuid,i.skeletonJson=n.skeletonJson,i.atlasText=n.atlasText,i.textures=n.textures,i.textureNames=n.textureNames,o.skeletonData=i,o.setAnimation(0,t,!0)},t.loadSpine=function(e,n,o,i,r){var a=""+t.OSS_URL_BASE+e+"/"+n;cc.assetManager.loadRemote(a+".json",function(t,e){t?r&&r("\u52a0\u8f7djson\u5931\u8d25"):cc.assetManager.loadRemote(a+".atlas",function(t,o){t?r&&r("\u52a0\u8f7datlas\u5931\u8d25"):cc.assetManager.loadRemote(a+".png",function(t,c){if(t)r&&r("\u52a0\u8f7dpng\u5931\u8d25");else{var s={skeletonJson:e.json,atlasText:o.text,textures:[c],uuid:a+".json",textureNames:[n+".png"]};i&&i(s)}})})})},t.randomInt=function(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t))+t},t.OSS_URL_BASE="",t.YDBanner_Height_Max=234,t.YDBannerReward={1:{id:1,title:"\u89c2\u770b\u89c6\u9891\u83b7\u5f97\u5956\u52b1",reward:[{type:o.Coin,count:40}],adkey:"YDBanner"},2:{id:2,title:"\u89c2\u770b\u89c6\u9891\u83b7\u5f97\u5956\u52b1",reward:[{type:o.Item1,count:2},{type:o.Item2,count:2}],adkey:"YDBanner"}},t}();n.YDBannerUtils=r,cc._RF.pop()},{"./YDBanner":"YDBanner"}],YDBanner:[function(t,e,n){"use strict";cc._RF.push(e,"0039a3RqGJKGYv/ZOIDMBMY","YDBanner");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./YDBannerUtils"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lb_title=null,e.skeleton=null,e}var n;return i(e,t),n=e,e.show=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return[2,this._show(t)]})})},e._show=function(t){return __awaiter(this,void 0,void 0,function(){var e,o,i,r;return __generator(this,function(c){switch(c.label){case 0:return a.YDBannerUtils.banner?(e=a.YDBannerUtils.banner[this.bannerIndex],o=a.YDBannerUtils.YDBannerReward[e.reward],[4,a.YDBannerUtils.loadPefab("prefab/common/yd_banner/banner")]):[2,void 0];case 1:return i=c.sent(),(r=cc.instantiate(i)).getComponent(n).init(e.spine,o,t),++this.bannerIndex>=a.YDBannerUtils.banner.length&&(this.bannerIndex=0),[2,r]}})})},e.prototype.init=function(t,e,o){var i=this;this.rewardInf=e,this.onCloseReward=o,this.lb_title.string=e.title;var r=t+"";n.spineRes[r]?a.YDBannerUtils.updateSpineRes(r,this.skeleton.node,n.spineRes[r]):a.YDBannerUtils.loadSpine("banner/"+r,r,this.skeleton.node,function(t){a.YDBannerUtils.updateSpineRes(r,i.skeleton.node,t),n.spineRes[r]=t})},e.prototype.onBtnClicked=function(){var t=a.YDBannerUtils.randomInt(0,this.rewardInf.reward.length),e=this.rewardInf.reward[t],n=this.node.convertToWorldSpaceAR(cc.v2(0,0));this.onCloseReward&&this.onCloseReward(n,e,this.rewardInf.adkey)},e.bannerIndex=0,e.spineRes={},r([l(cc.Label)],e.prototype,"lb_title",void 0),r([l(sp.Skeleton)],e.prototype,"skeleton",void 0),n=r([s],e)}(cc.Component);n.default=u,cc._RF.pop()},{"./YDBannerUtils":"YDBannerUtils"}],YDWallBanner:[function(t,e,n){"use strict";cc._RF.push(e,"96669dHvYlJ6ZjlU1X99ahA","YDWallBanner");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./YDWallTaskView"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gp_content=null,e.taskView=null,e}var n;return i(e,t),n=e,e.show=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return[2]})})},e.prototype.init=function(t,e){this.taskItem=t,this.cb_onAward=e,this.taskView.init(t,this.onAward.bind(this))},e.prototype.onLoad=function(){this.taskView.loadIcos()},e.prototype.onAward=function(){var t={num:100,gpos:cc.v2(0,0),title:"\u91d1\u5e01\u5956\u52b1",scale:1,cb_onshow:function(){}};this.cb_onAward&&this.cb_onAward(t)},e.YDWallBanner_Height_Max=234,e.Banner_Height=n.YDWallBanner_Height_Max,r([l(cc.Node)],e.prototype,"gp_content",void 0),r([l(a.default)],e.prototype,"taskView",void 0),r([s],e)}(cc.Component);n.default=u,cc._RF.pop()},{"./YDWallTaskView":"YDWallTaskView"}],YDWallManager:[function(t,e,n){"use strict";cc._RF.push(e,"56839t3WIVGIJfNCivprSKc","YDWallManager");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.wall=n.YDWallManager=n.EventOnGetTasks=void 0;var r=t("../../G"),a=t("../../framework/HSDK/platform"),c=function(t){function e(){return t.call(this,e.NAME,!0)||this}return i(e,t),e.NAME="EventOnGetTasks",e}(cc.Event.EventCustom);n.EventOnGetTasks=c;var s=function(){function t(){}return Object.defineProperty(t,"ins",{get:function(){return this._ins||new t},enumerable:!1,configurable:!0}),t.Init=function(t){this.OSS_URL_BASE=t.OSS_URL_BASE,this.Module_Switches_Id=t.Module_Switches_Id},t.updateNodeSpriteFrame=function(t,e,n,o,i){void 0===n&&(n=!1),void 0===o&&(o=void 0),void 0===i&&(i="png"),t&&t.startsWith("https://")&&cc.assetManager.loadRemote(t,{ext:"."+i},function(n,i){if(n)console.error("[YDWallManager updateNodeSpriteFrame isFromNet] url:",t,"/err:",n);else if(cc.isValid(e)){var r=new cc.SpriteFrame(i),a=e.getComponent(cc.Sprite);a&&(a.spriteFrame=r),o&&o(r)}})},t.loadPefab=function(t,e){return void 0===e&&(e=!1),__awaiter(this,void 0,Promise,function(){var e=this;return __generator(this,function(){return[2,new Promise(function(n,o){return __awaiter(e,void 0,void 0,function(){var e,i,r=this;return __generator(this,function(a){switch(a.label){case 0:e=function(){return __awaiter(r,void 0,void 0,function(){return __generator(this,function(){return[2,new Promise(function(e,n){var o=setTimeout(function(){n("oadPefab \u8fde\u63a5\u8d85\u65f6"+t)},1e4);cc.resources.load(t,function(t,i){clearTimeout(o),t?n(t):e(i)})})]})})},i=3,a.label=1;case 1:return i>0?[4,e().then(function(t){i=0,n(t)}).catch(function(t){--i<=0&&o(t)})]:[3,3];case 2:return a.sent(),[3,1];case 3:return[2]}})})})]})})},t.PopView=function(t,e){t.x=0,t.y=0,t.width=e.width,t.height=e.height,t.parent=e},t.aniWillShow=function(t){t.opacity=0,t.scale=.7},t.aniShow=function(t,e){t.stopAllActions(),cc.tween(t).to(.3,{opacity:255,scale:1},{easing:cc.easing.sineOut}).call(function(){e&&e()}).start()},t.aniHeart=function(t,e,n){void 0===e&&(e=.2),t.stopAllActions(),t.angle=0,cc.tween(t).repeatForever(cc.tween(t).to(n?e:e/2,{scale:1.2},{easing:cc.easing.sineOut}).to(e,{scale:1},{easing:cc.easing.sineOut}).delay(n?0:.5)).start()},t.prototype.loadTask=function(t){return __awaiter(this,void 0,void 0,function(){var e=this;return __generator(this,function(n){switch(n.label){case 0:return[4,this.getSwitchData()];case 1:return n.sent()?(a.default.wall.getTaskList().then(function(n){e.wallTasks=n,r.GlobalEvent.dispatchEvent(new c),t&&t(n)}).catch(function(){e.wallTasks={taskList:[],banner:void 0},r.GlobalEvent.dispatchEvent(new c),t&&t(void 0)}),[2]):(this.wallTasks={taskList:[],banner:void 0},t&&t(void 0),r.GlobalEvent.dispatchEvent(new c),[2])}})})},t.prototype.goTask=function(t,e){a.default.wall.goTask(t).then(function(t){e&&e(t)}).catch(function(){e&&e(void 0)})},t.prototype.getAward=function(t,e){a.default.wall.getAward(t).then(function(t){e&&e(t)}).catch(function(t){console.log("[HortorSdkV2 getAward] err:",t),e&&e(void 0)})},t.prototype.getSwitchData=function(){return __awaiter(this,void 0,Promise,function(){return __generator(this,function(){return[2,new Promise(function(e){var n=t.Module_Switches_Id;a.default.gm.getSwitchData({switchIdList:[n]}).then(function(t){t[n]===HSDK.SwitchStatus.Opened?e(!0):t[n]===HSDK.SwitchStatus.Closed?e(!1):t[n]===HSDK.SwitchStatus.NotConfigured&&e(!1)}).catch(function(t){console.log("[getSwitchData] err:",t),e(!1)})})]})})},t.OSS_URL_BASE="",t.Module_Switches_Id="",t}();n.YDWallManager=s,n.wall=s.ins,cc._RF.pop()},{"../../G":"G","../../framework/HSDK/platform":"platform"}],YDWallPanel:[function(t,e,n){"use strict";cc._RF.push(e,"7a406MpqklKg5/t/dneSe/E","YDWallPanel");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./YDWallTaskView"),c=t("./YDWallManager"),s=cc._decorator,l=s.ccclass,u=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gp_content=null,e.taskView=null,e}return i(e,t),e.show=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return[2]})})},e.prototype.init=function(t,e){this.taskItem=t,this.cb_onAward=e,this.taskView.init(t,this.onAward.bind(this)),c.YDWallManager.aniWillShow(this.gp_content)},e.prototype.onLoad=function(){var t=this;c.YDWallManager.aniShow(this.gp_content,function(){t.taskView.loadIcos()})},e.prototype.onAward=function(){var t=this,e={num:100,gpos:cc.v2(0,0),title:"\u91d1\u5e01\u5956\u52b1",scale:1,cb_onshow:function(){t.close()}};this.cb_onAward&&this.cb_onAward(e)},e.prototype.close=function(){this.node.removeFromParent(),this.node.destroy()},e.prototype.onBtnCloseClicked=function(){this.close()},e.prefab_name="prefab/common/yd_wall/yd_wall_panel",r([u(cc.Node)],e.prototype,"gp_content",void 0),r([u(a.default)],e.prototype,"taskView",void 0),r([l],e)}(cc.Component);n.default=p,cc._RF.pop()},{"./YDWallManager":"YDWallManager","./YDWallTaskView":"YDWallTaskView"}],YDWallTaskView:[function(t,e,n){"use strict";cc._RF.push(e,"31181nnMJtHaJSMTt5Hq8Sg","YDWallTaskView");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.EventOnWallTaskRefresh=void 0;var a=t("./YDWallManager"),c=t("../SwitchNode"),s=t("../../G"),l=function(t){function e(n,o,i){var r=t.call(this,e.NAME,!0)||this;return r.taskId="",r.taskId=n,r.status=o,r.awareAccpetStatus=i,r}return i(e,t),e.NAME="EventOnWallAward",e}(cc.Event.EventCustom);n.EventOnWallTaskRefresh=l;var u=cc._decorator,p=u.ccclass,h=u.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.node_ico=null,e.gp_reward=null,e.lb_desc=null,e.lb_name=null,e.lb_reward_num=null,e.reward_ico=null,e.btn=null,e.switch_btn_back=null,e.lb_btn_title=null,e.onAward=null,e}return i(e,t),e.prototype.init=function(t,e){this.taskItem=t,this.onAward=e,this.lb_name.string=t.name,this.lb_desc&&(this.lb_desc.string=t.desc),this.refreshStatus()},e.prototype.loadIcos=function(){a.YDWallManager.updateNodeSpriteFrame(this.taskItem.icon,this.node_ico,!0);var t=a.YDWallManager.OSS_URL_BASE+"image/wall_reward_ico.png";a.YDWallManager.updateNodeSpriteFrame(t,this.reward_ico,!0)},e.prototype.onEnable=function(){s.GlobalEvent.on(a.EventOnGetTasks.NAME,this.onEventOnGetTasks,this),s.GlobalEvent.on(l.NAME,this.onEventOnWallTaskRefresh,this)},e.prototype.onDisable=function(){s.GlobalEvent.off(a.EventOnGetTasks.NAME,this.onEventOnGetTasks,this),s.GlobalEvent.off(l.NAME,this.onEventOnWallTaskRefresh,this)},e.prototype.onEventOnGetTasks=function(){var t=this,e=a.wall.wallTasks;if(e&&e.taskList){var n=e.taskList.find(function(e){return e.taskId==t.taskItem.taskId});n&&(this.taskItem=Object.assign(this.taskItem,n),this.refreshStatus())}},e.prototype.onEventOnWallTaskRefresh=function(t){this.taskItem.taskId==t.taskId&&this.refreshStatus()},e.prototype.refreshStatus=function(){switch(this.btn.stopAllActions(),this.taskItem.status){case 0:this.lb_btn_title.string=this.taskItem.actionName||"\u8bd5\u73a9",this.switch_btn_back.showIndex=0;break;case 1:this.lb_btn_title.string="\u8fdb\u884c\u4e2d",this.switch_btn_back.showIndex=0;break;case 2:0==this.taskItem.awareAccpetStatus?(this.lb_btn_title.string="\u9886\u53d6\u5956\u52b1",this.switch_btn_back.showIndex=1,a.YDWallManager.aniHeart(this.btn)):1==this.taskItem.awareAccpetStatus&&(this.lb_btn_title.string="\u524d\u5f80",this.switch_btn_back.showIndex=0,this.lb_desc.node&&(this.lb_desc.node.active=!1),this.gp_reward&&(this.gp_reward.active=!1))}},e.prototype.onBtnOkClicked=function(){var t=this;switch(this.taskItem.status){case 0:case 1:a.wall.goTask({id:this.taskItem.taskId},function(){});break;case 2:0==this.taskItem.awareAccpetStatus?a.wall.getAward({id:this.taskItem.taskId},function(e){e&&(t.taskItem.awareAccpetStatus=1,s.GlobalEvent.dispatchEvent(new l(t.taskItem.taskId,t.taskItem.status,1)),t.onAward&&t.onAward(t.taskItem.awardList))}):1==this.taskItem.awareAccpetStatus&&a.wall.goTask({id:this.taskItem.taskId},function(){})}},r([h(cc.Node)],e.prototype,"node_ico",void 0),r([h(cc.Node)],e.prototype,"gp_reward",void 0),r([h(cc.Label)],e.prototype,"lb_desc",void 0),r([h(cc.Label)],e.prototype,"lb_name",void 0),r([h(cc.Label)],e.prototype,"lb_reward_num",void 0),r([h(cc.Node)],e.prototype,"reward_ico",void 0),r([h(cc.Node)],e.prototype,"btn",void 0),r([h(c.default)],e.prototype,"switch_btn_back",void 0),r([h(cc.Label)],e.prototype,"lb_btn_title",void 0),r([p],e)}(cc.Component);n.default=f,cc._RF.pop()},{"../../G":"G","../SwitchNode":"SwitchNode","./YDWallManager":"YDWallManager"}],YDXPanel:[function(t,e,n){"use strict";cc._RF.push(e,"1bf44RqP+RAhIFykG5TsBeP","YDXPanel");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./YDXUtils"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gp_content=null,e.node_img=null,e.lb_desc=null,e.node_ico=null,e}return i(e,t),e.show=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return[2]})})},e.prototype.init=function(t){this.onOk=t.onOk,this.lb_desc.string=t.desc;var e=a.YDXUtils.OSS_URL_BASE+"image/yd_x_img.png";a.YDXUtils.updateNodeSpriteFrame(e,this.node_img,!0),a.YDXUtils.aniWillShow(this.gp_content)},e.prototype.onLoad=function(){a.YDXUtils.aniShow(this.gp_content)},e.prototype.close=function(){this.node.removeFromParent(),this.node.destroy()},e.prototype.onBtnCloseClicked=function(){this.close()},e.prototype.onBtnOkClicked=function(){var t=this.node_ico.convertToWorldSpaceAR(cc.v2(0,0));this.onOk&&this.onOk(t)},e.prefab_name="prefab/common/yd_x/yd_x_panel",r([l(cc.Node)],e.prototype,"gp_content",void 0),r([l(cc.Node)],e.prototype,"node_img",void 0),r([l(cc.Label)],e.prototype,"lb_desc",void 0),r([l(cc.Node)],e.prototype,"node_ico",void 0),r([s],e)}(cc.Component);n.default=u,cc._RF.pop()},{"./YDXUtils":"YDXUtils"}],YDXUtils:[function(t,e,n){"use strict";cc._RF.push(e,"ac253jbdT9JibxP0htjpi6U","YDXUtils"),Object.defineProperty(n,"__esModule",{value:!0}),n.YDXUtils=void 0;var o=function(){function t(){}return t.Init=function(t){this.OSS_URL_BASE=t.OSS_URL_BASE},t.updateNodeSpriteFrame=function(t,e,n,o,i){void 0===n&&(n=!1),void 0===o&&(o=void 0),void 0===i&&(i="png"),t&&t.startsWith("https://")&&cc.assetManager.loadRemote(t,{ext:"."+i},function(n,i){if(n)console.error("[YDWallManager updateNodeSpriteFrame isFromNet] url:",t,"/err:",n);else if(cc.isValid(e)){var r=new cc.SpriteFrame(i),a=e.getComponent(cc.Sprite);a&&(a.spriteFrame=r),o&&o(r)}})},t.loadPefab=function(t,e){return void 0===e&&(e=!1),__awaiter(this,void 0,Promise,function(){var e=this;return __generator(this,function(){return[2,new Promise(function(n,o){return __awaiter(e,void 0,void 0,function(){var e,i,r=this;return __generator(this,function(a){switch(a.label){case 0:e=function(){return __awaiter(r,void 0,void 0,function(){return __generator(this,function(){return[2,new Promise(function(e,n){var o=setTimeout(function(){n("oadPefab \u8fde\u63a5\u8d85\u65f6"+t)},1e4);cc.resources.load(t,function(t,i){clearTimeout(o),t?n(t):e(i)})})]})})},i=3,a.label=1;case 1:return i>0?[4,e().then(function(t){i=0,n(t)}).catch(function(t){--i<=0&&o(t)})]:[3,3];case 2:return a.sent(),[3,1];case 3:return[2]}})})})]})})},t.aniWillShow=function(t){t.opacity=0,t.scale=.7},t.aniShow=function(t,e){t.stopAllActions(),cc.tween(t).to(.3,{opacity:255,scale:1},{easing:cc.easing.sineOut}).call(function(){e&&e()}).start()},t.OSS_URL_BASE="",t}();n.YDXUtils=o,cc._RF.pop()},{}],changeSkin:[function(t,e,n){"use strict";cc._RF.push(e,"7c87a5DMHNGeKeZltkcVA3f","changeSkin");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./HagoSdk"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.txt="",e}return i(e,t),e.prototype.onEnable=function(){a.default.instance.loadImage(this.node,this.txt,a.default.instance.getPicture())},r([l(cc.String)],e.prototype,"txt",void 0),r([s],e)}(cc.Component);n.default=u,cc._RF.pop()},{"./HagoSdk":"HagoSdk"}],changeString:[function(t,e,n){"use strict";cc._RF.push(e,"afd7dVaLH9N6og8J8h1QyHb","changeString");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./HagoSdk"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=1,e.txt="",e.str="\u9700\u8981%s\u66ff\u6362\u7684",e}return i(e,t),e.prototype.onEnable=function(){if(1==this.type&&this.node.getComponent(cc.Label))"\u9700\u8981%s\u66ff\u6362\u7684"==this.str?this.node.getComponent(cc.Label).string=a.default.instance.txt(this.txt):this.node.getComponent(cc.Label).string=a.default.instance.txt(this.txt,this.str);else{var t=this.node.getComponent(cc.RichText);t&&("\u9700\u8981%s\u66ff\u6362\u7684"==this.str?t.string=a.default.instance.txt(this.txt):t.string=a.default.instance.txt(this.txt,this.str))}},r([l(Number)],e.prototype,"type",void 0),r([l(cc.String)],e.prototype,"txt",void 0),r([l(cc.String)],e.prototype,"str",void 0),r([s],e)}(cc.Component);n.default=u,cc._RF.pop()},{"./HagoSdk":"HagoSdk"}],logger:[function(t,e,n){"use strict";cc._RF.push(e,"12fb0k69fJCzaBU9VS8ssOT","logger"),Object.defineProperty(n,"__esModule",{value:!0}),n.Logger=void 0;var o=function(){function t(){}return t.Init=function(t){this.DEBUG_LOG=t},t.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];t.DEBUG_LOG&&console.log.apply(console,o)},t.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];console.log.apply(console,t)},t.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];t.DEBUG_LOG&&console.warn.apply(console,o)},t.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];console.error.apply(console,n)},t.assert=function(e,n){for(var o=[],i=2;i<arguments.length;i++)o[i-2]=arguments[i];t.DEBUG_LOG&&console.assert.apply(console,__spreadArrays([e,n],o))},t.DEBUG_LOG=!1,t}();n.Logger=o,cc._RF.pop()},{}],platform:[function(t,e,n){"use strict";cc._RF.push(e,"66614ddERtCY450K1Vlf+Uz","platform"),Object.defineProperty(n,"__esModule",{value:!0});var o=!1,i=cc.sys.platform===cc.sys.WECHAT_GAME,r=(window&&window.qq,!1),a=cc.sys.os===cc.sys.OS_IOS&&r,c=cc.sys.os===cc.sys.OS_ANDROID&&r;function s(t,e){return console.warn("[platform]: ",t,r?JSON.stringify(e):e),o?Promise.resolve():null}s("isDebug",o),s("isWX",i),s("isAPP",r),s("isIOSAPP",a),s("isAndroidAPP",c),o&&void 0===window.HSDK&&(window.HSDK={},["ENV","LogType","EventType","NoticeType","SMSCodeType","QQScene","WXScene","QQMicroAppType","WXMicroAppType","MicroProgramType","BindPlatformType","AddicationType","SwitchStatus"].forEach(function(t){window.HSDK[t]={}}));var l=new(function(){function t(){this.user={tryLogin:function(){return s("user.tryLogin")||r&&HSDK.tryLogin()||Promise.reject()},login:function(t){return s("user.login",t)||HSDK.login(t)},onLogin:function(t){s("user.onLogin",t)||i&&HSDK.onLogin(t)},multiPlatformLogin:function(t){return s("user.multiPlatformLogin",t)||r&&HSDK.dialogLogin(t)||Promise.reject()},logout:function(){return s("user.logout")||HSDK.logout()},weakLogin:function(t){if(o){var e=localStorage.getItem("userId");e||(e=(new Date).getTime()+"",localStorage.setItem("userId",e));var n={id:e,name:e,authed:!!localStorage.getItem("_fakeAuthed")};return Promise.resolve(n)}return new Promise(function(e){HSDK.weakLogin(t).then(e).catch(function(){e(void 0)})})},createInfoBtn:function(t){return s("user.createInfoBtn",t)||i&&HSDK.createUserInfoButton(t)||Promise.reject()},setPlayerInfo:function(t){return s("user.setPlayerInfo",t)||i&&HSDK.setGameUserInfo(t)||Promise.reject()},updateInfo:function(t){return s("user.updateInfo",t)||i&&HSDK.updateUserInfo(t)||Promise.reject()}},this.share={shareMsg:function(t){return s("share.shareMsg",t)||HSDK.share(t)},onShare:function(t){return s("share.onShare",t)||i&&HSDK.onShare(t)||Promise.reject()},onTimeline:function(t){return s("share.onTimeline",t)||i&&HSDK.onShareTimeline(t)||Promise.reject()},getShareData:function(t){return s("share.getShareData",t)||i&&HSDK.getShareData(t)||Promise.reject()}},this.loading={show:function(t){s("loading.show",t)||HSDK.showLoading(t)},hide:function(){s("loading.hide")||HSDK.hideLoading()}},this.ui={showAlert:function(t){s("ui.showAlert",t)||a&&HSDK.showAlert(t)}},this.ad={video:{preload:function(t){return s("ad.video.preload",t)||HSDK.preloadAd(t)},show:function(t){return s("ad.video.show",t)||HSDK.showAd(t)}},banner:{preload:function(t){return s("ad.banner.preload",t)||HSDK.preloadAd(t)},show:function(t){return s("ad.banner.show",t)||HSDK.showAd(t)},hide:function(t){return s("ad.banner.hide",t)||HSDK.hideAd(t)}},interstitial:{preload:function(t){return s("ad.interstitial.preload",t)||HSDK.preloadAd(t)},show:function(t){return s("ad.interstitial.show",t)||HSDK.showAd(t)}},custom:{preload:function(t){return s("ad.custom.preload",t)||i&&HSDK.preloadAd(t)||Promise.reject()},show:function(t){return s("ad.custom.show",t)||i&&HSDK.showAd(t)||Promise.reject()},hide:function(t){return s("ad.hide",t)||HSDK.hideAd(t)}}},this.track={gameLog:function(t){return s("track.gameLog",t)||HSDK.gameTrack(t)},apmLog:function(t){s("track.apmLog",t)||i&&HSDK.postAPMLog(t)}},this.gm={getSwitchData:function(t){return s("gm.getSwitchData",t)||HSDK.checkSwitches(t)},getNotice:function(t){return s("gm.getNotice",t)||i&&HSDK.getNotice(t)||Promise.reject()}},this.subscribe={requestMsg:function(t){return s("subscribe.requestMsg",t)||i&&HSDK.requestSubscribeMessage(t)||Promise.reject()},getCount:function(){return s("subscribe.getCount")||i&&HSDK.getSubscribeMessageCount()||Promise.reject()}},this.realName={getInfo:function(){return s("realName.getInfo")||r&&HSDK.getRealNameInfo()}},this.antiAddiction={listen:function(t){s("antiAddiction.listen",t)||r&&HSDK.onAddictionQuit(t)}},this.apple={showComment:function(t){s("apple.showComment",t)||a&&HSDK.showAppComment(t)},onPaySupplement:function(t){s("apple.onPaySupplement",t)||a&&HSDK.onApplePaySupplement(t)}},this.wall={getTaskList:function(t){return s("wall.getTaskList",t)||i&&HSDK.getTask(t)||Promise.reject()},logOpenTaskPanel:function(){return s("wall.logOpenTaskPanel")||i&&HSDK.logOpenTaskPanel()||Promise.reject()},goTask:function(t){return s("wall.goTask",t)||i&&HSDK.goTask(t)||Promise.reject()},getAward:function(t){return s("wall.getAward",t)||i&&HSDK.getAward(t)||Promise.reject()}},this.customer={openMiniApp:function(t){return s("customer.openMiniApp",t)||i&&HSDK.openCustomerMiniApp(t)||Promise.reject()},openConversation:function(t){return s("customer.openConversation")||i&&HSDK.openCustomerServiceConversation(t)||Promise.reject()}}}return Object.defineProperty(t.prototype,"platformType",{get:function(){if(cc.sys.platform===cc.sys.WECHAT_GAME)return"hortor"},enumerable:!1,configurable:!0}),t.prototype.init=function(t){return s("init",t)||HSDK.init(t)},t.prototype.pay=function(t){return c?s("android pay",t)||HSDK.dialogPay(t):a?s("ios pay",t)||HSDK.applePay(t):i?s("wx pay",t)||HSDK.pay(t):void 0},t}());n.default=l,cc._RF.pop()},{}],"share-image":[function(t,e,n){"use strict";cc._RF.push(e,"e9740ftLAxMxpe3m4tfI5sX","share-image"),Object.defineProperty(n,"__esModule",{value:!0}),n.ShareImage=void 0;var o=t("./logger"),i=function(){function t(t,e){this.canvas=wx.createCanvas(),this.canvas.width=t,this.canvas.height=e,this.ctx=this.canvas.getContext("2d")}return t.prototype.measureText=function(t,e){var n=0;try{n=this.ctx.measureText(t).width}catch(i){n=t.length*e,o.Logger.debug("measureText \u62a5\u9519")}return n},t.prototype.addLabel=function(t,e,n,o,i,r,a,c,s,l){this.ctx.font=(e||20)+"px Arial"+(l?" bold":""),this.ctx.fillStyle="#623a18";var u=this.measureText(t,e);this.ctx.fillText(t,o-u*r,i-e*a),c&&(this.ctx.lineWidth=c,this.ctx.strokeStyle="#623a18",this.ctx.strokeText(t,o-u*r,i-e*a))},t.prototype.addMLabelEX2=function(t,e,n,o,i,r,a,c,s,l){for(var u=e.split("\n"),p=u.length,h=r-p*(n+t)/2,f=0;f<p;f++){var d=u[f];this.addLabel(d,n,0,i-d.length*n/2,h+f*(n+t)+t/2,0,0,s,l,!0)}},t.prototype.addMLabel=function(t,e,n,o,i,r,a,c,s,l,u){n.length==e+1&&(e-=1);for(var p=Math.ceil(n.length/e),h=a+o/2-((o+t)*p-(1==p?0:t))/2,f=0;f<p;f++){var d=f*e,g=Math.min(e,n.length-d),m=n.substr(d,g);this.addLabel(m,o,0,r,h+f*(o+t),0,0,l,u,!0)}},t.prototype.addImage=function(t,e,n,o,i,r,a){return __awaiter(this,void 0,Promise,function(){var c;return __generator(this,function(){return c=this.ctx,[2,new Promise(function(s,l){var u=wx.createImage();u.src=t,u.onload=function(){c.drawImage(u,0,0,u.width,u.height,o-u.width*e*r,i-u.height*n*a,u.width*r,u.height*a),s()},u.onerror=function(){l()}})]})})},t.prototype.addAvatar=function(t,e,n,o,i){return __awaiter(this,void 0,Promise,function(){var r,a;return __generator(this,function(){return t?(r=t.replace(/\/0$/,"/96"),a=this.ctx,[2,new Promise(function(t,c){var s=wx.createImage();s.src=r,s.onload=function(){a.drawImage(s,0,0,s.width,s.height,e,n,o,i),t()},s.onerror=function(){c()}})]):[2]})})},t.prototype.saveToFile=function(t){try{return this.canvas.toTempFilePathSync({x:t.x,y:t.y,width:t.width,height:t.height,destWidth:t.width,destHeight:t.height})}catch(e){o.Logger.warn("[ShareImage].saveToFile e:",e)}},t}();n.ShareImage=i,cc._RF.pop()},{"./logger":"logger"}],soundMG:[function(t,e,n){"use strict";cc._RF.push(e,"304b9qZsZpLL6CEYdKJq5/3","soundMG");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./AudioManager"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spfArySound=[],e.spArrayAudio=[],e.spSound=null,e.spAudio=null,e}return i(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.onBtnClose=function(){this.node.removeFromParent(),this.node.destroy()},e.prototype.onBtnSwitchSet=function(t,e){switch(e){case"sound":a.default.Instance.setSFXEnabled(!a.default.Instance.sfxEnabled),console.log("sound");break;case"audio":a.default.Instance.setBGMEnabled(!a.default.Instance.bgmEnabled),console.log("audio")}},e.prototype.OnBtnPerson=function(){},e.prototype.update=function(){this.spSound.spriteFrame=this.spfArySound[Number(a.default.Instance.sfxEnabled)],this.spAudio.spriteFrame=this.spArrayAudio[Number(a.default.Instance.bgmEnabled)]},r([l({type:[cc.SpriteFrame],displayName:"\u97f3\u6548\u5f00\u5173\u7cbe\u7075\u5e27"})],e.prototype,"spfArySound",void 0),r([l({type:[cc.SpriteFrame],displayName:"\u97f3\u4e50\u5f00\u5173\u7cbe\u7075\u5e27"})],e.prototype,"spArrayAudio",void 0),r([l(cc.Sprite)],e.prototype,"spSound",void 0),r([l(cc.Sprite)],e.prototype,"spAudio",void 0),r([s],e)}(cc.Component);n.default=u,cc._RF.pop()},{"./AudioManager":"AudioManager"}],"\u5360\u5751\u5360\u5751\u5360\u5751":[function(t,e){"use strict";cc._RF.push(e,"b3e9fLrB8lDJLfn3cQoZn/k","\u5360\u5751\u5360\u5751\u5360\u5751"),cc.Class({extends:cc.Component,properties:{},start:function(){}}),cc._RF.pop()},{}]},{},["ABTestManager","AudioManager","BasePanel","DataManager","G","GameManager","GlobalEvents","GlobalTouch","HortorAdManager","NetworkManager","PlatformManager","PlatformMiniGame","PlatformUtil","SaveData","SceneManager","CellFactory","Jumpjump","SceneLoadingUI","SwitchNode","RankCell","RankPanel","RankUtils","WorldView","Toast","YDBanner","YDBannerUtils","WallBtn","WallCell","WallPanel","WallResList","YDWallBanner","YDWallManager","YDWallPanel","YDWallTaskView","YDXPanel","YDXUtils","GlobalDefines","Jumpjump3d","Shakeshake","SpriteToHome","platform","HortorSdk","HortorSdkV2","KongDaoSdk","WXSdk","soundMG","HurryLoading","MessageBox","GameUtils","Launch","ScoreView","ScrollViewItemBase","ScrollViewMagneticH","ScrollViewPartner","ScrollViewPartnerH","BattleCompBase","BattleEvents","BattleLogic","StageScene","LevelData","AlphaForever","BundleLocalResList","BundleResource","BundleResourceList","ColorForever","EffectOnce","GuideManager","GuideUtils","ISeed","ListCellBase","NestableScrollView_Inner","NestableScrollView_Outer","NumberAction","RankWxView","RedDot","RedDotManager","RewardTargeter","RoteteForever","ShareUtil","UIManager","CoinView","TopResSubViewBase","TopResView","BattleConfig","GameConfig","ABTestConfig","AdConfig","GameSetting","PlayerInfo","SaveDataConfig","Bottle","Item","MainController","MainScene","SmallBottle","UIController","AwardPanel","OneBeePanel","PartData","ResultPanel","RevivePanel","TableItem","TablePanel","LoadingScene","FBManager","HagoSdk","changeSkin","changeString","AniUtil","Utils","logger","share-image","\u5360\u5751\u5360\u5751\u5360\u5751"]);